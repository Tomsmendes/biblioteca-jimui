(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function vA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hp={exports:{}},cu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function Ex(){if($0)return cu;$0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var f in r)f!=="key"&&(a[f]=r[f])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:u,ref:r!==void 0?r:null,props:a}}return cu.Fragment=e,cu.jsx=t,cu.jsxs=t,cu}var X0;function Sx(){return X0||(X0=1,hp.exports=Ex()),hp.exports}var C=Sx(),mp={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function Ax(){if(W0)return be;W0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),E=Symbol.iterator;function w(G){return G===null||typeof G!="object"?null:(G=E&&G[E]||G["@@iterator"],typeof G=="function"?G:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,P={};function z(G,re,he){this.props=G,this.context=re,this.refs=P,this.updater=he||V}z.prototype.isReactComponent={},z.prototype.setState=function(G,re){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,re,"setState")},z.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function j(){}j.prototype=z.prototype;function $(G,re,he){this.props=G,this.context=re,this.refs=P,this.updater=he||V}var se=$.prototype=new j;se.constructor=$,U(se,z.prototype),se.isPureReactComponent=!0;var X=Array.isArray;function le(){}var x={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function D(G,re,he){var pe=he.ref;return{$$typeof:n,type:G,key:re,ref:pe!==void 0?pe:null,props:he}}function F(G,re){return D(G.type,re,G.props)}function k(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function O(G){var re={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(he){return re[he]})}var M=/\/+/g;function Ae(G,re){return typeof G=="object"&&G!==null&&G.key!=null?O(""+G.key):re.toString(36)}function Ze(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(le,le):(G.status="pending",G.then(function(re){G.status==="pending"&&(G.status="fulfilled",G.value=re)},function(re){G.status==="pending"&&(G.status="rejected",G.reason=re)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function ee(G,re,he,pe,Ce){var Me=typeof G;(Me==="undefined"||Me==="boolean")&&(G=null);var He=!1;if(G===null)He=!0;else switch(Me){case"bigint":case"string":case"number":He=!0;break;case"object":switch(G.$$typeof){case n:case e:He=!0;break;case _:return He=G._init,ee(He(G._payload),re,he,pe,Ce)}}if(He)return Ce=Ce(G),He=pe===""?"."+Ae(G,0):pe,X(Ce)?(he="",He!=null&&(he=He.replace(M,"$&/")+"/"),ee(Ce,re,he,"",function(Ir){return Ir})):Ce!=null&&(k(Ce)&&(Ce=F(Ce,he+(Ce.key==null||G&&G.key===Ce.key?"":(""+Ce.key).replace(M,"$&/")+"/")+He)),re.push(Ce)),1;He=0;var Bt=pe===""?".":pe+":";if(X(G))for(var ht=0;ht<G.length;ht++)pe=G[ht],Me=Bt+Ae(pe,ht),He+=ee(pe,re,he,Me,Ce);else if(ht=w(G),typeof ht=="function")for(G=ht.call(G),ht=0;!(pe=G.next()).done;)pe=pe.value,Me=Bt+Ae(pe,ht++),He+=ee(pe,re,he,Me,Ce);else if(Me==="object"){if(typeof G.then=="function")return ee(Ze(G),re,he,pe,Ce);throw re=String(G),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return He}function fe(G,re,he){if(G==null)return G;var pe=[],Ce=0;return ee(G,pe,"","",function(Me){return re.call(he,Me,Ce++)}),pe}function _e(G){if(G._status===-1){var re=G._result;re=re(),re.then(function(he){(G._status===0||G._status===-1)&&(G._status=1,G._result=he)},function(he){(G._status===0||G._status===-1)&&(G._status=2,G._result=he)}),G._status===-1&&(G._status=0,G._result=re)}if(G._status===1)return G._result.default;throw G._result}var Le=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},je={map:fe,forEach:function(G,re,he){fe(G,function(){re.apply(this,arguments)},he)},count:function(G){var re=0;return fe(G,function(){re++}),re},toArray:function(G){return fe(G,function(re){return re})||[]},only:function(G){if(!k(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return be.Activity=T,be.Children=je,be.Component=z,be.Fragment=t,be.Profiler=r,be.PureComponent=$,be.StrictMode=i,be.Suspense=h,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,be.__COMPILER_RUNTIME={__proto__:null,c:function(G){return x.H.useMemoCache(G)}},be.cache=function(G){return function(){return G.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(G,re,he){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var pe=U({},G.props),Ce=G.key;if(re!=null)for(Me in re.key!==void 0&&(Ce=""+re.key),re)!N.call(re,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&re.ref===void 0||(pe[Me]=re[Me]);var Me=arguments.length-2;if(Me===1)pe.children=he;else if(1<Me){for(var He=Array(Me),Bt=0;Bt<Me;Bt++)He[Bt]=arguments[Bt+2];pe.children=He}return D(G.type,Ce,pe)},be.createContext=function(G){return G={$$typeof:u,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},be.createElement=function(G,re,he){var pe,Ce={},Me=null;if(re!=null)for(pe in re.key!==void 0&&(Me=""+re.key),re)N.call(re,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ce[pe]=re[pe]);var He=arguments.length-2;if(He===1)Ce.children=he;else if(1<He){for(var Bt=Array(He),ht=0;ht<He;ht++)Bt[ht]=arguments[ht+2];Ce.children=Bt}if(G&&G.defaultProps)for(pe in He=G.defaultProps,He)Ce[pe]===void 0&&(Ce[pe]=He[pe]);return D(G,Me,Ce)},be.createRef=function(){return{current:null}},be.forwardRef=function(G){return{$$typeof:f,render:G}},be.isValidElement=k,be.lazy=function(G){return{$$typeof:_,_payload:{_status:-1,_result:G},_init:_e}},be.memo=function(G,re){return{$$typeof:m,type:G,compare:re===void 0?null:re}},be.startTransition=function(G){var re=x.T,he={};x.T=he;try{var pe=G(),Ce=x.S;Ce!==null&&Ce(he,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(le,Le)}catch(Me){Le(Me)}finally{re!==null&&he.types!==null&&(re.types=he.types),x.T=re}},be.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},be.use=function(G){return x.H.use(G)},be.useActionState=function(G,re,he){return x.H.useActionState(G,re,he)},be.useCallback=function(G,re){return x.H.useCallback(G,re)},be.useContext=function(G){return x.H.useContext(G)},be.useDebugValue=function(){},be.useDeferredValue=function(G,re){return x.H.useDeferredValue(G,re)},be.useEffect=function(G,re){return x.H.useEffect(G,re)},be.useEffectEvent=function(G){return x.H.useEffectEvent(G)},be.useId=function(){return x.H.useId()},be.useImperativeHandle=function(G,re,he){return x.H.useImperativeHandle(G,re,he)},be.useInsertionEffect=function(G,re){return x.H.useInsertionEffect(G,re)},be.useLayoutEffect=function(G,re){return x.H.useLayoutEffect(G,re)},be.useMemo=function(G,re){return x.H.useMemo(G,re)},be.useOptimistic=function(G,re){return x.H.useOptimistic(G,re)},be.useReducer=function(G,re,he){return x.H.useReducer(G,re,he)},be.useRef=function(G){return x.H.useRef(G)},be.useState=function(G){return x.H.useState(G)},be.useSyncExternalStore=function(G,re,he){return x.H.useSyncExternalStore(G,re,he)},be.useTransition=function(){return x.H.useTransition()},be.version="19.2.4",be}var Z0;function wg(){return Z0||(Z0=1,mp.exports=Ax()),mp.exports}var Ue=wg();const Ix=vA(Ue);var pp={exports:{}},fu={},gp={exports:{}},yp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function Cx(){return j0||(j0=1,(function(n){function e(ee,fe){var _e=ee.length;ee.push(fe);e:for(;0<_e;){var Le=_e-1>>>1,je=ee[Le];if(0<r(je,fe))ee[Le]=fe,ee[_e]=je,_e=Le;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var fe=ee[0],_e=ee.pop();if(_e!==fe){ee[0]=_e;e:for(var Le=0,je=ee.length,G=je>>>1;Le<G;){var re=2*(Le+1)-1,he=ee[re],pe=re+1,Ce=ee[pe];if(0>r(he,_e))pe<je&&0>r(Ce,he)?(ee[Le]=Ce,ee[pe]=_e,Le=pe):(ee[Le]=he,ee[re]=_e,Le=re);else if(pe<je&&0>r(Ce,_e))ee[Le]=Ce,ee[pe]=_e,Le=pe;else break e}}return fe}function r(ee,fe){var _e=ee.sortIndex-fe.sortIndex;return _e!==0?_e:ee.id-fe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var h=[],m=[],_=1,T=null,E=3,w=!1,V=!1,U=!1,P=!1,z=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function se(ee){for(var fe=t(m);fe!==null;){if(fe.callback===null)i(m);else if(fe.startTime<=ee)i(m),fe.sortIndex=fe.expirationTime,e(h,fe);else break;fe=t(m)}}function X(ee){if(U=!1,se(ee),!V)if(t(h)!==null)V=!0,le||(le=!0,O());else{var fe=t(m);fe!==null&&Ze(X,fe.startTime-ee)}}var le=!1,x=-1,N=5,D=-1;function F(){return P?!0:!(n.unstable_now()-D<N)}function k(){if(P=!1,le){var ee=n.unstable_now();D=ee;var fe=!0;try{e:{V=!1,U&&(U=!1,j(x),x=-1),w=!0;var _e=E;try{t:{for(se(ee),T=t(h);T!==null&&!(T.expirationTime>ee&&F());){var Le=T.callback;if(typeof Le=="function"){T.callback=null,E=T.priorityLevel;var je=Le(T.expirationTime<=ee);if(ee=n.unstable_now(),typeof je=="function"){T.callback=je,se(ee),fe=!0;break t}T===t(h)&&i(h),se(ee)}else i(h);T=t(h)}if(T!==null)fe=!0;else{var G=t(m);G!==null&&Ze(X,G.startTime-ee),fe=!1}}break e}finally{T=null,E=_e,w=!1}fe=void 0}}finally{fe?O():le=!1}}}var O;if(typeof $=="function")O=function(){$(k)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Ae=M.port2;M.port1.onmessage=k,O=function(){Ae.postMessage(null)}}else O=function(){z(k,0)};function Ze(ee,fe){x=z(function(){ee(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(ee){switch(E){case 1:case 2:case 3:var fe=3;break;default:fe=E}var _e=E;E=fe;try{return ee()}finally{E=_e}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(ee,fe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var _e=E;E=ee;try{return fe()}finally{E=_e}},n.unstable_scheduleCallback=function(ee,fe,_e){var Le=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Le+_e:Le):_e=Le,ee){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=_e+je,ee={id:_++,callback:fe,priorityLevel:ee,startTime:_e,expirationTime:je,sortIndex:-1},_e>Le?(ee.sortIndex=_e,e(m,ee),t(h)===null&&ee===t(m)&&(U?(j(x),x=-1):U=!0,Ze(X,_e-Le))):(ee.sortIndex=je,e(h,ee),V||w||(V=!0,le||(le=!0,O()))),ee},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(ee){var fe=E;return function(){var _e=E;E=fe;try{return ee.apply(this,arguments)}finally{E=_e}}}})(yp)),yp}var eT;function wx(){return eT||(eT=1,gp.exports=Cx()),gp.exports}var _p={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function Rx(){if(tT)return on;tT=1;var n=wg();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,m,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:h,containerInfo:m,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(h,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(h,m,null,_)},on.flushSync=function(h){var m=u.T,_=i.p;try{if(u.T=null,i.p=2,h)return h()}finally{u.T=m,i.p=_,i.d.f()}},on.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(h,m))},on.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},on.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var _=m.as,T=f(_,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?i.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:E,fetchPriority:w}):_==="script"&&i.d.X(h,{crossOrigin:T,integrity:E,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},on.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=f(m.as,m.crossOrigin);i.d.M(h,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(h)},on.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,T=f(_,m.crossOrigin);i.d.L(h,_,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},on.preloadModule=function(h,m){if(typeof h=="string")if(m){var _=f(m.as,m.crossOrigin);i.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(h)},on.requestFormReset=function(h){i.d.r(h)},on.unstable_batchedUpdates=function(h,m){return h(m)},on.useFormState=function(h,m,_){return u.H.useFormState(h,m,_)},on.useFormStatus=function(){return u.H.useHostTransitionStatus()},on.version="19.2.4",on}var nT;function xx(){if(nT)return _p.exports;nT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_p.exports=Rx(),_p.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function bx(){if(iT)return fu;iT=1;var n=wx(),e=wg(),t=xx();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function u(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function f(o){if(o.tag===31){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function h(o){if(a(o)!==o)throw Error(i(188))}function m(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var l=o,c=s;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return h(y),o;if(v===c)return h(y),s;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var A=!1,R=y.child;R;){if(R===l){A=!0,l=y,c=v;break}if(R===c){A=!0,c=y,l=v;break}R=R.sibling}if(!A){for(R=v.child;R;){if(R===l){A=!0,l=v,c=y;break}if(R===c){A=!0,c=v,l=y;break}R=R.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?o:s}function _(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=_(o),s!==null)return s;o=o.sibling}return null}var T=Object.assign,E=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),$=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function O(o){return o===null||typeof o!="object"?null:(o=k&&o[k]||o["@@iterator"],typeof o=="function"?o:null)}var M=Symbol.for("react.client.reference");function Ae(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===M?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case U:return"Fragment";case z:return"Profiler";case P:return"StrictMode";case X:return"Suspense";case le:return"SuspenseList";case D:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case V:return"Portal";case $:return o.displayName||"Context";case j:return(o._context.displayName||"Context")+".Consumer";case se:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case x:return s=o.displayName||null,s!==null?s:Ae(o.type)||"Memo";case N:s=o._payload,o=o._init;try{return Ae(o(s))}catch{}}return null}var Ze=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Le=[],je=-1;function G(o){return{current:o}}function re(o){0>je||(o.current=Le[je],Le[je]=null,je--)}function he(o,s){je++,Le[je]=o.current,o.current=s}var pe=G(null),Ce=G(null),Me=G(null),He=G(null);function Bt(o,s){switch(he(Me,s),he(Ce,o),he(pe,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?_0(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=_0(s),o=v0(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}re(pe),he(pe,o)}function ht(){re(pe),re(Ce),re(Me)}function Ir(o){o.memoizedState!==null&&he(He,o);var s=pe.current,l=v0(s,o.type);s!==l&&(he(Ce,o),he(pe,l))}function Rs(o){Ce.current===o&&(re(pe),re(Ce)),He.current===o&&(re(He),su._currentValue=_e)}var xs,bs;function Ei(o){if(xs===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);xs=s&&s[1]||"",bs=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xs+o+bs}var sl=!1;function Cr(o,s){if(!o||sl)return"";sl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var Q=Z}Reflect.construct(o,[],oe)}else{try{oe.call()}catch(Z){Q=Z}o.call(oe.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(oe=o())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],R=v[1];if(A&&R){var L=A.split(`
`),J=R.split(`
`);for(y=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===L.length||y===J.length)for(c=L.length-1,y=J.length-1;1<=c&&0<=y&&L[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(L[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||L[c]!==J[y]){var te=`
`+L[c].replace(" at new "," at ");return o.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",o.displayName)),te}while(1<=c&&0<=y);break}}}finally{sl=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?Ei(l):""}function al(o,s){switch(o.tag){case 26:case 27:case 5:return Ei(o.type);case 16:return Ei("Lazy");case 13:return o.child!==s&&s!==null?Ei("Suspense Fallback"):Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 15:return Cr(o.type,!1);case 11:return Cr(o.type.render,!1);case 1:return Cr(o.type,!0);case 31:return Ei("Activity");default:return""}}function ll(o){try{var s="",l=null;do s+=al(o,l),l=o,o=o.return;while(o);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Rt=Object.prototype.hasOwnProperty,Gt=n.unstable_scheduleCallback,wo=n.unstable_cancelCallback,ph=n.unstable_shouldYield,lc=n.unstable_requestPaint,cn=n.unstable_now,wr=n.unstable_getCurrentPriorityLevel,ul=n.unstable_ImmediatePriority,cl=n.unstable_UserBlockingPriority,Ro=n.unstable_NormalPriority,gh=n.unstable_LowPriority,uc=n.unstable_IdlePriority,cc=n.log,fc=n.unstable_setDisableYieldValue,oi=null,$t=null;function Fn(o){if(typeof cc=="function"&&fc(o),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(oi,o)}catch{}}var St=Math.clz32?Math.clz32:hc,dc=Math.log,Ns=Math.LN2;function hc(o){return o>>>=0,o===0?32:31-(dc(o)/Ns|0)|0}var Si=256,Rr=262144,xt=4194304;function Ai(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ii(o,s,l){var c=o.pendingLanes;if(c===0)return 0;var y=0,v=o.suspendedLanes,A=o.pingedLanes;o=o.warmLanes;var R=c&134217727;return R!==0?(c=R&~v,c!==0?y=Ai(c):(A&=R,A!==0?y=Ai(A):l||(l=R&~o,l!==0&&(y=Ai(l))))):(R=c&~v,R!==0?y=Ai(R):A!==0?y=Ai(A):l||(l=c&~o,l!==0&&(y=Ai(l)))),y===0?0:s!==0&&s!==y&&(s&v)===0&&(v=y&-y,l=s&-s,v>=l||v===32&&(l&4194048)!==0)?s:y}function ri(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function yh(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mc(){var o=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),o}function Ci(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function xr(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function _h(o,s,l,c,y,v){var A=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var R=o.entanglements,L=o.expirationTimes,J=o.hiddenUpdates;for(l=A&~l;0<l;){var te=31-St(l),oe=1<<te;R[te]=0,L[te]=-1;var Q=J[te];if(Q!==null)for(J[te]=null,te=0;te<Q.length;te++){var Z=Q[te];Z!==null&&(Z.lane&=-536870913)}l&=~oe}c!==0&&br(o,c,0),v!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=v&~(A&~s))}function br(o,s,l){o.pendingLanes|=s,o.suspendedLanes&=~s;var c=31-St(s);o.entangledLanes|=s,o.entanglements[c]=o.entanglements[c]|1073741824|l&261930}function fl(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var c=31-St(l),y=1<<c;y&s|o[c]&s&&(o[c]|=s),l&=~y}}function dl(o,s){var l=s&-s;return l=(l&42)!==0?1:Nr(l),(l&(o.suspendedLanes|s))!==0?0:l}function Nr(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Xi(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function pc(){var o=fe.p;return o!==0?o:(o=window.event,o===void 0?32:q0(o.type))}function si(o,s){var l=fe.p;try{return fe.p=o,s()}finally{fe.p=l}}var ai=Math.random().toString(36).slice(2),bt="__reactFiber$"+ai,zt="__reactProps$"+ai,wi="__reactContainer$"+ai,Ds="__reactEvents$"+ai,vh="__reactListeners$"+ai,gc="__reactHandles$"+ai,yc="__reactResources$"+ai,Ri="__reactMarker$"+ai;function Ms(o){delete o[bt],delete o[zt],delete o[Ds],delete o[vh],delete o[gc]}function xi(o){var s=o[bt];if(s)return s;for(var l=o.parentNode;l;){if(s=l[wi]||l[bt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=w0(o);o!==null;){if(l=o[bt])return l;o=w0(o)}return s}o=l,l=o.parentNode}return null}function Bn(o){if(o=o[bt]||o[wi]){var s=o.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return o}return null}function wn(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function bi(o){var s=o[yc];return s||(s=o[yc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Nt(o){o[Ri]=!0}var hl=new Set,ml={};function Ni(o,s){Di(o,s),Di(o+"Capture",s)}function Di(o,s){for(ml[o]=s,o=0;o<s.length;o++)hl.add(s[o])}var pl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gl={},yl={};function _c(o){return Rt.call(yl,o)?!0:Rt.call(gl,o)?!1:pl.test(o)?yl[o]=!0:(gl[o]=!0,!1)}function Vs(o,s,l){if(_c(s))if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+l)}}function Rn(o,s,l){if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+l)}}function Dt(o,s,l,c){if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(s,l,""+c)}}function Kt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function xo(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _l(o,s,l){var c=Object.getOwnPropertyDescriptor(o.constructor.prototype,s);if(!o.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,v.call(this,A)}}),Object.defineProperty(o,s,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function et(o){if(!o._valueTracker){var s=xo(o)?"checked":"value";o._valueTracker=_l(o,s,""+o[s])}}function Dr(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return o&&(c=xo(o)?o.checked?"true":"false":o.value),o=c,o!==l?(s.setValue(o),!0):!1}function Mi(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Mr=/[\n"\\]/g;function _n(o){return o.replace(Mr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ps(o,s,l,c,y,v,A,R){o.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.type=A:o.removeAttribute("type"),s!=null?A==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+Kt(s)):o.value!==""+Kt(s)&&(o.value=""+Kt(s)):A!=="submit"&&A!=="reset"||o.removeAttribute("value"),s!=null?vl(o,A,Kt(s)):l!=null?vl(o,A,Kt(l)):c!=null&&o.removeAttribute("value"),y==null&&v!=null&&(o.defaultChecked=!!v),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.name=""+Kt(R):o.removeAttribute("name")}function vc(o,s,l,c,y,v,A,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(o.type=v),s!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){et(o);return}l=l!=null?""+Kt(l):"",s=s!=null?""+Kt(s):l,R||s===o.value||(o.value=s),o.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,o.checked=R?o.checked:!!c,o.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.name=A),et(o)}function vl(o,s,l){s==="number"&&Mi(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function bo(o,s,l,c){if(o=o.options,s){s={};for(var y=0;y<l.length;y++)s["$"+l[y]]=!0;for(l=0;l<o.length;l++)y=s.hasOwnProperty("$"+o[l].value),o[l].selected!==y&&(o[l].selected=y),y&&c&&(o[l].defaultSelected=!0)}else{for(l=""+Kt(l),s=null,y=0;y<o.length;y++){if(o[y].value===l){o[y].selected=!0,c&&(o[y].defaultSelected=!0);return}s!==null||o[y].disabled||(s=o[y])}s!==null&&(s.selected=!0)}}function Tc(o,s,l){if(s!=null&&(s=""+Kt(s),s!==o.value&&(o.value=s),l==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=l!=null?""+Kt(l):""}function No(o,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(Ze(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=Kt(s),o.defaultValue=l,c=o.textContent,c===l&&c!==""&&c!==null&&(o.value=c),et(o)}function vn(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var Ec=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tl(o,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":c?o.setProperty(s,l):typeof l!="number"||l===0||Ec.has(s)?s==="float"?o.cssFloat=l:o[s]=(""+l).trim():o[s]=l+"px"}function El(o,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&l[y]!==c&&Tl(o,y,c)}else for(var v in s)s.hasOwnProperty(v)&&Tl(o,v,s[v])}function Us(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Do=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ls(o){return Do.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function li(){}var Sl=null;function Gn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Mo=null,Vi=null;function Vr(o){var s=Bn(o);if(s&&(o=s.stateNode)){var l=o[zt]||null;e:switch(o=s.stateNode,s.type){case"input":if(Ps(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+_n(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==o&&c.form===o.form){var y=c[zt]||null;if(!y)throw Error(i(90));Ps(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===o.form&&Dr(c)}break e;case"textarea":Tc(o,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&bo(o,!!l.multiple,s,!1)}}}var ks=!1;function Vo(o,s,l){if(ks)return o(s,l);ks=!0;try{var c=o(s);return c}finally{if(ks=!1,(Mo!==null||Vi!==null)&&(gf(),Mo&&(s=Mo,o=Vi,Vi=Mo=null,Vr(s),o)))for(s=0;s<o.length;s++)Vr(o[s])}}function ui(o,s){var l=o.stateNode;if(l===null)return null;var c=l[zt]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(o=o.type,c=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!c;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pr=!1;if(qn)try{var st={};Object.defineProperty(st,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{Pr=!1}var Pi=null,Al=null,Ur=null;function Il(){if(Ur)return Ur;var o,s=Al,l=s.length,c,y="value"in Pi?Pi.value:Pi.textContent,v=y.length;for(o=0;o<l&&s[o]===y[o];o++);var A=l-o;for(c=1;c<=A&&s[l-c]===y[v-c];c++);return Ur=y.slice(o,1<c?1-c:void 0)}function Lr(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Wi(){return!0}function ci(){return!1}function Xt(o){function s(l,c,y,v,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var R in o)o.hasOwnProperty(R)&&(l=o[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Wi:ci,this.isPropagationStopped=ci,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),s}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=Xt(Zi),Po=T({},Zi,{view:0,detail:0}),Cl=Xt(Po),Uo,Os,Li,Fs=T({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Li&&(Li&&o.type==="mousemove"?(Uo=o.screenX-Li.screenX,Os=o.screenY-Li.screenY):Os=Uo=0,Li=o),Uo)},movementY:function(o){return"movementY"in o?o.movementY:Os}}),wl=Xt(Fs),kr=T({},Fs,{dataTransfer:0}),Ac=Xt(kr),Ic=T({},Po,{relatedTarget:0}),Or=Xt(Ic),Rl=T({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Cc=Xt(Rl),Bs=T({},Zi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),wc=Xt(Bs),Rc=T({},Zi,{data:0}),ki=Xt(Rc),xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dc(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Nc[o])?!!s[o]:!1}function Lo(){return Dc}var fn=T({},Po,{key:function(o){if(o.key){var s=xc[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Lr(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?bc[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lo,charCode:function(o){return o.type==="keypress"?Lr(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Lr(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Mc=Xt(fn),Vc=T({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ji=Xt(Vc),g=T({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lo}),S=Xt(g),I=T({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Xt(I),K=T({},Fs,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),W=Xt(K),ue=T({},Zi,{newState:0,oldState:0}),Ne=Xt(ue),At=[9,13,27,32],$e=qn&&"CompositionEvent"in window,mt=null;qn&&"documentMode"in document&&(mt=document.documentMode);var Hn=qn&&"TextEvent"in window&&!mt,Oi=qn&&(!$e||mt&&8<mt&&11>=mt),fi=" ",di=!1;function Fr(o,s){switch(o){case"keyup":return At.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gs(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var qs=!1;function Kw(o,s){switch(o){case"compositionend":return Gs(s);case"keypress":return s.which!==32?null:(di=!0,fi);case"textInput":return o=s.data,o===fi&&di?null:o;default:return null}}function Yw(o,s){if(qs)return o==="compositionend"||!$e&&Fr(o,s)?(o=Il(),Ur=Al=Pi=null,qs=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Oi&&s.locale!=="ko"?null:s.data;default:return null}}var Jw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function by(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!Jw[o.type]:s==="textarea"}function Ny(o,s,l,c){Mo?Vi?Vi.push(c):Vi=[c]:Mo=c,s=Af(s,"onChange"),0<s.length&&(l=new Ui("onChange","change",null,l,c),o.push({event:l,listeners:s}))}var xl=null,bl=null;function Qw(o){d0(o,0)}function Pc(o){var s=wn(o);if(Dr(s))return o}function Dy(o,s){if(o==="change")return s}var My=!1;if(qn){var Th;if(qn){var Eh="oninput"in document;if(!Eh){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),Eh=typeof Vy.oninput=="function"}Th=Eh}else Th=!1;My=Th&&(!document.documentMode||9<document.documentMode)}function Py(){xl&&(xl.detachEvent("onpropertychange",Uy),bl=xl=null)}function Uy(o){if(o.propertyName==="value"&&Pc(bl)){var s=[];Ny(s,bl,o,Gn(o)),Vo(Qw,s)}}function $w(o,s,l){o==="focusin"?(Py(),xl=s,bl=l,xl.attachEvent("onpropertychange",Uy)):o==="focusout"&&Py()}function Xw(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Pc(bl)}function Ww(o,s){if(o==="click")return Pc(s)}function Zw(o,s){if(o==="input"||o==="change")return Pc(s)}function jw(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var xn=typeof Object.is=="function"?Object.is:jw;function Nl(o,s){if(xn(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Rt.call(s,y)||!xn(o[y],s[y]))return!1}return!0}function Ly(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function ky(o,s){var l=Ly(o);o=0;for(var c;l;){if(l.nodeType===3){if(c=o+l.textContent.length,o<=s&&c>=s)return{node:l,offset:s-o};o=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ly(l)}}function Oy(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?Oy(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function Fy(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=Mi(o.document);s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=Mi(o.document)}return s}function Sh(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var eR=qn&&"documentMode"in document&&11>=document.documentMode,Hs=null,Ah=null,Dl=null,Ih=!1;function By(o,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ih||Hs==null||Hs!==Mi(c)||(c=Hs,"selectionStart"in c&&Sh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Dl&&Nl(Dl,c)||(Dl=c,c=Af(Ah,"onSelect"),0<c.length&&(s=new Ui("onSelect","select",null,s,l),o.push({event:s,listeners:c}),s.target=Hs)))}function Br(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var zs={animationend:Br("Animation","AnimationEnd"),animationiteration:Br("Animation","AnimationIteration"),animationstart:Br("Animation","AnimationStart"),transitionrun:Br("Transition","TransitionRun"),transitionstart:Br("Transition","TransitionStart"),transitioncancel:Br("Transition","TransitionCancel"),transitionend:Br("Transition","TransitionEnd")},Ch={},Gy={};qn&&(Gy=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function Gr(o){if(Ch[o])return Ch[o];if(!zs[o])return o;var s=zs[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in Gy)return Ch[o]=s[l];return o}var qy=Gr("animationend"),Hy=Gr("animationiteration"),zy=Gr("animationstart"),tR=Gr("transitionrun"),nR=Gr("transitionstart"),iR=Gr("transitioncancel"),Ky=Gr("transitionend"),Yy=new Map,wh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wh.push("scrollEnd");function hi(o,s){Yy.set(o,s),Ni(s,[o])}var Uc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},zn=[],Ks=0,Rh=0;function Lc(){for(var o=Ks,s=Rh=Ks=0;s<o;){var l=zn[s];zn[s++]=null;var c=zn[s];zn[s++]=null;var y=zn[s];zn[s++]=null;var v=zn[s];if(zn[s++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&Jy(l,y,v)}}function kc(o,s,l,c){zn[Ks++]=o,zn[Ks++]=s,zn[Ks++]=l,zn[Ks++]=c,Rh|=c,o.lanes|=c,o=o.alternate,o!==null&&(o.lanes|=c)}function xh(o,s,l,c){return kc(o,s,l,c),Oc(o)}function qr(o,s){return kc(o,null,null,s),Oc(o)}function Jy(o,s,l){o.lanes|=l;var c=o.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=o.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(o=v.stateNode,o===null||o._visibility&1||(y=!0)),o=v,v=v.return;return o.tag===3?(v=o.stateNode,y&&s!==null&&(y=31-St(l),o=v.hiddenUpdates,c=o[y],c===null?o[y]=[s]:c.push(s),s.lane=l|536870912),v):null}function Oc(o){if(50<jl)throw jl=0,km=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var Ys={};function oR(o,s,l,c){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(o,s,l,c){return new oR(o,s,l,c)}function bh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function eo(o,s){var l=o.alternate;return l===null?(l=bn(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function Qy(o,s){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function Fc(o,s,l,c,y,v){var A=0;if(c=o,typeof o=="function")bh(o)&&(A=1);else if(typeof o=="string")A=ux(o,l,pe.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case D:return o=bn(31,l,s,y),o.elementType=D,o.lanes=v,o;case U:return Hr(l.children,y,v,s);case P:A=8,y|=24;break;case z:return o=bn(12,l,s,y|2),o.elementType=z,o.lanes=v,o;case X:return o=bn(13,l,s,y),o.elementType=X,o.lanes=v,o;case le:return o=bn(19,l,s,y),o.elementType=le,o.lanes=v,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case $:A=10;break e;case j:A=9;break e;case se:A=11;break e;case x:A=14;break e;case N:A=16,c=null;break e}A=29,l=Error(i(130,o===null?"null":typeof o,"")),c=null}return s=bn(A,l,s,y),s.elementType=o,s.type=c,s.lanes=v,s}function Hr(o,s,l,c){return o=bn(7,o,c,s),o.lanes=l,o}function Nh(o,s,l){return o=bn(6,o,null,s),o.lanes=l,o}function $y(o){var s=bn(18,null,null,0);return s.stateNode=o,s}function Dh(o,s,l){return s=bn(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var Xy=new WeakMap;function Kn(o,s){if(typeof o=="object"&&o!==null){var l=Xy.get(o);return l!==void 0?l:(s={value:o,source:s,stack:ll(s)},Xy.set(o,s),s)}return{value:o,source:s,stack:ll(s)}}var Js=[],Qs=0,Bc=null,Ml=0,Yn=[],Jn=0,ko=null,Fi=1,Bi="";function to(o,s){Js[Qs++]=Ml,Js[Qs++]=Bc,Bc=o,Ml=s}function Wy(o,s,l){Yn[Jn++]=Fi,Yn[Jn++]=Bi,Yn[Jn++]=ko,ko=o;var c=Fi;o=Bi;var y=32-St(c)-1;c&=~(1<<y),l+=1;var v=32-St(s)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Fi=1<<32-St(s)+y|l<<y|c,Bi=v+o}else Fi=1<<v|l<<y|c,Bi=o}function Mh(o){o.return!==null&&(to(o,1),Wy(o,1,0))}function Vh(o){for(;o===Bc;)Bc=Js[--Qs],Js[Qs]=null,Ml=Js[--Qs],Js[Qs]=null;for(;o===ko;)ko=Yn[--Jn],Yn[Jn]=null,Bi=Yn[--Jn],Yn[Jn]=null,Fi=Yn[--Jn],Yn[Jn]=null}function Zy(o,s){Yn[Jn++]=Fi,Yn[Jn++]=Bi,Yn[Jn++]=ko,Fi=s.id,Bi=s.overflow,ko=o}var Wt=null,ft=null,qe=!1,Oo=null,Qn=!1,Ph=Error(i(519));function Fo(o){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vl(Kn(s,o)),Ph}function jy(o){var s=o.stateNode,l=o.type,c=o.memoizedProps;switch(s[bt]=o,s[zt]=c,l){case"dialog":Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":case"embed":Oe("load",s);break;case"video":case"audio":for(l=0;l<tu.length;l++)Oe(tu[l],s);break;case"source":Oe("error",s);break;case"img":case"image":case"link":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"input":Oe("invalid",s),vc(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Oe("invalid",s);break;case"textarea":Oe("invalid",s),No(s,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||g0(s.textContent,l)?(c.popover!=null&&(Oe("beforetoggle",s),Oe("toggle",s)),c.onScroll!=null&&Oe("scroll",s),c.onScrollEnd!=null&&Oe("scrollend",s),c.onClick!=null&&(s.onclick=li),s=!0):s=!1,s||Fo(o,!0)}function e_(o){for(Wt=o.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Wt=Wt.return}}function $s(o){if(o!==Wt)return!1;if(!qe)return e_(o),qe=!0,!1;var s=o.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||Zm(o.type,o.memoizedProps)),l=!l),l&&ft&&Fo(o),e_(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));ft=C0(o)}else if(s===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));ft=C0(o)}else s===27?(s=ft,jo(o.type)?(o=ip,ip=null,ft=o):ft=s):ft=Wt?Xn(o.stateNode.nextSibling):null;return!0}function zr(){ft=Wt=null,qe=!1}function Uh(){var o=Oo;return o!==null&&(An===null?An=o:An.push.apply(An,o),Oo=null),o}function Vl(o){Oo===null?Oo=[o]:Oo.push(o)}var Lh=G(null),Kr=null,no=null;function Bo(o,s,l){he(Lh,s._currentValue),s._currentValue=l}function io(o){o._currentValue=Lh.current,re(Lh)}function kh(o,s,l){for(;o!==null;){var c=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),o===l)break;o=o.return}}function Oh(o,s,l,c){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=y;for(var L=0;L<s.length;L++)if(R.context===s[L]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),kh(v.return,l,o),c||(A=null);break e}v=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,v=A.alternate,v!==null&&(v.lanes|=l),kh(A,l,o),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===o){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Xs(o,s,l,c){o=null;for(var y=s,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var R=y.type;xn(y.pendingProps.value,A.value)||(o!==null?o.push(R):o=[R])}}else if(y===He.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(su):o=[su])}y=y.return}o!==null&&Oh(s,o,l,c),s.flags|=262144}function Gc(o){for(o=o.firstContext;o!==null;){if(!xn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Yr(o){Kr=o,no=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Zt(o){return t_(Kr,o)}function qc(o,s){return Kr===null&&Yr(o),t_(o,s)}function t_(o,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},no===null){if(o===null)throw Error(i(308));no=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else no=no.next=s;return l}var rR=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(l,c){o.push(c)}};this.abort=function(){s.aborted=!0,o.forEach(function(l){return l()})}},sR=n.unstable_scheduleCallback,aR=n.unstable_NormalPriority,Mt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fh(){return{controller:new rR,data:new Map,refCount:0}}function Pl(o){o.refCount--,o.refCount===0&&sR(aR,function(){o.controller.abort()})}var Ul=null,Bh=0,Ws=0,Zs=null;function lR(o,s){if(Ul===null){var l=Ul=[];Bh=0,Ws=Hm(),Zs={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Bh++,s.then(n_,n_),s}function n_(){if(--Bh===0&&Ul!==null){Zs!==null&&(Zs.status="fulfilled");var o=Ul;Ul=null,Ws=0,Zs=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function uR(o,s){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return o.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<l.length;y++)(0,l[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var i_=ee.S;ee.S=function(o,s){Bv=cn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&lR(o,s),i_!==null&&i_(o,s)};var Jr=G(null);function Gh(){var o=Jr.current;return o!==null?o:ct.pooledCache}function Hc(o,s){s===null?he(Jr,Jr.current):he(Jr,s.pool)}function o_(){var o=Gh();return o===null?null:{parent:Mt._currentValue,pool:o}}var js=Error(i(460)),qh=Error(i(474)),zc=Error(i(542)),Kc={then:function(){}};function r_(o){return o=o.status,o==="fulfilled"||o==="rejected"}function s_(o,s,l){switch(l=o[l],l===void 0?o.push(s):l!==s&&(s.then(li,li),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,l_(o),o;default:if(typeof s.status=="string")s.then(li,li);else{if(o=ct,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,l_(o),o}throw $r=s,js}}function Qr(o){try{var s=o._init;return s(o._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?($r=l,js):l}}var $r=null;function a_(){if($r===null)throw Error(i(459));var o=$r;return $r=null,o}function l_(o){if(o===js||o===zc)throw Error(i(483))}var ea=null,Ll=0;function Yc(o){var s=Ll;return Ll+=1,ea===null&&(ea=[]),s_(ea,o,s)}function kl(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Jc(o,s){throw s.$$typeof===E?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function u_(o){function s(q,B){if(o){var Y=q.deletions;Y===null?(q.deletions=[B],q.flags|=16):Y.push(B)}}function l(q,B){if(!o)return null;for(;B!==null;)s(q,B),B=B.sibling;return null}function c(q){for(var B=new Map;q!==null;)q.key!==null?B.set(q.key,q):B.set(q.index,q),q=q.sibling;return B}function y(q,B){return q=eo(q,B),q.index=0,q.sibling=null,q}function v(q,B,Y){return q.index=Y,o?(Y=q.alternate,Y!==null?(Y=Y.index,Y<B?(q.flags|=67108866,B):Y):(q.flags|=67108866,B)):(q.flags|=1048576,B)}function A(q){return o&&q.alternate===null&&(q.flags|=67108866),q}function R(q,B,Y,ie){return B===null||B.tag!==6?(B=Nh(Y,q.mode,ie),B.return=q,B):(B=y(B,Y),B.return=q,B)}function L(q,B,Y,ie){var Ee=Y.type;return Ee===U?te(q,B,Y.props.children,ie,Y.key):B!==null&&(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===N&&Qr(Ee)===B.type)?(B=y(B,Y.props),kl(B,Y),B.return=q,B):(B=Fc(Y.type,Y.key,Y.props,null,q.mode,ie),kl(B,Y),B.return=q,B)}function J(q,B,Y,ie){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=Dh(Y,q.mode,ie),B.return=q,B):(B=y(B,Y.children||[]),B.return=q,B)}function te(q,B,Y,ie,Ee){return B===null||B.tag!==7?(B=Hr(Y,q.mode,ie,Ee),B.return=q,B):(B=y(B,Y),B.return=q,B)}function oe(q,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Nh(""+B,q.mode,Y),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return Y=Fc(B.type,B.key,B.props,null,q.mode,Y),kl(Y,B),Y.return=q,Y;case V:return B=Dh(B,q.mode,Y),B.return=q,B;case N:return B=Qr(B),oe(q,B,Y)}if(Ze(B)||O(B))return B=Hr(B,q.mode,Y,null),B.return=q,B;if(typeof B.then=="function")return oe(q,Yc(B),Y);if(B.$$typeof===$)return oe(q,qc(q,B),Y);Jc(q,B)}return null}function Q(q,B,Y,ie){var Ee=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ee!==null?null:R(q,B,""+Y,ie);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===Ee?L(q,B,Y,ie):null;case V:return Y.key===Ee?J(q,B,Y,ie):null;case N:return Y=Qr(Y),Q(q,B,Y,ie)}if(Ze(Y)||O(Y))return Ee!==null?null:te(q,B,Y,ie,null);if(typeof Y.then=="function")return Q(q,B,Yc(Y),ie);if(Y.$$typeof===$)return Q(q,B,qc(q,Y),ie);Jc(q,Y)}return null}function Z(q,B,Y,ie,Ee){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return q=q.get(Y)||null,R(B,q,""+ie,Ee);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case w:return q=q.get(ie.key===null?Y:ie.key)||null,L(B,q,ie,Ee);case V:return q=q.get(ie.key===null?Y:ie.key)||null,J(B,q,ie,Ee);case N:return ie=Qr(ie),Z(q,B,Y,ie,Ee)}if(Ze(ie)||O(ie))return q=q.get(Y)||null,te(B,q,ie,Ee,null);if(typeof ie.then=="function")return Z(q,B,Y,Yc(ie),Ee);if(ie.$$typeof===$)return Z(q,B,Y,qc(B,ie),Ee);Jc(B,ie)}return null}function ge(q,B,Y,ie){for(var Ee=null,Ye=null,ve=B,Ve=B=0,Be=null;ve!==null&&Ve<Y.length;Ve++){ve.index>Ve?(Be=ve,ve=null):Be=ve.sibling;var Je=Q(q,ve,Y[Ve],ie);if(Je===null){ve===null&&(ve=Be);break}o&&ve&&Je.alternate===null&&s(q,ve),B=v(Je,B,Ve),Ye===null?Ee=Je:Ye.sibling=Je,Ye=Je,ve=Be}if(Ve===Y.length)return l(q,ve),qe&&to(q,Ve),Ee;if(ve===null){for(;Ve<Y.length;Ve++)ve=oe(q,Y[Ve],ie),ve!==null&&(B=v(ve,B,Ve),Ye===null?Ee=ve:Ye.sibling=ve,Ye=ve);return qe&&to(q,Ve),Ee}for(ve=c(ve);Ve<Y.length;Ve++)Be=Z(ve,q,Ve,Y[Ve],ie),Be!==null&&(o&&Be.alternate!==null&&ve.delete(Be.key===null?Ve:Be.key),B=v(Be,B,Ve),Ye===null?Ee=Be:Ye.sibling=Be,Ye=Be);return o&&ve.forEach(function(or){return s(q,or)}),qe&&to(q,Ve),Ee}function Ie(q,B,Y,ie){if(Y==null)throw Error(i(151));for(var Ee=null,Ye=null,ve=B,Ve=B=0,Be=null,Je=Y.next();ve!==null&&!Je.done;Ve++,Je=Y.next()){ve.index>Ve?(Be=ve,ve=null):Be=ve.sibling;var or=Q(q,ve,Je.value,ie);if(or===null){ve===null&&(ve=Be);break}o&&ve&&or.alternate===null&&s(q,ve),B=v(or,B,Ve),Ye===null?Ee=or:Ye.sibling=or,Ye=or,ve=Be}if(Je.done)return l(q,ve),qe&&to(q,Ve),Ee;if(ve===null){for(;!Je.done;Ve++,Je=Y.next())Je=oe(q,Je.value,ie),Je!==null&&(B=v(Je,B,Ve),Ye===null?Ee=Je:Ye.sibling=Je,Ye=Je);return qe&&to(q,Ve),Ee}for(ve=c(ve);!Je.done;Ve++,Je=Y.next())Je=Z(ve,q,Ve,Je.value,ie),Je!==null&&(o&&Je.alternate!==null&&ve.delete(Je.key===null?Ve:Je.key),B=v(Je,B,Ve),Ye===null?Ee=Je:Ye.sibling=Je,Ye=Je);return o&&ve.forEach(function(Tx){return s(q,Tx)}),qe&&to(q,Ve),Ee}function ut(q,B,Y,ie){if(typeof Y=="object"&&Y!==null&&Y.type===U&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var Ee=Y.key;B!==null;){if(B.key===Ee){if(Ee=Y.type,Ee===U){if(B.tag===7){l(q,B.sibling),ie=y(B,Y.props.children),ie.return=q,q=ie;break e}}else if(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===N&&Qr(Ee)===B.type){l(q,B.sibling),ie=y(B,Y.props),kl(ie,Y),ie.return=q,q=ie;break e}l(q,B);break}else s(q,B);B=B.sibling}Y.type===U?(ie=Hr(Y.props.children,q.mode,ie,Y.key),ie.return=q,q=ie):(ie=Fc(Y.type,Y.key,Y.props,null,q.mode,ie),kl(ie,Y),ie.return=q,q=ie)}return A(q);case V:e:{for(Ee=Y.key;B!==null;){if(B.key===Ee)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){l(q,B.sibling),ie=y(B,Y.children||[]),ie.return=q,q=ie;break e}else{l(q,B);break}else s(q,B);B=B.sibling}ie=Dh(Y,q.mode,ie),ie.return=q,q=ie}return A(q);case N:return Y=Qr(Y),ut(q,B,Y,ie)}if(Ze(Y))return ge(q,B,Y,ie);if(O(Y)){if(Ee=O(Y),typeof Ee!="function")throw Error(i(150));return Y=Ee.call(Y),Ie(q,B,Y,ie)}if(typeof Y.then=="function")return ut(q,B,Yc(Y),ie);if(Y.$$typeof===$)return ut(q,B,qc(q,Y),ie);Jc(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(l(q,B.sibling),ie=y(B,Y),ie.return=q,q=ie):(l(q,B),ie=Nh(Y,q.mode,ie),ie.return=q,q=ie),A(q)):l(q,B)}return function(q,B,Y,ie){try{Ll=0;var Ee=ut(q,B,Y,ie);return ea=null,Ee}catch(ve){if(ve===js||ve===zc)throw ve;var Ye=bn(29,ve,null,q.mode);return Ye.lanes=ie,Ye.return=q,Ye}finally{}}}var Xr=u_(!0),c_=u_(!1),Go=!1;function Hh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zh(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function qo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ho(o,s,l){var c=o.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=Oc(o),Jy(o,null,l),s}return kc(o,c,s,l),Oc(o)}function Ol(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=o.pendingLanes,l|=c,s.lanes=l,fl(o,l)}}function Kh(o,s){var l=o.updateQueue,c=o.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,l=l.next}while(l!==null);v===null?y=v=s:v=v.next=s}else y=v=s;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}var Yh=!1;function Fl(){if(Yh){var o=Zs;if(o!==null)throw o}}function Bl(o,s,l,c){Yh=!1;var y=o.updateQueue;Go=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var L=R,J=L.next;L.next=null,A===null?v=J:A.next=J,A=L;var te=o.alternate;te!==null&&(te=te.updateQueue,R=te.lastBaseUpdate,R!==A&&(R===null?te.firstBaseUpdate=J:R.next=J,te.lastBaseUpdate=L))}if(v!==null){var oe=y.baseState;A=0,te=J=L=null,R=v;do{var Q=R.lane&-536870913,Z=Q!==R.lane;if(Z?(Fe&Q)===Q:(c&Q)===Q){Q!==0&&Q===Ws&&(Yh=!0),te!==null&&(te=te.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ge=o,Ie=R;Q=s;var ut=l;switch(Ie.tag){case 1:if(ge=Ie.payload,typeof ge=="function"){oe=ge.call(ut,oe,Q);break e}oe=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ie.payload,Q=typeof ge=="function"?ge.call(ut,oe,Q):ge,Q==null)break e;oe=T({},oe,Q);break e;case 2:Go=!0}}Q=R.callback,Q!==null&&(o.flags|=64,Z&&(o.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:R.tag,payload:R.payload,callback:R.callback,next:null},te===null?(J=te=Z,L=oe):te=te.next=Z,A|=Q;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;Z=R,R=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);te===null&&(L=oe),y.baseState=L,y.firstBaseUpdate=J,y.lastBaseUpdate=te,v===null&&(y.shared.lanes=0),Qo|=A,o.lanes=A,o.memoizedState=oe}}function f_(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function d_(o,s){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)f_(l[o],s)}var ta=G(null),Qc=G(0);function h_(o,s){o=ho,he(Qc,o),he(ta,s),ho=o|s.baseLanes}function Jh(){he(Qc,ho),he(ta,ta.current)}function Qh(){ho=Qc.current,re(ta),re(Qc)}var Nn=G(null),$n=null;function zo(o){var s=o.alternate;he(It,It.current&1),he(Nn,o),$n===null&&(s===null||ta.current!==null||s.memoizedState!==null)&&($n=o)}function $h(o){he(It,It.current),he(Nn,o),$n===null&&($n=o)}function m_(o){o.tag===22?(he(It,It.current),he(Nn,o),$n===null&&($n=o)):Ko()}function Ko(){he(It,It.current),he(Nn,Nn.current)}function Dn(o){re(Nn),$n===o&&($n=null),re(It)}var It=G(0);function $c(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||tp(l)||np(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var oo=0,De=null,at=null,Vt=null,Xc=!1,na=!1,Wr=!1,Wc=0,Gl=0,ia=null,cR=0;function vt(){throw Error(i(321))}function Xh(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!xn(o[l],s[l]))return!1;return!0}function Wh(o,s,l,c,y,v){return oo=v,De=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ee.H=o===null||o.memoizedState===null?W_:dm,Wr=!1,v=l(c,y),Wr=!1,na&&(v=g_(s,l,c,y)),p_(o),v}function p_(o){ee.H=zl;var s=at!==null&&at.next!==null;if(oo=0,Vt=at=De=null,Xc=!1,Gl=0,ia=null,s)throw Error(i(300));o===null||Pt||(o=o.dependencies,o!==null&&Gc(o)&&(Pt=!0))}function g_(o,s,l,c){De=o;var y=0;do{if(na&&(ia=null),Gl=0,na=!1,25<=y)throw Error(i(301));if(y+=1,Vt=at=null,o.updateQueue!=null){var v=o.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}ee.H=Z_,v=s(l,c)}while(na);return v}function fR(){var o=ee.H,s=o.useState()[0];return s=typeof s.then=="function"?ql(s):s,o=o.useState()[0],(at!==null?at.memoizedState:null)!==o&&(De.flags|=1024),s}function Zh(){var o=Wc!==0;return Wc=0,o}function jh(o,s,l){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~l}function em(o){if(Xc){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}Xc=!1}oo=0,Vt=at=De=null,na=!1,Gl=Wc=0,ia=null}function dn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?De.memoizedState=Vt=o:Vt=Vt.next=o,Vt}function Ct(){if(at===null){var o=De.alternate;o=o!==null?o.memoizedState:null}else o=at.next;var s=Vt===null?De.memoizedState:Vt.next;if(s!==null)Vt=s,at=o;else{if(o===null)throw De.alternate===null?Error(i(467)):Error(i(310));at=o,o={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Vt===null?De.memoizedState=Vt=o:Vt=Vt.next=o}return Vt}function Zc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(o){var s=Gl;return Gl+=1,ia===null&&(ia=[]),o=s_(ia,o,s),s=De,(Vt===null?s.memoizedState:Vt.next)===null&&(s=s.alternate,ee.H=s===null||s.memoizedState===null?W_:dm),o}function jc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ql(o);if(o.$$typeof===$)return Zt(o)}throw Error(i(438,String(o)))}function tm(o){var s=null,l=De.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=De.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Zc(),De.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(o),c=0;c<o;c++)l[c]=F;return s.index++,l}function ro(o,s){return typeof s=="function"?s(o):s}function ef(o){var s=Ct();return nm(s,at,o)}function nm(o,s,l){var c=o.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=o.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}s.baseQueue=y=v,c.pending=null}if(v=o.baseState,y===null)o.memoizedState=v;else{s=y.next;var R=A=null,L=null,J=s,te=!1;do{var oe=J.lane&-536870913;if(oe!==J.lane?(Fe&oe)===oe:(oo&oe)===oe){var Q=J.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),oe===Ws&&(te=!0);else if((oo&Q)===Q){J=J.next,Q===Ws&&(te=!0);continue}else oe={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(R=L=oe,A=v):L=L.next=oe,De.lanes|=Q,Qo|=Q;oe=J.action,Wr&&l(v,oe),v=J.hasEagerState?J.eagerState:l(v,oe)}else Q={lane:oe,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(R=L=Q,A=v):L=L.next=Q,De.lanes|=oe,Qo|=oe;J=J.next}while(J!==null&&J!==s);if(L===null?A=v:L.next=R,!xn(v,o.memoizedState)&&(Pt=!0,te&&(l=Zs,l!==null)))throw l;o.memoizedState=v,o.baseState=A,o.baseQueue=L,c.lastRenderedState=v}return y===null&&(c.lanes=0),[o.memoizedState,c.dispatch]}function im(o){var s=Ct(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var c=l.dispatch,y=l.pending,v=s.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do v=o(v,A.action),A=A.next;while(A!==y);xn(v,s.memoizedState)||(Pt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,c]}function y_(o,s,l){var c=De,y=Ct(),v=qe;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=s();var A=!xn((at||y).memoizedState,l);if(A&&(y.memoizedState=l,Pt=!0),y=y.queue,sm(T_.bind(null,c,y,o),[o]),y.getSnapshot!==s||A||Vt!==null&&Vt.memoizedState.tag&1){if(c.flags|=2048,oa(9,{destroy:void 0},v_.bind(null,c,y,l,s),null),ct===null)throw Error(i(349));v||(oo&127)!==0||__(c,s,l)}return l}function __(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=De.updateQueue,s===null?(s=Zc(),De.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function v_(o,s,l,c){s.value=l,s.getSnapshot=c,E_(s)&&S_(o)}function T_(o,s,l){return l(function(){E_(s)&&S_(o)})}function E_(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!xn(o,l)}catch{return!0}}function S_(o){var s=qr(o,2);s!==null&&In(s,o,2)}function om(o){var s=dn();if(typeof o=="function"){var l=o;if(o=l(),Wr){Fn(!0);try{l()}finally{Fn(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:o},s}function A_(o,s,l,c){return o.baseState=l,nm(o,at,typeof c=="function"?c:ro)}function dR(o,s,l,c,y){if(of(o))throw Error(i(485));if(o=s.action,o!==null){var v={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};ee.T!==null?l(!0):v.isTransition=!1,c(v),l=s.pending,l===null?(v.next=s.pending=v,I_(s,v)):(v.next=l.next,s.pending=l.next=v)}}function I_(o,s){var l=s.action,c=s.payload,y=o.state;if(s.isTransition){var v=ee.T,A={};ee.T=A;try{var R=l(y,c),L=ee.S;L!==null&&L(A,R),C_(o,s,R)}catch(J){rm(o,s,J)}finally{v!==null&&A.types!==null&&(v.types=A.types),ee.T=v}}else try{v=l(y,c),C_(o,s,v)}catch(J){rm(o,s,J)}}function C_(o,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){w_(o,s,c)},function(c){return rm(o,s,c)}):w_(o,s,l)}function w_(o,s,l){s.status="fulfilled",s.value=l,R_(s),o.state=l,s=o.pending,s!==null&&(l=s.next,l===s?o.pending=null:(l=l.next,s.next=l,I_(o,l)))}function rm(o,s,l){var c=o.pending;if(o.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,R_(s),s=s.next;while(s!==c)}o.action=null}function R_(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function x_(o,s){return s}function b_(o,s){if(qe){var l=ct.formState;if(l!==null){e:{var c=De;if(qe){if(ft){t:{for(var y=ft,v=Qn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Xn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){ft=Xn(y.nextSibling),c=y.data==="F!";break e}}Fo(c)}c=!1}c&&(s=l[0])}}return l=dn(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x_,lastRenderedState:s},l.queue=c,l=Q_.bind(null,De,c),c.dispatch=l,c=om(!1),v=fm.bind(null,De,!1,c.queue),c=dn(),y={state:s,dispatch:null,action:o,pending:null},c.queue=y,l=dR.bind(null,De,y,v,l),y.dispatch=l,c.memoizedState=o,[s,l,!1]}function N_(o){var s=Ct();return D_(s,at,o)}function D_(o,s,l){if(s=nm(o,s,x_)[0],o=ef(ro)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ql(s)}catch(A){throw A===js?zc:A}else c=s;s=Ct();var y=s.queue,v=y.dispatch;return l!==s.memoizedState&&(De.flags|=2048,oa(9,{destroy:void 0},hR.bind(null,y,l),null)),[c,v,o]}function hR(o,s){o.action=s}function M_(o){var s=Ct(),l=at;if(l!==null)return D_(s,l,o);Ct(),s=s.memoizedState,l=Ct();var c=l.queue.dispatch;return l.memoizedState=o,[s,c,!1]}function oa(o,s,l,c){return o={tag:o,create:l,deps:c,inst:s,next:null},s=De.updateQueue,s===null&&(s=Zc(),De.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=o.next=o:(c=l.next,l.next=o,o.next=c,s.lastEffect=o),o}function V_(){return Ct().memoizedState}function tf(o,s,l,c){var y=dn();De.flags|=o,y.memoizedState=oa(1|s,{destroy:void 0},l,c===void 0?null:c)}function nf(o,s,l,c){var y=Ct();c=c===void 0?null:c;var v=y.memoizedState.inst;at!==null&&c!==null&&Xh(c,at.memoizedState.deps)?y.memoizedState=oa(s,v,l,c):(De.flags|=o,y.memoizedState=oa(1|s,v,l,c))}function P_(o,s){tf(8390656,8,o,s)}function sm(o,s){nf(2048,8,o,s)}function mR(o){De.flags|=4;var s=De.updateQueue;if(s===null)s=Zc(),De.updateQueue=s,s.events=[o];else{var l=s.events;l===null?s.events=[o]:l.push(o)}}function U_(o){var s=Ct().memoizedState;return mR({ref:s,nextImpl:o}),function(){if((Xe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function L_(o,s){return nf(4,2,o,s)}function k_(o,s){return nf(4,4,o,s)}function O_(o,s){if(typeof s=="function"){o=o();var l=s(o);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function F_(o,s,l){l=l!=null?l.concat([o]):null,nf(4,4,O_.bind(null,s,o),l)}function am(){}function B_(o,s){var l=Ct();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Xh(s,c[1])?c[0]:(l.memoizedState=[o,s],o)}function G_(o,s){var l=Ct();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Xh(s,c[1]))return c[0];if(c=o(),Wr){Fn(!0);try{o()}finally{Fn(!1)}}return l.memoizedState=[c,s],c}function lm(o,s,l){return l===void 0||(oo&1073741824)!==0&&(Fe&261930)===0?o.memoizedState=s:(o.memoizedState=l,o=qv(),De.lanes|=o,Qo|=o,l)}function q_(o,s,l,c){return xn(l,s)?l:ta.current!==null?(o=lm(o,l,c),xn(o,s)||(Pt=!0),o):(oo&42)===0||(oo&1073741824)!==0&&(Fe&261930)===0?(Pt=!0,o.memoizedState=l):(o=qv(),De.lanes|=o,Qo|=o,s)}function H_(o,s,l,c,y){var v=fe.p;fe.p=v!==0&&8>v?v:8;var A=ee.T,R={};ee.T=R,fm(o,!1,s,l);try{var L=y(),J=ee.S;if(J!==null&&J(R,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var te=uR(L,c);Hl(o,s,te,Pn(o))}else Hl(o,s,c,Pn(o))}catch(oe){Hl(o,s,{then:function(){},status:"rejected",reason:oe},Pn())}finally{fe.p=v,A!==null&&R.types!==null&&(A.types=R.types),ee.T=A}}function pR(){}function um(o,s,l,c){if(o.tag!==5)throw Error(i(476));var y=z_(o).queue;H_(o,y,s,_e,l===null?pR:function(){return K_(o),l(c)})}function z_(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:_e},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:l},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function K_(o){var s=z_(o);s.next===null&&(s=o.alternate.memoizedState),Hl(o,s.next.queue,{},Pn())}function cm(){return Zt(su)}function Y_(){return Ct().memoizedState}function J_(){return Ct().memoizedState}function gR(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var l=Pn();o=qo(l);var c=Ho(s,o,l);c!==null&&(In(c,s,l),Ol(c,s,l)),s={cache:Fh()},o.payload=s;return}s=s.return}}function yR(o,s,l){var c=Pn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},of(o)?$_(s,l):(l=xh(o,s,l,c),l!==null&&(In(l,o,c),X_(l,s,c)))}function Q_(o,s,l){var c=Pn();Hl(o,s,l,c)}function Hl(o,s,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(of(o))$_(s,y);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var A=s.lastRenderedState,R=v(A,l);if(y.hasEagerState=!0,y.eagerState=R,xn(R,A))return kc(o,s,y,0),ct===null&&Lc(),!1}catch{}finally{}if(l=xh(o,s,y,c),l!==null)return In(l,o,c),X_(l,s,c),!0}return!1}function fm(o,s,l,c){if(c={lane:2,revertLane:Hm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},of(o)){if(s)throw Error(i(479))}else s=xh(o,l,c,2),s!==null&&In(s,o,2)}function of(o){var s=o.alternate;return o===De||s!==null&&s===De}function $_(o,s){na=Xc=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function X_(o,s,l){if((l&4194048)!==0){var c=s.lanes;c&=o.pendingLanes,l|=c,s.lanes=l,fl(o,l)}}var zl={readContext:Zt,use:jc,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};zl.useEffectEvent=vt;var W_={readContext:Zt,use:jc,useCallback:function(o,s){return dn().memoizedState=[o,s===void 0?null:s],o},useContext:Zt,useEffect:P_,useImperativeHandle:function(o,s,l){l=l!=null?l.concat([o]):null,tf(4194308,4,O_.bind(null,s,o),l)},useLayoutEffect:function(o,s){return tf(4194308,4,o,s)},useInsertionEffect:function(o,s){tf(4,2,o,s)},useMemo:function(o,s){var l=dn();s=s===void 0?null:s;var c=o();if(Wr){Fn(!0);try{o()}finally{Fn(!1)}}return l.memoizedState=[c,s],c},useReducer:function(o,s,l){var c=dn();if(l!==void 0){var y=l(s);if(Wr){Fn(!0);try{l(s)}finally{Fn(!1)}}}else y=s;return c.memoizedState=c.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},c.queue=o,o=o.dispatch=yR.bind(null,De,o),[c.memoizedState,o]},useRef:function(o){var s=dn();return o={current:o},s.memoizedState=o},useState:function(o){o=om(o);var s=o.queue,l=Q_.bind(null,De,s);return s.dispatch=l,[o.memoizedState,l]},useDebugValue:am,useDeferredValue:function(o,s){var l=dn();return lm(l,o,s)},useTransition:function(){var o=om(!1);return o=H_.bind(null,De,o.queue,!0,!1),dn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,l){var c=De,y=dn();if(qe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),ct===null)throw Error(i(349));(Fe&127)!==0||__(c,s,l)}y.memoizedState=l;var v={value:l,getSnapshot:s};return y.queue=v,P_(T_.bind(null,c,v,o),[o]),c.flags|=2048,oa(9,{destroy:void 0},v_.bind(null,c,v,l,s),null),l},useId:function(){var o=dn(),s=ct.identifierPrefix;if(qe){var l=Bi,c=Fi;l=(c&~(1<<32-St(c)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Wc++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=cR++,s="_"+s+"r_"+l.toString(32)+"_";return o.memoizedState=s},useHostTransitionStatus:cm,useFormState:b_,useActionState:b_,useOptimistic:function(o){var s=dn();s.memoizedState=s.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=fm.bind(null,De,!0,l),l.dispatch=s,[o,s]},useMemoCache:tm,useCacheRefresh:function(){return dn().memoizedState=gR.bind(null,De)},useEffectEvent:function(o){var s=dn(),l={impl:o};return s.memoizedState=l,function(){if((Xe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},dm={readContext:Zt,use:jc,useCallback:B_,useContext:Zt,useEffect:sm,useImperativeHandle:F_,useInsertionEffect:L_,useLayoutEffect:k_,useMemo:G_,useReducer:ef,useRef:V_,useState:function(){return ef(ro)},useDebugValue:am,useDeferredValue:function(o,s){var l=Ct();return q_(l,at.memoizedState,o,s)},useTransition:function(){var o=ef(ro)[0],s=Ct().memoizedState;return[typeof o=="boolean"?o:ql(o),s]},useSyncExternalStore:y_,useId:Y_,useHostTransitionStatus:cm,useFormState:N_,useActionState:N_,useOptimistic:function(o,s){var l=Ct();return A_(l,at,o,s)},useMemoCache:tm,useCacheRefresh:J_};dm.useEffectEvent=U_;var Z_={readContext:Zt,use:jc,useCallback:B_,useContext:Zt,useEffect:sm,useImperativeHandle:F_,useInsertionEffect:L_,useLayoutEffect:k_,useMemo:G_,useReducer:im,useRef:V_,useState:function(){return im(ro)},useDebugValue:am,useDeferredValue:function(o,s){var l=Ct();return at===null?lm(l,o,s):q_(l,at.memoizedState,o,s)},useTransition:function(){var o=im(ro)[0],s=Ct().memoizedState;return[typeof o=="boolean"?o:ql(o),s]},useSyncExternalStore:y_,useId:Y_,useHostTransitionStatus:cm,useFormState:M_,useActionState:M_,useOptimistic:function(o,s){var l=Ct();return at!==null?A_(l,at,o,s):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:tm,useCacheRefresh:J_};Z_.useEffectEvent=U_;function hm(o,s,l,c){s=o.memoizedState,l=l(c,s),l=l==null?s:T({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var mm={enqueueSetState:function(o,s,l){o=o._reactInternals;var c=Pn(),y=qo(c);y.payload=s,l!=null&&(y.callback=l),s=Ho(o,y,c),s!==null&&(In(s,o,c),Ol(s,o,c))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var c=Pn(),y=qo(c);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=Ho(o,y,c),s!==null&&(In(s,o,c),Ol(s,o,c))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=Pn(),c=qo(l);c.tag=2,s!=null&&(c.callback=s),s=Ho(o,c,l),s!==null&&(In(s,o,l),Ol(s,o,l))}};function j_(o,s,l,c,y,v,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(c,v,A):s.prototype&&s.prototype.isPureReactComponent?!Nl(l,c)||!Nl(y,v):!0}function ev(o,s,l,c){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==o&&mm.enqueueReplaceState(s,s.state,null)}function Zr(o,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(o=o.defaultProps){l===s&&(l=T({},l));for(var y in o)l[y]===void 0&&(l[y]=o[y])}return l}function tv(o){Uc(o)}function nv(o){console.error(o)}function iv(o){Uc(o)}function rf(o,s){try{var l=o.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function ov(o,s,l){try{var c=o.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function pm(o,s,l){return l=qo(l),l.tag=3,l.payload={element:null},l.callback=function(){rf(o,s)},l}function rv(o){return o=qo(o),o.tag=3,o}function sv(o,s,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;o.payload=function(){return y(v)},o.callback=function(){ov(s,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(o.callback=function(){ov(s,l,c),typeof y!="function"&&($o===null?$o=new Set([this]):$o.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function _R(o,s,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&Xs(s,l,y,!0),l=Nn.current,l!==null){switch(l.tag){case 31:case 13:return $n===null?yf():l.alternate===null&&Tt===0&&(Tt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Kc?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),Bm(o,c,y)),!1;case 22:return l.flags|=65536,c===Kc?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),Bm(o,c,y)),!1}throw Error(i(435,l.tag))}return Bm(o,c,y),yf(),!1}if(qe)return s=Nn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==Ph&&(o=Error(i(422),{cause:c}),Vl(Kn(o,l)))):(c!==Ph&&(s=Error(i(423),{cause:c}),Vl(Kn(s,l))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,c=Kn(c,l),y=pm(o.stateNode,c,y),Kh(o,y),Tt!==4&&(Tt=2)),!1;var v=Error(i(520),{cause:c});if(v=Kn(v,l),Zl===null?Zl=[v]:Zl.push(v),Tt!==4&&(Tt=2),s===null)return!0;c=Kn(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,o=y&-y,l.lanes|=o,o=pm(l.stateNode,c,o),Kh(l,o),!1;case 1:if(s=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&($o===null||!$o.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=rv(y),sv(y,o,l,c),Kh(l,y),!1}l=l.return}while(l!==null);return!1}var gm=Error(i(461)),Pt=!1;function jt(o,s,l,c){s.child=o===null?c_(s,null,l,c):Xr(s,o.child,l,c)}function av(o,s,l,c,y){l=l.render;var v=s.ref;if("ref"in c){var A={};for(var R in c)R!=="ref"&&(A[R]=c[R])}else A=c;return Yr(s),c=Wh(o,s,l,A,v,y),R=Zh(),o!==null&&!Pt?(jh(o,s,y),so(o,s,y)):(qe&&R&&Mh(s),s.flags|=1,jt(o,s,c,y),s.child)}function lv(o,s,l,c,y){if(o===null){var v=l.type;return typeof v=="function"&&!bh(v)&&v.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=v,uv(o,s,v,c,y)):(o=Fc(l.type,null,c,s,s.mode,y),o.ref=s.ref,o.return=s,s.child=o)}if(v=o.child,!Im(o,y)){var A=v.memoizedProps;if(l=l.compare,l=l!==null?l:Nl,l(A,c)&&o.ref===s.ref)return so(o,s,y)}return s.flags|=1,o=eo(v,c),o.ref=s.ref,o.return=s,s.child=o}function uv(o,s,l,c,y){if(o!==null){var v=o.memoizedProps;if(Nl(v,c)&&o.ref===s.ref)if(Pt=!1,s.pendingProps=c=v,Im(o,y))(o.flags&131072)!==0&&(Pt=!0);else return s.lanes=o.lanes,so(o,s,y)}return ym(o,s,l,c,y)}function cv(o,s,l,c){var y=c.children,v=o!==null?o.memoizedState:null;if(o===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,o!==null){for(c=s.child=o.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,s.child=null;return fv(o,s,v,l,c)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&Hc(s,v!==null?v.cachePool:null),v!==null?h_(s,v):Jh(),m_(s);else return c=s.lanes=536870912,fv(o,s,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Hc(s,v.cachePool),h_(s,v),Ko(),s.memoizedState=null):(o!==null&&Hc(s,null),Jh(),Ko());return jt(o,s,y,l),s.child}function Kl(o,s){return o!==null&&o.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function fv(o,s,l,c,y){var v=Gh();return v=v===null?null:{parent:Mt._currentValue,pool:v},s.memoizedState={baseLanes:l,cachePool:v},o!==null&&Hc(s,null),Jh(),m_(s),o!==null&&Xs(o,s,c,!0),s.childLanes=y,null}function sf(o,s){return s=lf({mode:s.mode,children:s.children},o.mode),s.ref=o.ref,o.child=s,s.return=o,s}function dv(o,s,l){return Xr(s,o.child,null,l),o=sf(s,s.pendingProps),o.flags|=2,Dn(s),s.memoizedState=null,o}function vR(o,s,l){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,o===null){if(qe){if(c.mode==="hidden")return o=sf(s,c),s.lanes=536870912,Kl(null,o);if($h(s),(o=ft)?(o=I0(o,Qn),o=o!==null&&o.data==="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:ko!==null?{id:Fi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},l=$y(o),l.return=s,s.child=l,Wt=s,ft=null)):o=null,o===null)throw Fo(s);return s.lanes=536870912,null}return sf(s,c)}var v=o.memoizedState;if(v!==null){var A=v.dehydrated;if($h(s),y)if(s.flags&256)s.flags&=-257,s=dv(o,s,l);else if(s.memoizedState!==null)s.child=o.child,s.flags|=128,s=null;else throw Error(i(558));else if(Pt||Xs(o,s,l,!1),y=(l&o.childLanes)!==0,Pt||y){if(c=ct,c!==null&&(A=dl(c,l),A!==0&&A!==v.retryLane))throw v.retryLane=A,qr(o,A),In(c,o,A),gm;yf(),s=dv(o,s,l)}else o=v.treeContext,ft=Xn(A.nextSibling),Wt=s,qe=!0,Oo=null,Qn=!1,o!==null&&Zy(s,o),s=sf(s,c),s.flags|=4096;return s}return o=eo(o.child,{mode:c.mode,children:c.children}),o.ref=s.ref,s.child=o,o.return=s,o}function af(o,s){var l=s.ref;if(l===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(o===null||o.ref!==l)&&(s.flags|=4194816)}}function ym(o,s,l,c,y){return Yr(s),l=Wh(o,s,l,c,void 0,y),c=Zh(),o!==null&&!Pt?(jh(o,s,y),so(o,s,y)):(qe&&c&&Mh(s),s.flags|=1,jt(o,s,l,y),s.child)}function hv(o,s,l,c,y,v){return Yr(s),s.updateQueue=null,l=g_(s,c,l,y),p_(o),c=Zh(),o!==null&&!Pt?(jh(o,s,v),so(o,s,v)):(qe&&c&&Mh(s),s.flags|=1,jt(o,s,l,v),s.child)}function mv(o,s,l,c,y){if(Yr(s),s.stateNode===null){var v=Ys,A=l.contextType;typeof A=="object"&&A!==null&&(v=Zt(A)),v=new l(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=mm,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},Hh(s),A=l.contextType,v.context=typeof A=="object"&&A!==null?Zt(A):Ys,v.state=s.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(hm(s,l,A,c),v.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&mm.enqueueReplaceState(v,v.state,null),Bl(s,c,v,y),Fl(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(o===null){v=s.stateNode;var R=s.memoizedProps,L=Zr(l,R);v.props=L;var J=v.context,te=l.contextType;A=Ys,typeof te=="object"&&te!==null&&(A=Zt(te));var oe=l.getDerivedStateFromProps;te=typeof oe=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||J!==A)&&ev(s,v,c,A),Go=!1;var Q=s.memoizedState;v.state=Q,Bl(s,c,v,y),Fl(),J=s.memoizedState,R||Q!==J||Go?(typeof oe=="function"&&(hm(s,l,oe,c),J=s.memoizedState),(L=Go||j_(s,l,L,c,Q,J,A))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=J),v.props=c,v.state=J,v.context=A,c=L):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,zh(o,s),A=s.memoizedProps,te=Zr(l,A),v.props=te,oe=s.pendingProps,Q=v.context,J=l.contextType,L=Ys,typeof J=="object"&&J!==null&&(L=Zt(J)),R=l.getDerivedStateFromProps,(J=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==oe||Q!==L)&&ev(s,v,c,L),Go=!1,Q=s.memoizedState,v.state=Q,Bl(s,c,v,y),Fl();var Z=s.memoizedState;A!==oe||Q!==Z||Go||o!==null&&o.dependencies!==null&&Gc(o.dependencies)?(typeof R=="function"&&(hm(s,l,R,c),Z=s.memoizedState),(te=Go||j_(s,l,te,c,Q,Z,L)||o!==null&&o.dependencies!==null&&Gc(o.dependencies))?(J||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Z,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Z,L)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Z),v.props=c,v.state=Z,v.context=L,c=te):(typeof v.componentDidUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(s.flags|=1024),c=!1)}return v=c,af(o,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,o!==null&&c?(s.child=Xr(s,o.child,null,y),s.child=Xr(s,null,l,y)):jt(o,s,l,y),s.memoizedState=v.state,o=s.child):o=so(o,s,y),o}function pv(o,s,l,c){return zr(),s.flags|=256,jt(o,s,l,c),s.child}var _m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vm(o){return{baseLanes:o,cachePool:o_()}}function Tm(o,s,l){return o=o!==null?o.childLanes&~l:0,s&&(o|=Vn),o}function gv(o,s,l){var c=s.pendingProps,y=!1,v=(s.flags&128)!==0,A;if((A=v)||(A=o!==null&&o.memoizedState===null?!1:(It.current&2)!==0),A&&(y=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,o===null){if(qe){if(y?zo(s):Ko(),(o=ft)?(o=I0(o,Qn),o=o!==null&&o.data!=="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:ko!==null?{id:Fi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},l=$y(o),l.return=s,s.child=l,Wt=s,ft=null)):o=null,o===null)throw Fo(s);return np(o)?s.lanes=32:s.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(Ko(),y=s.mode,R=lf({mode:"hidden",children:R},y),c=Hr(c,y,l,null),R.return=s,c.return=s,R.sibling=c,s.child=R,c=s.child,c.memoizedState=vm(l),c.childLanes=Tm(o,A,l),s.memoizedState=_m,Kl(null,c)):(zo(s),Em(s,R))}var L=o.memoizedState;if(L!==null&&(R=L.dehydrated,R!==null)){if(v)s.flags&256?(zo(s),s.flags&=-257,s=Sm(o,s,l)):s.memoizedState!==null?(Ko(),s.child=o.child,s.flags|=128,s=null):(Ko(),R=c.fallback,y=s.mode,c=lf({mode:"visible",children:c.children},y),R=Hr(R,y,l,null),R.flags|=2,c.return=s,R.return=s,c.sibling=R,s.child=c,Xr(s,o.child,null,l),c=s.child,c.memoizedState=vm(l),c.childLanes=Tm(o,A,l),s.memoizedState=_m,s=Kl(null,c));else if(zo(s),np(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var J=A.dgst;A=J,c=Error(i(419)),c.stack="",c.digest=A,Vl({value:c,source:null,stack:null}),s=Sm(o,s,l)}else if(Pt||Xs(o,s,l,!1),A=(l&o.childLanes)!==0,Pt||A){if(A=ct,A!==null&&(c=dl(A,l),c!==0&&c!==L.retryLane))throw L.retryLane=c,qr(o,c),In(A,o,c),gm;tp(R)||yf(),s=Sm(o,s,l)}else tp(R)?(s.flags|=192,s.child=o.child,s=null):(o=L.treeContext,ft=Xn(R.nextSibling),Wt=s,qe=!0,Oo=null,Qn=!1,o!==null&&Zy(s,o),s=Em(s,c.children),s.flags|=4096);return s}return y?(Ko(),R=c.fallback,y=s.mode,L=o.child,J=L.sibling,c=eo(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,J!==null?R=eo(J,R):(R=Hr(R,y,l,null),R.flags|=2),R.return=s,c.return=s,c.sibling=R,s.child=c,Kl(null,c),c=s.child,R=o.child.memoizedState,R===null?R=vm(l):(y=R.cachePool,y!==null?(L=Mt._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=o_(),R={baseLanes:R.baseLanes|l,cachePool:y}),c.memoizedState=R,c.childLanes=Tm(o,A,l),s.memoizedState=_m,Kl(o.child,c)):(zo(s),l=o.child,o=l.sibling,l=eo(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,o!==null&&(A=s.deletions,A===null?(s.deletions=[o],s.flags|=16):A.push(o)),s.child=l,s.memoizedState=null,l)}function Em(o,s){return s=lf({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function lf(o,s){return o=bn(22,o,null,s),o.lanes=0,o}function Sm(o,s,l){return Xr(s,o.child,null,l),o=Em(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function yv(o,s,l){o.lanes|=s;var c=o.alternate;c!==null&&(c.lanes|=s),kh(o.return,s,l)}function Am(o,s,l,c,y,v){var A=o.memoizedState;A===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=v)}function _v(o,s,l){var c=s.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=It.current,R=(A&2)!==0;if(R?(A=A&1|2,s.flags|=128):A&=1,he(It,A),jt(o,s,c,l),c=qe?Ml:0,!R&&o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&yv(o,l,s);else if(o.tag===19)yv(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(y){case"forwards":for(l=s.child,y=null;l!==null;)o=l.alternate,o!==null&&$c(o)===null&&(y=l),l=l.sibling;l=y,l===null?(y=s.child,s.child=null):(y=l.sibling,l.sibling=null),Am(s,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=s.child,s.child=null;y!==null;){if(o=y.alternate,o!==null&&$c(o)===null){s.child=y;break}o=y.sibling,y.sibling=l,l=y,y=o}Am(s,!0,l,null,v,c);break;case"together":Am(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function so(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),Qo|=s.lanes,(l&s.childLanes)===0)if(o!==null){if(Xs(o,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,l=eo(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=eo(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function Im(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&Gc(o)))}function TR(o,s,l){switch(s.tag){case 3:Bt(s,s.stateNode.containerInfo),Bo(s,Mt,o.memoizedState.cache),zr();break;case 27:case 5:Ir(s);break;case 4:Bt(s,s.stateNode.containerInfo);break;case 10:Bo(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,$h(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(zo(s),s.flags|=128,null):(l&s.child.childLanes)!==0?gv(o,s,l):(zo(s),o=so(o,s,l),o!==null?o.sibling:null);zo(s);break;case 19:var y=(o.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(Xs(o,s,l,!1),c=(l&s.childLanes)!==0),y){if(c)return _v(o,s,l);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),he(It,It.current),c)break;return null;case 22:return s.lanes=0,cv(o,s,l,s.pendingProps);case 24:Bo(s,Mt,o.memoizedState.cache)}return so(o,s,l)}function vv(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps)Pt=!0;else{if(!Im(o,l)&&(s.flags&128)===0)return Pt=!1,TR(o,s,l);Pt=(o.flags&131072)!==0}else Pt=!1,qe&&(s.flags&1048576)!==0&&Wy(s,Ml,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(o=Qr(s.elementType),s.type=o,typeof o=="function")bh(o)?(c=Zr(o,c),s.tag=1,s=mv(null,s,o,c,l)):(s.tag=0,s=ym(null,s,o,c,l));else{if(o!=null){var y=o.$$typeof;if(y===se){s.tag=11,s=av(null,s,o,c,l);break e}else if(y===x){s.tag=14,s=lv(null,s,o,c,l);break e}}throw s=Ae(o)||o,Error(i(306,s,""))}}return s;case 0:return ym(o,s,s.type,s.pendingProps,l);case 1:return c=s.type,y=Zr(c,s.pendingProps),mv(o,s,c,y,l);case 3:e:{if(Bt(s,s.stateNode.containerInfo),o===null)throw Error(i(387));c=s.pendingProps;var v=s.memoizedState;y=v.element,zh(o,s),Bl(s,c,null,l);var A=s.memoizedState;if(c=A.cache,Bo(s,Mt,c),c!==v.cache&&Oh(s,[Mt],l,!0),Fl(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=pv(o,s,c,l);break e}else if(c!==y){y=Kn(Error(i(424)),s),Vl(y),s=pv(o,s,c,l);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(ft=Xn(o.firstChild),Wt=s,qe=!0,Oo=null,Qn=!0,l=c_(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(zr(),c===y){s=so(o,s,l);break e}jt(o,s,c,l)}s=s.child}return s;case 26:return af(o,s),o===null?(l=N0(s.type,null,s.pendingProps,null))?s.memoizedState=l:qe||(l=s.type,o=s.pendingProps,c=If(Me.current).createElement(l),c[bt]=s,c[zt]=o,en(c,l,o),Nt(c),s.stateNode=c):s.memoizedState=N0(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return Ir(s),o===null&&qe&&(c=s.stateNode=R0(s.type,s.pendingProps,Me.current),Wt=s,Qn=!0,y=ft,jo(s.type)?(ip=y,ft=Xn(c.firstChild)):ft=y),jt(o,s,s.pendingProps.children,l),af(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&qe&&((y=c=ft)&&(c=XR(c,s.type,s.pendingProps,Qn),c!==null?(s.stateNode=c,Wt=s,ft=Xn(c.firstChild),Qn=!1,y=!0):y=!1),y||Fo(s)),Ir(s),y=s.type,v=s.pendingProps,A=o!==null?o.memoizedProps:null,c=v.children,Zm(y,v)?c=null:A!==null&&Zm(y,A)&&(s.flags|=32),s.memoizedState!==null&&(y=Wh(o,s,fR,null,null,l),su._currentValue=y),af(o,s),jt(o,s,c,l),s.child;case 6:return o===null&&qe&&((o=l=ft)&&(l=WR(l,s.pendingProps,Qn),l!==null?(s.stateNode=l,Wt=s,ft=null,o=!0):o=!1),o||Fo(s)),null;case 13:return gv(o,s,l);case 4:return Bt(s,s.stateNode.containerInfo),c=s.pendingProps,o===null?s.child=Xr(s,null,c,l):jt(o,s,c,l),s.child;case 11:return av(o,s,s.type,s.pendingProps,l);case 7:return jt(o,s,s.pendingProps,l),s.child;case 8:return jt(o,s,s.pendingProps.children,l),s.child;case 12:return jt(o,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,Bo(s,s.type,c.value),jt(o,s,c.children,l),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,Yr(s),y=Zt(y),c=c(y),s.flags|=1,jt(o,s,c,l),s.child;case 14:return lv(o,s,s.type,s.pendingProps,l);case 15:return uv(o,s,s.type,s.pendingProps,l);case 19:return _v(o,s,l);case 31:return vR(o,s,l);case 22:return cv(o,s,l,s.pendingProps);case 24:return Yr(s),c=Zt(Mt),o===null?(y=Gh(),y===null&&(y=ct,v=Fh(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),s.memoizedState={parent:c,cache:y},Hh(s),Bo(s,Mt,y)):((o.lanes&l)!==0&&(zh(o,s),Bl(s,null,null,l),Fl()),y=o.memoizedState,v=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Bo(s,Mt,c)):(c=v.cache,Bo(s,Mt,c),c!==y.cache&&Oh(s,[Mt],l,!0))),jt(o,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ao(o){o.flags|=4}function Cm(o,s,l,c,y){if((s=(o.mode&32)!==0)&&(s=!1),s){if(o.flags|=16777216,(y&335544128)===y)if(o.stateNode.complete)o.flags|=8192;else if(Yv())o.flags|=8192;else throw $r=Kc,qh}else o.flags&=-16777217}function Tv(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!U0(s))if(Yv())o.flags|=8192;else throw $r=Kc,qh}function uf(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?mc():536870912,o.lanes|=s,la|=s)}function Yl(o,s){if(!qe)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:c.sibling=null}}function dt(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,c=0;if(s)for(var y=o.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=c,o.childLanes=l,s}function ER(o,s,l){var c=s.pendingProps;switch(Vh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(s),null;case 1:return dt(s),null;case 3:return l=s.stateNode,c=null,o!==null&&(c=o.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),io(Mt),ht(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&($s(s)?ao(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Uh())),dt(s),null;case 26:var y=s.type,v=s.memoizedState;return o===null?(ao(s),v!==null?(dt(s),Tv(s,v)):(dt(s),Cm(s,y,null,c,l))):v?v!==o.memoizedState?(ao(s),dt(s),Tv(s,v)):(dt(s),s.flags&=-16777217):(o=o.memoizedProps,o!==c&&ao(s),dt(s),Cm(s,y,o,c,l)),null;case 27:if(Rs(s),l=Me.current,y=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==c&&ao(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return dt(s),null}o=pe.current,$s(s)?jy(s):(o=R0(y,c,l),s.stateNode=o,ao(s))}return dt(s),null;case 5:if(Rs(s),y=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==c&&ao(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return dt(s),null}if(v=pe.current,$s(s))jy(s);else{var A=If(Me.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[bt]=s,v[zt]=c;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=v;e:switch(en(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ao(s)}}return dt(s),Cm(s,s.type,o===null?null:o.memoizedProps,s.pendingProps,l),null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==c&&ao(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(o=Me.current,$s(s)){if(o=s.stateNode,l=s.memoizedProps,c=null,y=Wt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}o[bt]=s,o=!!(o.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||g0(o.nodeValue,l)),o||Fo(s,!0)}else o=If(o).createTextNode(c),o[bt]=s,s.stateNode=o}return dt(s),null;case 31:if(l=s.memoizedState,o===null||o.memoizedState!==null){if(c=$s(s),l!==null){if(o===null){if(!c)throw Error(i(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[bt]=s}else zr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),o=!1}else l=Uh(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=l),o=!0;if(!o)return s.flags&256?(Dn(s),s):(Dn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return dt(s),null;case 13:if(c=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=$s(s),c!==null&&c.dehydrated!==null){if(o===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[bt]=s}else zr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),y=!1}else y=Uh(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Dn(s),s):(Dn(s),null)}return Dn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=c!==null,o=o!==null&&o.memoizedState!==null,l&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==o&&l&&(s.child.flags|=8192),uf(s,s.updateQueue),dt(s),null);case 4:return ht(),o===null&&Jm(s.stateNode.containerInfo),dt(s),null;case 10:return io(s.type),dt(s),null;case 19:if(re(It),c=s.memoizedState,c===null)return dt(s),null;if(y=(s.flags&128)!==0,v=c.rendering,v===null)if(y)Yl(c,!1);else{if(Tt!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(v=$c(o),v!==null){for(s.flags|=128,Yl(c,!1),o=v.updateQueue,s.updateQueue=o,uf(s,o),s.subtreeFlags=0,o=l,l=s.child;l!==null;)Qy(l,o),l=l.sibling;return he(It,It.current&1|2),qe&&to(s,c.treeForkCount),s.child}o=o.sibling}c.tail!==null&&cn()>mf&&(s.flags|=128,y=!0,Yl(c,!1),s.lanes=4194304)}else{if(!y)if(o=$c(v),o!==null){if(s.flags|=128,y=!0,o=o.updateQueue,s.updateQueue=o,uf(s,o),Yl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!qe)return dt(s),null}else 2*cn()-c.renderingStartTime>mf&&l!==536870912&&(s.flags|=128,y=!0,Yl(c,!1),s.lanes=4194304);c.isBackwards?(v.sibling=s.child,s.child=v):(o=c.last,o!==null?o.sibling=v:s.child=v,c.last=v)}return c.tail!==null?(o=c.tail,c.rendering=o,c.tail=o.sibling,c.renderingStartTime=cn(),o.sibling=null,l=It.current,he(It,y?l&1|2:l&1),qe&&to(s,c.treeForkCount),o):(dt(s),null);case 22:case 23:return Dn(s),Qh(),c=s.memoizedState!==null,o!==null?o.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(dt(s),s.subtreeFlags&6&&(s.flags|=8192)):dt(s),l=s.updateQueue,l!==null&&uf(s,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),o!==null&&re(Jr),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),io(Mt),dt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function SR(o,s){switch(Vh(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return io(Mt),ht(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return Rs(s),null;case 31:if(s.memoizedState!==null){if(Dn(s),s.alternate===null)throw Error(i(340));zr()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 13:if(Dn(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));zr()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return re(It),null;case 4:return ht(),null;case 10:return io(s.type),null;case 22:case 23:return Dn(s),Qh(),o!==null&&re(Jr),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return io(Mt),null;case 25:return null;default:return null}}function Ev(o,s){switch(Vh(s),s.tag){case 3:io(Mt),ht();break;case 26:case 27:case 5:Rs(s);break;case 4:ht();break;case 31:s.memoizedState!==null&&Dn(s);break;case 13:Dn(s);break;case 19:re(It);break;case 10:io(s.type);break;case 22:case 23:Dn(s),Qh(),o!==null&&re(Jr);break;case 24:io(Mt)}}function Jl(o,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&o)===o){c=void 0;var v=l.create,A=l.inst;c=v(),A.destroy=c}l=l.next}while(l!==y)}}catch(R){nt(s,s.return,R)}}function Yo(o,s,l){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&o)===o){var A=c.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=s;var L=l,J=R;try{J()}catch(te){nt(y,L,te)}}}c=c.next}while(c!==v)}}catch(te){nt(s,s.return,te)}}function Sv(o){var s=o.updateQueue;if(s!==null){var l=o.stateNode;try{d_(s,l)}catch(c){nt(o,o.return,c)}}}function Av(o,s,l){l.props=Zr(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(c){nt(o,s,c)}}function Ql(o,s){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var c=o.stateNode;break;case 30:c=o.stateNode;break;default:c=o.stateNode}typeof l=="function"?o.refCleanup=l(c):l.current=c}}catch(y){nt(o,s,y)}}function Gi(o,s){var l=o.ref,c=o.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){nt(o,s,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){nt(o,s,y)}else l.current=null}function Iv(o){var s=o.type,l=o.memoizedProps,c=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){nt(o,o.return,y)}}function wm(o,s,l){try{var c=o.stateNode;zR(c,o.type,l,s),c[zt]=s}catch(y){nt(o,o.return,y)}}function Cv(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&jo(o.type)||o.tag===4}function Rm(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Cv(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&jo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function xm(o,s,l){var c=o.tag;if(c===5||c===6)o=o.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(o),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=li));else if(c!==4&&(c===27&&jo(o.type)&&(l=o.stateNode,s=null),o=o.child,o!==null))for(xm(o,s,l),o=o.sibling;o!==null;)xm(o,s,l),o=o.sibling}function cf(o,s,l){var c=o.tag;if(c===5||c===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(c!==4&&(c===27&&jo(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(cf(o,s,l),o=o.sibling;o!==null;)cf(o,s,l),o=o.sibling}function wv(o){var s=o.stateNode,l=o.memoizedProps;try{for(var c=o.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);en(s,c,l),s[bt]=o,s[zt]=l}catch(v){nt(o,o.return,v)}}var lo=!1,Ut=!1,bm=!1,Rv=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function AR(o,s){if(o=o.containerInfo,Xm=Df,o=Fy(o),Sh(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var A=0,R=-1,L=-1,J=0,te=0,oe=o,Q=null;t:for(;;){for(var Z;oe!==l||y!==0&&oe.nodeType!==3||(R=A+y),oe!==v||c!==0&&oe.nodeType!==3||(L=A+c),oe.nodeType===3&&(A+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)Q=oe,oe=Z;for(;;){if(oe===o)break t;if(Q===l&&++J===y&&(R=A),Q===v&&++te===c&&(L=A),(Z=oe.nextSibling)!==null)break;oe=Q,Q=oe.parentNode}oe=Z}l=R===-1||L===-1?null:{start:R,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(Wm={focusedElem:o,selectionRange:l},Df=!1,Yt=s;Yt!==null;)if(s=Yt,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,Yt=o;else for(;Yt!==null;){switch(s=Yt,v=s.alternate,o=s.flags,s.tag){case 0:if((o&4)!==0&&(o=s.updateQueue,o=o!==null?o.events:null,o!==null))for(l=0;l<o.length;l++)y=o[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&v!==null){o=void 0,l=s,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var ge=Zr(l.type,y);o=c.getSnapshotBeforeUpdate(ge,v),c.__reactInternalSnapshotBeforeUpdate=o}catch(Ie){nt(l,l.return,Ie)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,l=o.nodeType,l===9)ep(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":ep(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,Yt=o;break}Yt=s.return}}function xv(o,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:co(o,l),c&4&&Jl(5,l);break;case 1:if(co(o,l),c&4)if(o=l.stateNode,s===null)try{o.componentDidMount()}catch(A){nt(l,l.return,A)}else{var y=Zr(l.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(y,s,o.__reactInternalSnapshotBeforeUpdate)}catch(A){nt(l,l.return,A)}}c&64&&Sv(l),c&512&&Ql(l,l.return);break;case 3:if(co(o,l),c&64&&(o=l.updateQueue,o!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{d_(o,s)}catch(A){nt(l,l.return,A)}}break;case 27:s===null&&c&4&&wv(l);case 26:case 5:co(o,l),s===null&&c&4&&Iv(l),c&512&&Ql(l,l.return);break;case 12:co(o,l);break;case 31:co(o,l),c&4&&Dv(o,l);break;case 13:co(o,l),c&4&&Mv(o,l),c&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=MR.bind(null,l),ZR(o,l))));break;case 22:if(c=l.memoizedState!==null||lo,!c){s=s!==null&&s.memoizedState!==null||Ut,y=lo;var v=Ut;lo=c,(Ut=s)&&!v?fo(o,l,(l.subtreeFlags&8772)!==0):co(o,l),lo=y,Ut=v}break;case 30:break;default:co(o,l)}}function bv(o){var s=o.alternate;s!==null&&(o.alternate=null,bv(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&Ms(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var pt=null,Tn=!1;function uo(o,s,l){for(l=l.child;l!==null;)Nv(o,s,l),l=l.sibling}function Nv(o,s,l){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(oi,l)}catch{}switch(l.tag){case 26:Ut||Gi(l,s),uo(o,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ut||Gi(l,s);var c=pt,y=Tn;jo(l.type)&&(pt=l.stateNode,Tn=!1),uo(o,s,l),iu(l.stateNode),pt=c,Tn=y;break;case 5:Ut||Gi(l,s);case 6:if(c=pt,y=Tn,pt=null,uo(o,s,l),pt=c,Tn=y,pt!==null)if(Tn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(v){nt(l,s,v)}else try{pt.removeChild(l.stateNode)}catch(v){nt(l,s,v)}break;case 18:pt!==null&&(Tn?(o=pt,S0(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),ga(o)):S0(pt,l.stateNode));break;case 4:c=pt,y=Tn,pt=l.stateNode.containerInfo,Tn=!0,uo(o,s,l),pt=c,Tn=y;break;case 0:case 11:case 14:case 15:Yo(2,l,s),Ut||Yo(4,l,s),uo(o,s,l);break;case 1:Ut||(Gi(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Av(l,s,c)),uo(o,s,l);break;case 21:uo(o,s,l);break;case 22:Ut=(c=Ut)||l.memoizedState!==null,uo(o,s,l),Ut=c;break;default:uo(o,s,l)}}function Dv(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{ga(o)}catch(l){nt(s,s.return,l)}}}function Mv(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ga(o)}catch(l){nt(s,s.return,l)}}function IR(o){switch(o.tag){case 31:case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new Rv),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new Rv),s;default:throw Error(i(435,o.tag))}}function ff(o,s){var l=IR(o);s.forEach(function(c){if(!l.has(c)){l.add(c);var y=VR.bind(null,o,c);c.then(y,y)}})}function En(o,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=o,A=s,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(jo(R.type)){pt=R.stateNode,Tn=!1;break e}break;case 5:pt=R.stateNode,Tn=!1;break e;case 3:case 4:pt=R.stateNode.containerInfo,Tn=!0;break e}R=R.return}if(pt===null)throw Error(i(160));Nv(v,A,y),pt=null,Tn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Vv(s,o),s=s.sibling}var mi=null;function Vv(o,s){var l=o.alternate,c=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:En(s,o),Sn(o),c&4&&(Yo(3,o,o.return),Jl(3,o),Yo(5,o,o.return));break;case 1:En(s,o),Sn(o),c&512&&(Ut||l===null||Gi(l,l.return)),c&64&&lo&&(o=o.updateQueue,o!==null&&(c=o.callbacks,c!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=mi;if(En(s,o),Sn(o),c&512&&(Ut||l===null||Gi(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=o.memoizedState,l===null)if(c===null)if(o.stateNode===null){e:{c=o.type,l=o.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Ri]||v[bt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),en(v,c,l),v[bt]=o,Nt(v),c=v;break e;case"link":var A=V0("link","href",y).get(c+(l.href||""));if(A){for(var R=0;R<A.length;R++)if(v=A[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(R,1);break t}}v=y.createElement(c),en(v,c,l),y.head.appendChild(v);break;case"meta":if(A=V0("meta","content",y).get(c+(l.content||""))){for(R=0;R<A.length;R++)if(v=A[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(R,1);break t}}v=y.createElement(c),en(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[bt]=o,Nt(v),c=v}o.stateNode=c}else P0(y,o.type,o.stateNode);else o.stateNode=M0(y,c,o.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?P0(y,o.type,o.stateNode):M0(y,c,o.memoizedProps)):c===null&&o.stateNode!==null&&wm(o,o.memoizedProps,l.memoizedProps)}break;case 27:En(s,o),Sn(o),c&512&&(Ut||l===null||Gi(l,l.return)),l!==null&&c&4&&wm(o,o.memoizedProps,l.memoizedProps);break;case 5:if(En(s,o),Sn(o),c&512&&(Ut||l===null||Gi(l,l.return)),o.flags&32){y=o.stateNode;try{vn(y,"")}catch(ge){nt(o,o.return,ge)}}c&4&&o.stateNode!=null&&(y=o.memoizedProps,wm(o,y,l!==null?l.memoizedProps:y)),c&1024&&(bm=!0);break;case 6:if(En(s,o),Sn(o),c&4){if(o.stateNode===null)throw Error(i(162));c=o.memoizedProps,l=o.stateNode;try{l.nodeValue=c}catch(ge){nt(o,o.return,ge)}}break;case 3:if(Rf=null,y=mi,mi=Cf(s.containerInfo),En(s,o),mi=y,Sn(o),c&4&&l!==null&&l.memoizedState.isDehydrated)try{ga(s.containerInfo)}catch(ge){nt(o,o.return,ge)}bm&&(bm=!1,Pv(o));break;case 4:c=mi,mi=Cf(o.stateNode.containerInfo),En(s,o),Sn(o),mi=c;break;case 12:En(s,o),Sn(o);break;case 31:En(s,o),Sn(o),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,ff(o,c)));break;case 13:En(s,o),Sn(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(hf=cn()),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,ff(o,c)));break;case 22:y=o.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,J=lo,te=Ut;if(lo=J||y,Ut=te||L,En(s,o),Ut=te,lo=J,Sn(o),c&8192)e:for(s=o.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(l===null||L||lo||Ut||jr(o)),l=null,s=o;;){if(s.tag===5||s.tag===26){if(l===null){L=l=s;try{if(v=L.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=L.stateNode;var oe=L.memoizedProps.style,Q=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;R.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ge){nt(L,L.return,ge)}}}else if(s.tag===6){if(l===null){L=s;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(ge){nt(L,L.return,ge)}}}else if(s.tag===18){if(l===null){L=s;try{var Z=L.stateNode;y?A0(Z,!0):A0(L.stateNode,!1)}catch(ge){nt(L,L.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=o.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,ff(o,l))));break;case 19:En(s,o),Sn(o),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,ff(o,c)));break;case 30:break;case 21:break;default:En(s,o),Sn(o)}}function Sn(o){var s=o.flags;if(s&2){try{for(var l,c=o.return;c!==null;){if(Cv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=Rm(o);cf(o,v,y);break;case 5:var A=l.stateNode;l.flags&32&&(vn(A,""),l.flags&=-33);var R=Rm(o);cf(o,R,A);break;case 3:case 4:var L=l.stateNode.containerInfo,J=Rm(o);xm(o,J,L);break;default:throw Error(i(161))}}catch(te){nt(o,o.return,te)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function Pv(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;Pv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function co(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)xv(o,s.alternate,s),s=s.sibling}function jr(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:Yo(4,s,s.return),jr(s);break;case 1:Gi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&Av(s,s.return,l),jr(s);break;case 27:iu(s.stateNode);case 26:case 5:Gi(s,s.return),jr(s);break;case 22:s.memoizedState===null&&jr(s);break;case 30:jr(s);break;default:jr(s)}o=o.sibling}}function fo(o,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=o,v=s,A=v.flags;switch(v.tag){case 0:case 11:case 15:fo(y,v,l),Jl(4,v);break;case 1:if(fo(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){nt(c,c.return,J)}if(c=v,y=c.updateQueue,y!==null){var R=c.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)f_(L[y],R)}catch(J){nt(c,c.return,J)}}l&&A&64&&Sv(v),Ql(v,v.return);break;case 27:wv(v);case 26:case 5:fo(y,v,l),l&&c===null&&A&4&&Iv(v),Ql(v,v.return);break;case 12:fo(y,v,l);break;case 31:fo(y,v,l),l&&A&4&&Dv(y,v);break;case 13:fo(y,v,l),l&&A&4&&Mv(y,v);break;case 22:v.memoizedState===null&&fo(y,v,l),Ql(v,v.return);break;case 30:break;default:fo(y,v,l)}s=s.sibling}}function Nm(o,s){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&Pl(l))}function Dm(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&Pl(o))}function pi(o,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Uv(o,s,l,c),s=s.sibling}function Uv(o,s,l,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:pi(o,s,l,c),y&2048&&Jl(9,s);break;case 1:pi(o,s,l,c);break;case 3:pi(o,s,l,c),y&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&Pl(o)));break;case 12:if(y&2048){pi(o,s,l,c),o=s.stateNode;try{var v=s.memoizedProps,A=v.id,R=v.onPostCommit;typeof R=="function"&&R(A,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(L){nt(s,s.return,L)}}else pi(o,s,l,c);break;case 31:pi(o,s,l,c);break;case 13:pi(o,s,l,c);break;case 23:break;case 22:v=s.stateNode,A=s.alternate,s.memoizedState!==null?v._visibility&2?pi(o,s,l,c):$l(o,s):v._visibility&2?pi(o,s,l,c):(v._visibility|=2,ra(o,s,l,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&Nm(A,s);break;case 24:pi(o,s,l,c),y&2048&&Dm(s.alternate,s);break;default:pi(o,s,l,c)}}function ra(o,s,l,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=o,A=s,R=l,L=c,J=A.flags;switch(A.tag){case 0:case 11:case 15:ra(v,A,R,L,y),Jl(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?ra(v,A,R,L,y):$l(v,A):(te._visibility|=2,ra(v,A,R,L,y)),y&&J&2048&&Nm(A.alternate,A);break;case 24:ra(v,A,R,L,y),y&&J&2048&&Dm(A.alternate,A);break;default:ra(v,A,R,L,y)}s=s.sibling}}function $l(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=o,c=s,y=c.flags;switch(c.tag){case 22:$l(l,c),y&2048&&Nm(c.alternate,c);break;case 24:$l(l,c),y&2048&&Dm(c.alternate,c);break;default:$l(l,c)}s=s.sibling}}var Xl=8192;function sa(o,s,l){if(o.subtreeFlags&Xl)for(o=o.child;o!==null;)Lv(o,s,l),o=o.sibling}function Lv(o,s,l){switch(o.tag){case 26:sa(o,s,l),o.flags&Xl&&o.memoizedState!==null&&cx(l,mi,o.memoizedState,o.memoizedProps);break;case 5:sa(o,s,l);break;case 3:case 4:var c=mi;mi=Cf(o.stateNode.containerInfo),sa(o,s,l),mi=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Xl,Xl=16777216,sa(o,s,l),Xl=c):sa(o,s,l));break;default:sa(o,s,l)}}function kv(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function Wl(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Yt=c,Fv(c,o)}kv(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ov(o),o=o.sibling}function Ov(o){switch(o.tag){case 0:case 11:case 15:Wl(o),o.flags&2048&&Yo(9,o,o.return);break;case 3:Wl(o);break;case 12:Wl(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,df(o)):Wl(o);break;default:Wl(o)}}function df(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Yt=c,Fv(c,o)}kv(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:Yo(8,s,s.return),df(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,df(s));break;default:df(s)}o=o.sibling}}function Fv(o,s){for(;Yt!==null;){var l=Yt;switch(l.tag){case 0:case 11:case 15:Yo(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Pl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Yt=c;else e:for(l=o;Yt!==null;){c=Yt;var y=c.sibling,v=c.return;if(bv(c),c===l){Yt=null;break e}if(y!==null){y.return=v,Yt=y;break e}Yt=v}}}var CR={getCacheForType:function(o){var s=Zt(Mt),l=s.data.get(o);return l===void 0&&(l=o(),s.data.set(o,l)),l},cacheSignal:function(){return Zt(Mt).controller.signal}},wR=typeof WeakMap=="function"?WeakMap:Map,Xe=0,ct=null,ke=null,Fe=0,tt=0,Mn=null,Jo=!1,aa=!1,Mm=!1,ho=0,Tt=0,Qo=0,es=0,Vm=0,Vn=0,la=0,Zl=null,An=null,Pm=!1,hf=0,Bv=0,mf=1/0,pf=null,$o=null,qt=0,Xo=null,ua=null,mo=0,Um=0,Lm=null,Gv=null,jl=0,km=null;function Pn(){return(Xe&2)!==0&&Fe!==0?Fe&-Fe:ee.T!==null?Hm():pc()}function qv(){if(Vn===0)if((Fe&536870912)===0||qe){var o=Rr;Rr<<=1,(Rr&3932160)===0&&(Rr=262144),Vn=o}else Vn=536870912;return o=Nn.current,o!==null&&(o.flags|=32),Vn}function In(o,s,l){(o===ct&&(tt===2||tt===9)||o.cancelPendingCommit!==null)&&(ca(o,0),Wo(o,Fe,Vn,!1)),xr(o,l),((Xe&2)===0||o!==ct)&&(o===ct&&((Xe&2)===0&&(es|=l),Tt===4&&Wo(o,Fe,Vn,!1)),qi(o))}function Hv(o,s,l){if((Xe&6)!==0)throw Error(i(327));var c=!l&&(s&127)===0&&(s&o.expiredLanes)===0||ri(o,s),y=c?bR(o,s):Fm(o,s,!0),v=c;do{if(y===0){aa&&!c&&Wo(o,s,0,!1);break}else{if(l=o.current.alternate,v&&!RR(l)){y=Fm(o,s,!1),v=!1;continue}if(y===2){if(v=s,o.errorRecoveryDisabledLanes&v)var A=0;else A=o.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var R=o;y=Zl;var L=R.current.memoizedState.isDehydrated;if(L&&(ca(R,A).flags|=256),A=Fm(R,A,!1),A!==2){if(Mm&&!L){R.errorRecoveryDisabledLanes|=v,es|=v,y=4;break e}v=An,An=y,v!==null&&(An===null?An=v:An.push.apply(An,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){ca(o,0),Wo(o,s,0,!0);break}e:{switch(c=o,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Wo(c,s,Vn,!Jo);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(y=hf+300-cn(),10<y)){if(Wo(c,s,Vn,!Jo),Ii(c,0,!0)!==0)break e;mo=s,c.timeoutHandle=T0(zv.bind(null,c,l,An,pf,Pm,s,Vn,es,la,Jo,v,"Throttled",-0,0),y);break e}zv(c,l,An,pf,Pm,s,Vn,es,la,Jo,v,null,-0,0)}}break}while(!0);qi(o)}function zv(o,s,l,c,y,v,A,R,L,J,te,oe,Q,Z){if(o.timeoutHandle=-1,oe=s.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},Lv(s,v,oe);var ge=(v&62914560)===v?hf-cn():(v&4194048)===v?Bv-cn():0;if(ge=fx(oe,ge),ge!==null){mo=v,o.cancelPendingCommit=ge(Zv.bind(null,o,s,v,l,c,y,A,R,L,te,oe,null,Q,Z)),Wo(o,v,A,!J);return}}Zv(o,s,v,l,c,y,A,R,L)}function RR(o){for(var s=o;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!xn(v(),y))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Wo(o,s,l,c){s&=~Vm,s&=~es,o.suspendedLanes|=s,o.pingedLanes&=~s,c&&(o.warmLanes|=s),c=o.expirationTimes;for(var y=s;0<y;){var v=31-St(y),A=1<<v;c[v]=-1,y&=~A}l!==0&&br(o,l,s)}function gf(){return(Xe&6)===0?(eu(0),!1):!0}function Om(){if(ke!==null){if(tt===0)var o=ke.return;else o=ke,no=Kr=null,em(o),ea=null,Ll=0,o=ke;for(;o!==null;)Ev(o.alternate,o),o=o.return;ke=null}}function ca(o,s){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,JR(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),mo=0,Om(),ct=o,ke=l=eo(o.current,null),Fe=s,tt=0,Mn=null,Jo=!1,aa=ri(o,s),Mm=!1,la=Vn=Vm=es=Qo=Tt=0,An=Zl=null,Pm=!1,(s&8)!==0&&(s|=s&32);var c=o.entangledLanes;if(c!==0)for(o=o.entanglements,c&=s;0<c;){var y=31-St(c),v=1<<y;s|=o[y],c&=~v}return ho=s,Lc(),l}function Kv(o,s){De=null,ee.H=zl,s===js||s===zc?(s=a_(),tt=3):s===qh?(s=a_(),tt=4):tt=s===gm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Mn=s,ke===null&&(Tt=1,rf(o,Kn(s,o.current)))}function Yv(){var o=Nn.current;return o===null?!0:(Fe&4194048)===Fe?$n===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?o===$n:!1}function Jv(){var o=ee.H;return ee.H=zl,o===null?zl:o}function Qv(){var o=ee.A;return ee.A=CR,o}function yf(){Tt=4,Jo||(Fe&4194048)!==Fe&&Nn.current!==null||(aa=!0),(Qo&134217727)===0&&(es&134217727)===0||ct===null||Wo(ct,Fe,Vn,!1)}function Fm(o,s,l){var c=Xe;Xe|=2;var y=Jv(),v=Qv();(ct!==o||Fe!==s)&&(pf=null,ca(o,s)),s=!1;var A=Tt;e:do try{if(tt!==0&&ke!==null){var R=ke,L=Mn;switch(tt){case 8:Om(),A=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(s=!0);var J=tt;if(tt=0,Mn=null,fa(o,R,L,J),l&&aa){A=0;break e}break;default:J=tt,tt=0,Mn=null,fa(o,R,L,J)}}xR(),A=Tt;break}catch(te){Kv(o,te)}while(!0);return s&&o.shellSuspendCounter++,no=Kr=null,Xe=c,ee.H=y,ee.A=v,ke===null&&(ct=null,Fe=0,Lc()),A}function xR(){for(;ke!==null;)$v(ke)}function bR(o,s){var l=Xe;Xe|=2;var c=Jv(),y=Qv();ct!==o||Fe!==s?(pf=null,mf=cn()+500,ca(o,s)):aa=ri(o,s);e:do try{if(tt!==0&&ke!==null){s=ke;var v=Mn;t:switch(tt){case 1:tt=0,Mn=null,fa(o,s,v,1);break;case 2:case 9:if(r_(v)){tt=0,Mn=null,Xv(s);break}s=function(){tt!==2&&tt!==9||ct!==o||(tt=7),qi(o)},v.then(s,s);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:r_(v)?(tt=0,Mn=null,Xv(s)):(tt=0,Mn=null,fa(o,s,v,7));break;case 5:var A=null;switch(ke.tag){case 26:A=ke.memoizedState;case 5:case 27:var R=ke;if(A?U0(A):R.stateNode.complete){tt=0,Mn=null;var L=R.sibling;if(L!==null)ke=L;else{var J=R.return;J!==null?(ke=J,_f(J)):ke=null}break t}}tt=0,Mn=null,fa(o,s,v,5);break;case 6:tt=0,Mn=null,fa(o,s,v,6);break;case 8:Om(),Tt=6;break e;default:throw Error(i(462))}}NR();break}catch(te){Kv(o,te)}while(!0);return no=Kr=null,ee.H=c,ee.A=y,Xe=l,ke!==null?0:(ct=null,Fe=0,Lc(),Tt)}function NR(){for(;ke!==null&&!ph();)$v(ke)}function $v(o){var s=vv(o.alternate,o,ho);o.memoizedProps=o.pendingProps,s===null?_f(o):ke=s}function Xv(o){var s=o,l=s.alternate;switch(s.tag){case 15:case 0:s=hv(l,s,s.pendingProps,s.type,void 0,Fe);break;case 11:s=hv(l,s,s.pendingProps,s.type.render,s.ref,Fe);break;case 5:em(s);default:Ev(l,s),s=ke=Qy(s,ho),s=vv(l,s,ho)}o.memoizedProps=o.pendingProps,s===null?_f(o):ke=s}function fa(o,s,l,c){no=Kr=null,em(s),ea=null,Ll=0;var y=s.return;try{if(_R(o,y,s,l,Fe)){Tt=1,rf(o,Kn(l,o.current)),ke=null;return}}catch(v){if(y!==null)throw ke=y,v;Tt=1,rf(o,Kn(l,o.current)),ke=null;return}s.flags&32768?(qe||c===1?o=!0:aa||(Fe&536870912)!==0?o=!1:(Jo=o=!0,(c===2||c===9||c===3||c===6)&&(c=Nn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Wv(s,o)):_f(s)}function _f(o){var s=o;do{if((s.flags&32768)!==0){Wv(s,Jo);return}o=s.return;var l=ER(s.alternate,s,ho);if(l!==null){ke=l;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=o}while(s!==null);Tt===0&&(Tt=5)}function Wv(o,s){do{var l=SR(o.alternate,o);if(l!==null){l.flags&=32767,ke=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(o=o.sibling,o!==null)){ke=o;return}ke=o=l}while(o!==null);Tt=6,ke=null}function Zv(o,s,l,c,y,v,A,R,L){o.cancelPendingCommit=null;do vf();while(qt!==0);if((Xe&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(v=s.lanes|s.childLanes,v|=Rh,_h(o,l,v,A,R,L),o===ct&&(ke=ct=null,Fe=0),ua=s,Xo=o,mo=l,Um=v,Lm=y,Gv=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,PR(Ro,function(){return i0(),null})):(o.callbackNode=null,o.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null,y=fe.p,fe.p=2,A=Xe,Xe|=4;try{AR(o,s,l)}finally{Xe=A,fe.p=y,ee.T=c}}qt=1,jv(),e0(),t0()}}function jv(){if(qt===1){qt=0;var o=Xo,s=ua,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null;var c=fe.p;fe.p=2;var y=Xe;Xe|=4;try{Vv(s,o);var v=Wm,A=Fy(o.containerInfo),R=v.focusedElem,L=v.selectionRange;if(A!==R&&R&&R.ownerDocument&&Oy(R.ownerDocument.documentElement,R)){if(L!==null&&Sh(R)){var J=L.start,te=L.end;if(te===void 0&&(te=J),"selectionStart"in R)R.selectionStart=J,R.selectionEnd=Math.min(te,R.value.length);else{var oe=R.ownerDocument||document,Q=oe&&oe.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),ge=R.textContent.length,Ie=Math.min(L.start,ge),ut=L.end===void 0?Ie:Math.min(L.end,ge);!Z.extend&&Ie>ut&&(A=ut,ut=Ie,Ie=A);var q=ky(R,Ie),B=ky(R,ut);if(q&&B&&(Z.rangeCount!==1||Z.anchorNode!==q.node||Z.anchorOffset!==q.offset||Z.focusNode!==B.node||Z.focusOffset!==B.offset)){var Y=oe.createRange();Y.setStart(q.node,q.offset),Z.removeAllRanges(),Ie>ut?(Z.addRange(Y),Z.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),Z.addRange(Y))}}}}for(oe=[],Z=R;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<oe.length;R++){var ie=oe[R];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Df=!!Xm,Wm=Xm=null}finally{Xe=y,fe.p=c,ee.T=l}}o.current=s,qt=2}}function e0(){if(qt===2){qt=0;var o=Xo,s=ua,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=ee.T,ee.T=null;var c=fe.p;fe.p=2;var y=Xe;Xe|=4;try{xv(o,s.alternate,s)}finally{Xe=y,fe.p=c,ee.T=l}}qt=3}}function t0(){if(qt===4||qt===3){qt=0,lc();var o=Xo,s=ua,l=mo,c=Gv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?qt=5:(qt=0,ua=Xo=null,n0(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&($o=null),Xi(l),s=s.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(oi,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=ee.T,y=fe.p,fe.p=2,ee.T=null;try{for(var v=o.onRecoverableError,A=0;A<c.length;A++){var R=c[A];v(R.value,{componentStack:R.stack})}}finally{ee.T=s,fe.p=y}}(mo&3)!==0&&vf(),qi(o),y=o.pendingLanes,(l&261930)!==0&&(y&42)!==0?o===km?jl++:(jl=0,km=o):jl=0,eu(0)}}function n0(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,Pl(s)))}function vf(){return jv(),e0(),t0(),i0()}function i0(){if(qt!==5)return!1;var o=Xo,s=Um;Um=0;var l=Xi(mo),c=ee.T,y=fe.p;try{fe.p=32>l?32:l,ee.T=null,l=Lm,Lm=null;var v=Xo,A=mo;if(qt=0,ua=Xo=null,mo=0,(Xe&6)!==0)throw Error(i(331));var R=Xe;if(Xe|=4,Ov(v.current),Uv(v,v.current,A,l),Xe=R,eu(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(oi,v)}catch{}return!0}finally{fe.p=y,ee.T=c,n0(o,s)}}function o0(o,s,l){s=Kn(l,s),s=pm(o.stateNode,s,2),o=Ho(o,s,2),o!==null&&(xr(o,2),qi(o))}function nt(o,s,l){if(o.tag===3)o0(o,o,l);else for(;s!==null;){if(s.tag===3){o0(s,o,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&($o===null||!$o.has(c))){o=Kn(l,o),l=rv(2),c=Ho(s,l,2),c!==null&&(sv(l,c,s,o),xr(c,2),qi(c));break}}s=s.return}}function Bm(o,s,l){var c=o.pingCache;if(c===null){c=o.pingCache=new wR;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(l)||(Mm=!0,y.add(l),o=DR.bind(null,o,s,l),s.then(o,o))}function DR(o,s,l){var c=o.pingCache;c!==null&&c.delete(s),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,ct===o&&(Fe&l)===l&&(Tt===4||Tt===3&&(Fe&62914560)===Fe&&300>cn()-hf?(Xe&2)===0&&ca(o,0):Vm|=l,la===Fe&&(la=0)),qi(o)}function r0(o,s){s===0&&(s=mc()),o=qr(o,s),o!==null&&(xr(o,s),qi(o))}function MR(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),r0(o,l)}function VR(o,s){var l=0;switch(o.tag){case 31:case 13:var c=o.stateNode,y=o.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=o.stateNode;break;case 22:c=o.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),r0(o,l)}function PR(o,s){return Gt(o,s)}var Tf=null,da=null,Gm=!1,Ef=!1,qm=!1,Zo=0;function qi(o){o!==da&&o.next===null&&(da===null?Tf=da=o:da=da.next=o),Ef=!0,Gm||(Gm=!0,LR())}function eu(o,s){if(!qm&&Ef){qm=!0;do for(var l=!1,c=Tf;c!==null;){if(o!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,R=c.pingedLanes;v=(1<<31-St(42|o)+1)-1,v&=y&~(A&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,u0(c,v))}else v=Fe,v=Ii(c,c===ct?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||ri(c,v)||(l=!0,u0(c,v));c=c.next}while(l);qm=!1}}function UR(){s0()}function s0(){Ef=Gm=!1;var o=0;Zo!==0&&YR()&&(o=Zo);for(var s=cn(),l=null,c=Tf;c!==null;){var y=c.next,v=a0(c,s);v===0?(c.next=null,l===null?Tf=y:l.next=y,y===null&&(da=l)):(l=c,(o!==0||(v&3)!==0)&&(Ef=!0)),c=y}qt!==0&&qt!==5||eu(o),Zo!==0&&(Zo=0)}function a0(o,s){for(var l=o.suspendedLanes,c=o.pingedLanes,y=o.expirationTimes,v=o.pendingLanes&-62914561;0<v;){var A=31-St(v),R=1<<A,L=y[A];L===-1?((R&l)===0||(R&c)!==0)&&(y[A]=yh(R,s)):L<=s&&(o.expiredLanes|=R),v&=~R}if(s=ct,l=Fe,l=Ii(o,o===s?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),c=o.callbackNode,l===0||o===s&&(tt===2||tt===9)||o.cancelPendingCommit!==null)return c!==null&&c!==null&&wo(c),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||ri(o,l)){if(s=l&-l,s===o.callbackPriority)return s;switch(c!==null&&wo(c),Xi(l)){case 2:case 8:l=cl;break;case 32:l=Ro;break;case 268435456:l=uc;break;default:l=Ro}return c=l0.bind(null,o),l=Gt(l,c),o.callbackPriority=s,o.callbackNode=l,s}return c!==null&&c!==null&&wo(c),o.callbackPriority=2,o.callbackNode=null,2}function l0(o,s){if(qt!==0&&qt!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(vf()&&o.callbackNode!==l)return null;var c=Fe;return c=Ii(o,o===ct?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),c===0?null:(Hv(o,c,s),a0(o,cn()),o.callbackNode!=null&&o.callbackNode===l?l0.bind(null,o):null)}function u0(o,s){if(vf())return null;Hv(o,s,!0)}function LR(){QR(function(){(Xe&6)!==0?Gt(ul,UR):s0()})}function Hm(){if(Zo===0){var o=Ws;o===0&&(o=Si,Si<<=1,(Si&261888)===0&&(Si=256)),Zo=o}return Zo}function c0(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ls(""+o)}function f0(o,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,o.id&&l.setAttribute("form",o.id),s.parentNode.insertBefore(l,s),o=new FormData(o),l.parentNode.removeChild(l),o}function kR(o,s,l,c,y){if(s==="submit"&&l&&l.stateNode===y){var v=c0((y[zt]||null).action),A=c.submitter;A&&(s=(s=A[zt]||null)?c0(s.formAction):A.getAttribute("formAction"),s!==null&&(v=s,A=null));var R=new Ui("action","action",null,c,y);o.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Zo!==0){var L=A?f0(y,A):new FormData(y);um(l,{pending:!0,data:L,method:y.method,action:v},null,L)}}else typeof v=="function"&&(R.preventDefault(),L=A?f0(y,A):new FormData(y),um(l,{pending:!0,data:L,method:y.method,action:v},v,L))},currentTarget:y}]})}}for(var zm=0;zm<wh.length;zm++){var Km=wh[zm],OR=Km.toLowerCase(),FR=Km[0].toUpperCase()+Km.slice(1);hi(OR,"on"+FR)}hi(qy,"onAnimationEnd"),hi(Hy,"onAnimationIteration"),hi(zy,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(tR,"onTransitionRun"),hi(nR,"onTransitionStart"),hi(iR,"onTransitionCancel"),hi(Ky,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tu));function d0(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var c=o[l],y=c.event;c=c.listeners;e:{var v=void 0;if(s)for(var A=c.length-1;0<=A;A--){var R=c[A],L=R.instance,J=R.currentTarget;if(R=R.listener,L!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=J;try{v(y)}catch(te){Uc(te)}y.currentTarget=null,v=L}else for(A=0;A<c.length;A++){if(R=c[A],L=R.instance,J=R.currentTarget,R=R.listener,L!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=J;try{v(y)}catch(te){Uc(te)}y.currentTarget=null,v=L}}}}function Oe(o,s){var l=s[Ds];l===void 0&&(l=s[Ds]=new Set);var c=o+"__bubble";l.has(c)||(h0(s,o,2,!1),l.add(c))}function Ym(o,s,l){var c=0;s&&(c|=4),h0(l,o,c,s)}var Sf="_reactListening"+Math.random().toString(36).slice(2);function Jm(o){if(!o[Sf]){o[Sf]=!0,hl.forEach(function(l){l!=="selectionchange"&&(BR.has(l)||Ym(l,!1,o),Ym(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[Sf]||(s[Sf]=!0,Ym("selectionchange",!1,s))}}function h0(o,s,l,c){switch(q0(s)){case 2:var y=mx;break;case 8:y=px;break;default:y=lp}l=y.bind(null,s,l,o),y=void 0,!Pr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?o.addEventListener(s,l,{capture:!0,passive:y}):o.addEventListener(s,l,!0):y!==void 0?o.addEventListener(s,l,{passive:y}):o.addEventListener(s,l,!1)}function Qm(o,s,l,c,y){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var R=c.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=c.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=xi(R),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){c=v=A;continue e}R=R.parentNode}}c=c.return}Vo(function(){var J=v,te=Gn(l),oe=[];e:{var Q=Yy.get(o);if(Q!==void 0){var Z=Ui,ge=o;switch(o){case"keypress":if(Lr(l)===0)break e;case"keydown":case"keyup":Z=Mc;break;case"focusin":ge="focus",Z=Or;break;case"focusout":ge="blur",Z=Or;break;case"beforeblur":case"afterblur":Z=Or;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=S;break;case qy:case Hy:case zy:Z=Cc;break;case Ky:Z=b;break;case"scroll":case"scrollend":Z=Cl;break;case"wheel":Z=W;break;case"copy":case"cut":case"paste":Z=wc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ji;break;case"toggle":case"beforetoggle":Z=Ne}var Ie=(s&4)!==0,ut=!Ie&&(o==="scroll"||o==="scrollend"),q=Ie?Q!==null?Q+"Capture":null:Q;Ie=[];for(var B=J,Y;B!==null;){var ie=B;if(Y=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||Y===null||q===null||(ie=ui(B,q),ie!=null&&Ie.push(nu(B,ie,Y))),ut)break;B=B.return}0<Ie.length&&(Q=new Z(Q,ge,null,l,te),oe.push({event:Q,listeners:Ie}))}}if((s&7)===0){e:{if(Q=o==="mouseover"||o==="pointerover",Z=o==="mouseout"||o==="pointerout",Q&&l!==Sl&&(ge=l.relatedTarget||l.fromElement)&&(xi(ge)||ge[wi]))break e;if((Z||Q)&&(Q=te.window===te?te:(Q=te.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(ge=l.relatedTarget||l.toElement,Z=J,ge=ge?xi(ge):null,ge!==null&&(ut=a(ge),Ie=ge.tag,ge!==ut||Ie!==5&&Ie!==27&&Ie!==6)&&(ge=null)):(Z=null,ge=J),Z!==ge)){if(Ie=wl,ie="onMouseLeave",q="onMouseEnter",B="mouse",(o==="pointerout"||o==="pointerover")&&(Ie=ji,ie="onPointerLeave",q="onPointerEnter",B="pointer"),ut=Z==null?Q:wn(Z),Y=ge==null?Q:wn(ge),Q=new Ie(ie,B+"leave",Z,l,te),Q.target=ut,Q.relatedTarget=Y,ie=null,xi(te)===J&&(Ie=new Ie(q,B+"enter",ge,l,te),Ie.target=Y,Ie.relatedTarget=ut,ie=Ie),ut=ie,Z&&ge)t:{for(Ie=GR,q=Z,B=ge,Y=0,ie=q;ie;ie=Ie(ie))Y++;ie=0;for(var Ee=B;Ee;Ee=Ie(Ee))ie++;for(;0<Y-ie;)q=Ie(q),Y--;for(;0<ie-Y;)B=Ie(B),ie--;for(;Y--;){if(q===B||B!==null&&q===B.alternate){Ie=q;break t}q=Ie(q),B=Ie(B)}Ie=null}else Ie=null;Z!==null&&m0(oe,Q,Z,Ie,!1),ge!==null&&ut!==null&&m0(oe,ut,ge,Ie,!0)}}e:{if(Q=J?wn(J):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var Ye=Dy;else if(by(Q))if(My)Ye=Zw;else{Ye=Xw;var ve=$w}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?J&&Us(J.elementType)&&(Ye=Dy):Ye=Ww;if(Ye&&(Ye=Ye(o,J))){Ny(oe,Ye,l,te);break e}ve&&ve(o,Q,J),o==="focusout"&&J&&Q.type==="number"&&J.memoizedProps.value!=null&&vl(Q,"number",Q.value)}switch(ve=J?wn(J):window,o){case"focusin":(by(ve)||ve.contentEditable==="true")&&(Hs=ve,Ah=J,Dl=null);break;case"focusout":Dl=Ah=Hs=null;break;case"mousedown":Ih=!0;break;case"contextmenu":case"mouseup":case"dragend":Ih=!1,By(oe,l,te);break;case"selectionchange":if(eR)break;case"keydown":case"keyup":By(oe,l,te)}var Ve;if($e)e:{switch(o){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else qs?Fr(o,l)&&(Be="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(Be="onCompositionStart");Be&&(Oi&&l.locale!=="ko"&&(qs||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&qs&&(Ve=Il()):(Pi=te,Al="value"in Pi?Pi.value:Pi.textContent,qs=!0)),ve=Af(J,Be),0<ve.length&&(Be=new ki(Be,o,null,l,te),oe.push({event:Be,listeners:ve}),Ve?Be.data=Ve:(Ve=Gs(l),Ve!==null&&(Be.data=Ve)))),(Ve=Hn?Kw(o,l):Yw(o,l))&&(Be=Af(J,"onBeforeInput"),0<Be.length&&(ve=new ki("onBeforeInput","beforeinput",null,l,te),oe.push({event:ve,listeners:Be}),ve.data=Ve)),kR(oe,o,J,l,te)}d0(oe,s)})}function nu(o,s,l){return{instance:o,listener:s,currentTarget:l}}function Af(o,s){for(var l=s+"Capture",c=[];o!==null;){var y=o,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=ui(o,l),y!=null&&c.unshift(nu(o,y,v)),y=ui(o,s),y!=null&&c.push(nu(o,y,v))),o.tag===3)return c;o=o.return}return[]}function GR(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function m0(o,s,l,c,y){for(var v=s._reactName,A=[];l!==null&&l!==c;){var R=l,L=R.alternate,J=R.stateNode;if(R=R.tag,L!==null&&L===c)break;R!==5&&R!==26&&R!==27||J===null||(L=J,y?(J=ui(l,v),J!=null&&A.unshift(nu(l,J,L))):y||(J=ui(l,v),J!=null&&A.push(nu(l,J,L)))),l=l.return}A.length!==0&&o.push({event:s,listeners:A})}var qR=/\r\n?/g,HR=/\u0000|\uFFFD/g;function p0(o){return(typeof o=="string"?o:""+o).replace(qR,`
`).replace(HR,"")}function g0(o,s){return s=p0(s),p0(o)===s}function lt(o,s,l,c,y,v){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||vn(o,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&vn(o,""+c);break;case"className":Rn(o,"class",c);break;case"tabIndex":Rn(o,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(o,l,c);break;case"style":El(o,c,v);break;case"data":if(s!=="object"){Rn(o,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){o.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){o.removeAttribute(l);break}c=Ls(""+c),o.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(s!=="input"&&lt(o,s,"name",y.name,y,null),lt(o,s,"formEncType",y.formEncType,y,null),lt(o,s,"formMethod",y.formMethod,y,null),lt(o,s,"formTarget",y.formTarget,y,null)):(lt(o,s,"encType",y.encType,y,null),lt(o,s,"method",y.method,y,null),lt(o,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){o.removeAttribute(l);break}c=Ls(""+c),o.setAttribute(l,c);break;case"onClick":c!=null&&(o.onclick=li);break;case"onScroll":c!=null&&Oe("scroll",o);break;case"onScrollEnd":c!=null&&Oe("scrollend",o);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"multiple":o.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":o.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){o.removeAttribute("xlink:href");break}l=Ls(""+c),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,""+c):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":c===!0?o.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,c):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?o.setAttribute(l,c):o.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?o.removeAttribute(l):o.setAttribute(l,c);break;case"popover":Oe("beforetoggle",o),Oe("toggle",o),Vs(o,"popover",c);break;case"xlinkActuate":Dt(o,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Dt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Dt(o,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Dt(o,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Dt(o,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Dt(o,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Dt(o,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Dt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Dt(o,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Vs(o,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Sc.get(l)||l,Vs(o,l,c))}}function $m(o,s,l,c,y,v){switch(l){case"style":El(o,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"children":typeof c=="string"?vn(o,c):(typeof c=="number"||typeof c=="bigint")&&vn(o,""+c);break;case"onScroll":c!=null&&Oe("scroll",o);break;case"onScrollEnd":c!=null&&Oe("scrollend",o);break;case"onClick":c!=null&&(o.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ml.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),s=l.slice(2,y?l.length-7:void 0),v=o[zt]||null,v=v!=null?v[l]:null,typeof v=="function"&&o.removeEventListener(s,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(s,c,y);break e}l in o?o[l]=c:c===!0?o.setAttribute(l,""):Vs(o,l,c)}}}function en(o,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",o),Oe("load",o);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var A=l[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:lt(o,s,v,A,l,null)}}y&&lt(o,s,"srcSet",l.srcSet,l,null),c&&lt(o,s,"src",l.src,l,null);return;case"input":Oe("invalid",o);var R=v=A=y=null,L=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var te=l[c];if(te!=null)switch(c){case"name":y=te;break;case"type":A=te;break;case"checked":L=te;break;case"defaultChecked":J=te;break;case"value":v=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:lt(o,s,c,te,l,null)}}vc(o,v,R,L,J,A,y,!1);return;case"select":Oe("invalid",o),c=A=v=null;for(y in l)if(l.hasOwnProperty(y)&&(R=l[y],R!=null))switch(y){case"value":v=R;break;case"defaultValue":A=R;break;case"multiple":c=R;default:lt(o,s,y,R,l,null)}s=v,l=A,o.multiple=!!c,s!=null?bo(o,!!c,s,!1):l!=null&&bo(o,!!c,l,!0);return;case"textarea":Oe("invalid",o),v=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(R=l[A],R!=null))switch(A){case"value":c=R;break;case"defaultValue":y=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:lt(o,s,A,R,l,null)}No(o,c,y,v);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(c=l[L],c!=null))switch(L){case"selected":o.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(o,s,L,c,l,null)}return;case"dialog":Oe("beforetoggle",o),Oe("toggle",o),Oe("cancel",o),Oe("close",o);break;case"iframe":case"object":Oe("load",o);break;case"video":case"audio":for(c=0;c<tu.length;c++)Oe(tu[c],o);break;case"image":Oe("error",o),Oe("load",o);break;case"details":Oe("toggle",o);break;case"embed":case"source":case"link":Oe("error",o),Oe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:lt(o,s,J,c,l,null)}return;default:if(Us(s)){for(te in l)l.hasOwnProperty(te)&&(c=l[te],c!==void 0&&$m(o,s,te,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&lt(o,s,R,c,l,null))}function zR(o,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,R=null,L=null,J=null,te=null;for(Z in l){var oe=l[Z];if(l.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=oe;default:c.hasOwnProperty(Z)||lt(o,s,Z,null,c,oe)}}for(var Q in c){var Z=c[Q];if(oe=l[Q],c.hasOwnProperty(Q)&&(Z!=null||oe!=null))switch(Q){case"type":v=Z;break;case"name":y=Z;break;case"checked":J=Z;break;case"defaultChecked":te=Z;break;case"value":A=Z;break;case"defaultValue":R=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Z!==oe&&lt(o,s,Q,Z,c,oe)}}Ps(o,A,R,L,J,te,v,y);return;case"select":Z=A=R=Q=null;for(v in l)if(L=l[v],l.hasOwnProperty(v)&&L!=null)switch(v){case"value":break;case"multiple":Z=L;default:c.hasOwnProperty(v)||lt(o,s,v,null,c,L)}for(y in c)if(v=c[y],L=l[y],c.hasOwnProperty(y)&&(v!=null||L!=null))switch(y){case"value":Q=v;break;case"defaultValue":R=v;break;case"multiple":A=v;default:v!==L&&lt(o,s,y,v,c,L)}s=R,l=A,c=Z,Q!=null?bo(o,!!l,Q,!1):!!c!=!!l&&(s!=null?bo(o,!!l,s,!0):bo(o,!!l,l?[]:"",!1));return;case"textarea":Z=Q=null;for(R in l)if(y=l[R],l.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:lt(o,s,R,null,c,y)}for(A in c)if(y=c[A],v=l[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":Q=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&lt(o,s,A,y,c,v)}Tc(o,Q,Z);return;case"option":for(var ge in l)if(Q=l[ge],l.hasOwnProperty(ge)&&Q!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":o.selected=!1;break;default:lt(o,s,ge,null,c,Q)}for(L in c)if(Q=c[L],Z=l[L],c.hasOwnProperty(L)&&Q!==Z&&(Q!=null||Z!=null))switch(L){case"selected":o.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:lt(o,s,L,Q,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in l)Q=l[Ie],l.hasOwnProperty(Ie)&&Q!=null&&!c.hasOwnProperty(Ie)&&lt(o,s,Ie,null,c,Q);for(J in c)if(Q=c[J],Z=l[J],c.hasOwnProperty(J)&&Q!==Z&&(Q!=null||Z!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:lt(o,s,J,Q,c,Z)}return;default:if(Us(s)){for(var ut in l)Q=l[ut],l.hasOwnProperty(ut)&&Q!==void 0&&!c.hasOwnProperty(ut)&&$m(o,s,ut,void 0,c,Q);for(te in c)Q=c[te],Z=l[te],!c.hasOwnProperty(te)||Q===Z||Q===void 0&&Z===void 0||$m(o,s,te,Q,c,Z);return}}for(var q in l)Q=l[q],l.hasOwnProperty(q)&&Q!=null&&!c.hasOwnProperty(q)&&lt(o,s,q,null,c,Q);for(oe in c)Q=c[oe],Z=l[oe],!c.hasOwnProperty(oe)||Q===Z||Q==null&&Z==null||lt(o,s,oe,Q,c,Z)}function y0(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function KR(){if(typeof performance.getEntriesByType=="function"){for(var o=0,s=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,A=y.initiatorType,R=y.duration;if(v&&R&&y0(A)){for(A=0,R=y.responseEnd,c+=1;c<l.length;c++){var L=l[c],J=L.startTime;if(J>R)break;var te=L.transferSize,oe=L.initiatorType;te&&y0(oe)&&(L=L.responseEnd,A+=te*(L<R?1:(R-J)/(L-J)))}if(--c,s+=8*(v+A)/(y.duration/1e3),o++,10<o)break}}if(0<o)return s/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Xm=null,Wm=null;function If(o){return o.nodeType===9?o:o.ownerDocument}function _0(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v0(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function Zm(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var jm=null;function YR(){var o=window.event;return o&&o.type==="popstate"?o===jm?!1:(jm=o,!0):(jm=null,!1)}var T0=typeof setTimeout=="function"?setTimeout:void 0,JR=typeof clearTimeout=="function"?clearTimeout:void 0,E0=typeof Promise=="function"?Promise:void 0,QR=typeof queueMicrotask=="function"?queueMicrotask:typeof E0<"u"?function(o){return E0.resolve(null).then(o).catch($R)}:T0;function $R(o){setTimeout(function(){throw o})}function jo(o){return o==="head"}function S0(o,s){var l=s,c=0;do{var y=l.nextSibling;if(o.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){o.removeChild(y),ga(s);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")iu(o.ownerDocument.documentElement);else if(l==="head"){l=o.ownerDocument.head,iu(l);for(var v=l.firstChild;v;){var A=v.nextSibling,R=v.nodeName;v[Ri]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=A}}else l==="body"&&iu(o.ownerDocument.body);l=y}while(l);ga(s)}function A0(o,s){var l=o;o=0;do{var c=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(o===0)break;o--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||o++;l=c}while(l)}function ep(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ep(l),Ms(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function XR(o,s,l,c){for(;o.nodeType===1;){var y=l;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(c){if(!o[Ri])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(v=o.getAttribute("rel"),v==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(v!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(v=o.getAttribute("src"),(v!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===v)return o}else return o;if(o=Xn(o.nextSibling),o===null)break}return null}function WR(o,s,l){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Xn(o.nextSibling),o===null))return null;return o}function I0(o,s){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!s||(o=Xn(o.nextSibling),o===null))return null;return o}function tp(o){return o.data==="$?"||o.data==="$~"}function np(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function ZR(o,s){var l=o.ownerDocument;if(o.data==="$~")o._reactRetry=s;else if(o.data!=="$?"||l.readyState!=="loading")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),o._reactRetry=c}}function Xn(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return o}var ip=null;function C0(o){o=o.nextSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"||l==="/&"){if(s===0)return Xn(o.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}o=o.nextSibling}return null}function w0(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return o;s--}else l!=="/$"&&l!=="/&"||s++}o=o.previousSibling}return null}function R0(o,s,l){switch(s=If(l),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function iu(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Ms(o)}var Wn=new Map,x0=new Set;function Cf(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var po=fe.d;fe.d={f:jR,r:ex,D:tx,C:nx,L:ix,m:ox,X:sx,S:rx,M:ax};function jR(){var o=po.f(),s=gf();return o||s}function ex(o){var s=Bn(o);s!==null&&s.tag===5&&s.type==="form"?K_(s):po.r(o)}var ha=typeof document>"u"?null:document;function b0(o,s,l){var c=ha;if(c&&typeof s=="string"&&s){var y=_n(s);y='link[rel="'+o+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),x0.has(y)||(x0.add(y),o={rel:o,crossOrigin:l,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),en(s,"link",o),Nt(s),c.head.appendChild(s)))}}function tx(o){po.D(o),b0("dns-prefetch",o,null)}function nx(o,s){po.C(o,s),b0("preconnect",o,s)}function ix(o,s,l){po.L(o,s,l);var c=ha;if(c&&o&&s){var y='link[rel="preload"][as="'+_n(s)+'"]';s==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+_n(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+_n(l.imageSizes)+'"]')):y+='[href="'+_n(o)+'"]';var v=y;switch(s){case"style":v=ma(o);break;case"script":v=pa(o)}Wn.has(v)||(o=T({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:o,as:s},l),Wn.set(v,o),c.querySelector(y)!==null||s==="style"&&c.querySelector(ou(v))||s==="script"&&c.querySelector(ru(v))||(s=c.createElement("link"),en(s,"link",o),Nt(s),c.head.appendChild(s)))}}function ox(o,s){po.m(o,s);var l=ha;if(l&&o){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+_n(c)+'"][href="'+_n(o)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=pa(o)}if(!Wn.has(v)&&(o=T({rel:"modulepreload",href:o},s),Wn.set(v,o),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ru(v)))return}c=l.createElement("link"),en(c,"link",o),Nt(c),l.head.appendChild(c)}}}function rx(o,s,l){po.S(o,s,l);var c=ha;if(c&&o){var y=bi(c).hoistableStyles,v=ma(o);s=s||"default";var A=y.get(v);if(!A){var R={loading:0,preload:null};if(A=c.querySelector(ou(v)))R.loading=5;else{o=T({rel:"stylesheet",href:o,"data-precedence":s},l),(l=Wn.get(v))&&op(o,l);var L=A=c.createElement("link");Nt(L),en(L,"link",o),L._p=new Promise(function(J,te){L.onload=J,L.onerror=te}),L.addEventListener("load",function(){R.loading|=1}),L.addEventListener("error",function(){R.loading|=2}),R.loading|=4,wf(A,s,c)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(v,A)}}}function sx(o,s){po.X(o,s);var l=ha;if(l&&o){var c=bi(l).hoistableScripts,y=pa(o),v=c.get(y);v||(v=l.querySelector(ru(y)),v||(o=T({src:o,async:!0},s),(s=Wn.get(y))&&rp(o,s),v=l.createElement("script"),Nt(v),en(v,"link",o),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function ax(o,s){po.M(o,s);var l=ha;if(l&&o){var c=bi(l).hoistableScripts,y=pa(o),v=c.get(y);v||(v=l.querySelector(ru(y)),v||(o=T({src:o,async:!0,type:"module"},s),(s=Wn.get(y))&&rp(o,s),v=l.createElement("script"),Nt(v),en(v,"link",o),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function N0(o,s,l,c){var y=(y=Me.current)?Cf(y):null;if(!y)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=ma(l.href),l=bi(y).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=ma(l.href);var v=bi(y).hoistableStyles,A=v.get(o);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(o,A),(v=y.querySelector(ou(o)))&&!v._p&&(A.instance=v,A.state.loading=5),Wn.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Wn.set(o,l),v||lx(y,o,l,A.state))),s&&c===null)throw Error(i(528,""));return A}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=pa(l),l=bi(y).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function ma(o){return'href="'+_n(o)+'"'}function ou(o){return'link[rel="stylesheet"]['+o+"]"}function D0(o){return T({},o,{"data-precedence":o.precedence,precedence:null})}function lx(o,s,l,c){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=o.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),en(s,"link",l),Nt(s),o.head.appendChild(s))}function pa(o){return'[src="'+_n(o)+'"]'}function ru(o){return"script[async]"+o}function M0(o,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=o.querySelector('style[data-href~="'+_n(l.href)+'"]');if(c)return s.instance=c,Nt(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(o.ownerDocument||o).createElement("style"),Nt(c),en(c,"style",y),wf(c,l.precedence,o),s.instance=c;case"stylesheet":y=ma(l.href);var v=o.querySelector(ou(y));if(v)return s.state.loading|=4,s.instance=v,Nt(v),v;c=D0(l),(y=Wn.get(y))&&op(c,y),v=(o.ownerDocument||o).createElement("link"),Nt(v);var A=v;return A._p=new Promise(function(R,L){A.onload=R,A.onerror=L}),en(v,"link",c),s.state.loading|=4,wf(v,l.precedence,o),s.instance=v;case"script":return v=pa(l.src),(y=o.querySelector(ru(v)))?(s.instance=y,Nt(y),y):(c=l,(y=Wn.get(v))&&(c=T({},l),rp(c,y)),o=o.ownerDocument||o,y=o.createElement("script"),Nt(y),en(y,"link",c),o.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,wf(c,l.precedence,o));return s.instance}function wf(o,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var R=c[A];if(R.dataset.precedence===s)v=R;else if(v!==y)break}v?v.parentNode.insertBefore(o,v.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(o,s.firstChild))}function op(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function rp(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var Rf=null;function V0(o,s,l){if(Rf===null){var c=new Map,y=Rf=new Map;y.set(l,c)}else y=Rf,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(o))return c;for(c.set(o,null),l=l.getElementsByTagName(o),y=0;y<l.length;y++){var v=l[y];if(!(v[Ri]||v[bt]||o==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(s)||"";A=o+A;var R=c.get(A);R?R.push(v):c.set(A,[v])}}return c}function P0(o,s,l){o=o.ownerDocument||o,o.head.insertBefore(l,s==="title"?o.querySelector("head > title"):null)}function ux(o,s,l){if(l===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function U0(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function cx(o,s,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ma(c.href),v=s.querySelector(ou(y));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=xf.bind(o),s.then(o,o)),l.state.loading|=4,l.instance=v,Nt(v);return}v=s.ownerDocument||s,c=D0(c),(y=Wn.get(y))&&op(c,y),v=v.createElement("link"),Nt(v);var A=v;A._p=new Promise(function(R,L){A.onload=R,A.onerror=L}),en(v,"link",c),l.instance=v}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(o.count++,l=xf.bind(o),s.addEventListener("load",l),s.addEventListener("error",l))}}var sp=0;function fx(o,s){return o.stylesheets&&o.count===0&&Nf(o,o.stylesheets),0<o.count||0<o.imgCount?function(l){var c=setTimeout(function(){if(o.stylesheets&&Nf(o,o.stylesheets),o.unsuspend){var v=o.unsuspend;o.unsuspend=null,v()}},6e4+s);0<o.imgBytes&&sp===0&&(sp=62500*KR());var y=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Nf(o,o.stylesheets),o.unsuspend)){var v=o.unsuspend;o.unsuspend=null,v()}},(o.imgBytes>sp?50:800)+s);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function xf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nf(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var bf=null;function Nf(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,bf=new Map,s.forEach(dx,o),bf=null,xf.call(o))}function dx(o,s){if(!(s.state.loading&4)){var l=bf.get(o);if(l)var c=l.get(null);else{l=new Map,bf.set(o,l);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=s.instance,A=y.getAttribute("data-precedence"),v=l.get(A)||c,v===c&&l.set(null,y),l.set(A,y),this.count++,c=xf.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),s.state.loading|=4}}var su={$$typeof:$,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function hx(o,s,l,c,y,v,A,R,L){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function L0(o,s,l,c,y,v,A,R,L,J,te,oe){return o=new hx(o,s,l,A,L,J,te,oe,R),s=1,v===!0&&(s|=24),v=bn(3,null,null,s),o.current=v,v.stateNode=o,s=Fh(),s.refCount++,o.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:s},Hh(v),o}function k0(o){return o?(o=Ys,o):Ys}function O0(o,s,l,c,y,v){y=k0(y),c.context===null?c.context=y:c.pendingContext=y,c=qo(s),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Ho(o,c,s),l!==null&&(In(l,o,s),Ol(l,o,s))}function F0(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function ap(o,s){F0(o,s),(o=o.alternate)&&F0(o,s)}function B0(o){if(o.tag===13||o.tag===31){var s=qr(o,67108864);s!==null&&In(s,o,67108864),ap(o,67108864)}}function G0(o){if(o.tag===13||o.tag===31){var s=Pn();s=Nr(s);var l=qr(o,s);l!==null&&In(l,o,s),ap(o,s)}}var Df=!0;function mx(o,s,l,c){var y=ee.T;ee.T=null;var v=fe.p;try{fe.p=2,lp(o,s,l,c)}finally{fe.p=v,ee.T=y}}function px(o,s,l,c){var y=ee.T;ee.T=null;var v=fe.p;try{fe.p=8,lp(o,s,l,c)}finally{fe.p=v,ee.T=y}}function lp(o,s,l,c){if(Df){var y=up(c);if(y===null)Qm(o,s,c,Mf,l),H0(o,c);else if(yx(y,o,s,l,c))c.stopPropagation();else if(H0(o,c),s&4&&-1<gx.indexOf(o)){for(;y!==null;){var v=Bn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Ai(v.pendingLanes);if(A!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var L=1<<31-St(A);R.entanglements[1]|=L,A&=~L}qi(v),(Xe&6)===0&&(mf=cn()+500,eu(0))}}break;case 31:case 13:R=qr(v,2),R!==null&&In(R,v,2),gf(),ap(v,2)}if(v=up(c),v===null&&Qm(o,s,c,Mf,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else Qm(o,s,c,null,l)}}function up(o){return o=Gn(o),cp(o)}var Mf=null;function cp(o){if(Mf=null,o=xi(o),o!==null){var s=a(o);if(s===null)o=null;else{var l=s.tag;if(l===13){if(o=u(s),o!==null)return o;o=null}else if(l===31){if(o=f(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return Mf=o,null}function q0(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wr()){case ul:return 2;case cl:return 8;case Ro:case gh:return 32;case uc:return 268435456;default:return 32}default:return 32}}var fp=!1,er=null,tr=null,nr=null,au=new Map,lu=new Map,ir=[],gx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H0(o,s){switch(o){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":au.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":lu.delete(s.pointerId)}}function uu(o,s,l,c,y,v){return o===null||o.nativeEvent!==v?(o={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},s!==null&&(s=Bn(s),s!==null&&B0(s)),o):(o.eventSystemFlags|=c,s=o.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),o)}function yx(o,s,l,c,y){switch(s){case"focusin":return er=uu(er,o,s,l,c,y),!0;case"dragenter":return tr=uu(tr,o,s,l,c,y),!0;case"mouseover":return nr=uu(nr,o,s,l,c,y),!0;case"pointerover":var v=y.pointerId;return au.set(v,uu(au.get(v)||null,o,s,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,lu.set(v,uu(lu.get(v)||null,o,s,l,c,y)),!0}return!1}function z0(o){var s=xi(o.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){o.blockedOn=s,si(o.priority,function(){G0(l)});return}}else if(s===31){if(s=f(l),s!==null){o.blockedOn=s,si(o.priority,function(){G0(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Vf(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=up(o.nativeEvent);if(l===null){l=o.nativeEvent;var c=new l.constructor(l.type,l);Sl=c,l.target.dispatchEvent(c),Sl=null}else return s=Bn(l),s!==null&&B0(s),o.blockedOn=l,!1;s.shift()}return!0}function K0(o,s,l){Vf(o)&&l.delete(s)}function _x(){fp=!1,er!==null&&Vf(er)&&(er=null),tr!==null&&Vf(tr)&&(tr=null),nr!==null&&Vf(nr)&&(nr=null),au.forEach(K0),lu.forEach(K0)}function Pf(o,s){o.blockedOn===s&&(o.blockedOn=null,fp||(fp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_x)))}var Uf=null;function Y0(o){Uf!==o&&(Uf=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Uf===o&&(Uf=null);for(var s=0;s<o.length;s+=3){var l=o[s],c=o[s+1],y=o[s+2];if(typeof c!="function"){if(cp(c||l)===null)continue;break}var v=Bn(l);v!==null&&(o.splice(s,3),s-=3,um(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function ga(o){function s(L){return Pf(L,o)}er!==null&&Pf(er,o),tr!==null&&Pf(tr,o),nr!==null&&Pf(nr,o),au.forEach(s),lu.forEach(s);for(var l=0;l<ir.length;l++){var c=ir[l];c.blockedOn===o&&(c.blockedOn=null)}for(;0<ir.length&&(l=ir[0],l.blockedOn===null);)z0(l),l.blockedOn===null&&ir.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],A=y[zt]||null;if(typeof v=="function")A||Y0(l);else if(A){var R=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[zt]||null)R=A.formAction;else if(cp(y)!==null)continue}else R=A.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),Y0(l)}}}function J0(){function o(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function dp(o){this._internalRoot=o}Lf.prototype.render=dp.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=Pn();O0(l,c,o,s,null,null)},Lf.prototype.unmount=dp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;O0(o.current,2,null,o,null,null),gf(),s[wi]=null}};function Lf(o){this._internalRoot=o}Lf.prototype.unstable_scheduleHydration=function(o){if(o){var s=pc();o={blockedOn:null,target:o,priority:s};for(var l=0;l<ir.length&&s!==0&&s<ir[l].priority;l++);ir.splice(l,0,o),l===0&&z0(o)}};var Q0=e.version;if(Q0!=="19.2.4")throw Error(i(527,Q0,"19.2.4"));fe.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=m(s),o=o!==null?_(o):null,o=o===null?null:o.stateNode,o};var vx={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kf.isDisabled&&kf.supportsFiber)try{oi=kf.inject(vx),$t=kf}catch{}}return fu.createRoot=function(o,s){if(!r(o))throw Error(i(299));var l=!1,c="",y=tv,v=nv,A=iv;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=L0(o,1,!1,null,null,l,c,null,y,v,A,J0),o[wi]=s.current,Jm(o),new dp(s)},fu.hydrateRoot=function(o,s,l){if(!r(o))throw Error(i(299));var c=!1,y="",v=tv,A=nv,R=iv,L=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),s=L0(o,1,!0,s,l??null,c,y,L,v,A,R,J0),s.context=k0(null),l=s.current,c=Pn(),c=Nr(c),y=qo(c),y.callback=null,Ho(l,y,c),l=c,s.current.lanes=l,xr(s,l),qi(s),o[wi]=s.current,Jm(o),new Lf(s)},fu.version="19.2.4",fu}var oT;function Nx(){if(oT)return pp.exports;oT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pp.exports=bx(),pp.exports}var Dx=Nx();const Mx=vA(Dx);var dd=(n=>(n.USER="USER",n.ADMIN="ADMIN",n))(dd||{});const Vx=()=>{};var rT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Px=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],u=n[t++],f=n[t++],h=((r&7)<<18|(a&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|u&63)}}return e.join("")},EA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],u=r+1<n.length,f=u?n[r+1]:0,h=r+2<n.length,m=h?n[r+2]:0,_=a>>2,T=(a&3)<<4|f>>4;let E=(f&15)<<2|m>>6,w=m&63;h||(w=64,u||(E=64)),i.push(t[_],t[T],t[E],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(TA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Px(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],f=r<n.length?t[n.charAt(r)]:0;++r;const m=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||f==null||m==null||T==null)throw new Ux;const E=a<<2|f>>4;if(i.push(E),m!==64){const w=f<<4&240|m>>2;if(i.push(w),T!==64){const V=m<<6&192|T;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ux extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lx=function(n){const e=TA(n);return EA.encodeByteArray(e,!0)},hd=function(n){return Lx(n).replace(/\./g,"")},kx=function(n){try{return EA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=()=>SA().__FIREBASE_DEFAULTS__,Fx=()=>{if(typeof process>"u"||typeof rT>"u")return;const n=rT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Bx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&kx(n[1]);return e&&JSON.parse(e)},Rg=()=>{try{return Vx()||Ox()||Fx()||Bx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Gx=n=>{var e,t;return(t=(e=Rg())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},qx=n=>{const e=Gx(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},AA=()=>{var n;return(n=Rg())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zx(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[hd(JSON.stringify(t)),hd(JSON.stringify(u)),""].join(".")}const Ru={};function Yx(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ru))Ru[e]?n.emulator.push(e):n.prod.push(e);return n}function Jx(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let sT=!1;function Qx(n,e){if(typeof window>"u"||typeof document>"u"||!xg(window.location.host)||Ru[n]===e||Ru[n]||sT)return;Ru[n]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",a=Yx().prod.length>0;function u(){const E=document.getElementById(i);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function h(E,w){E.setAttribute("width","24"),E.setAttribute("id",w),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{sT=!0,u()},E}function _(E,w){E.setAttribute("id",w),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=Jx(i),w=t("text"),V=document.getElementById(w)||document.createElement("span"),U=t("learnmore"),P=document.getElementById(U)||document.createElement("a"),z=t("preprendIcon"),j=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const $=E.element;f($),_(P,U);const se=m();h(j,z),$.append(j,V,P,se),document.body.appendChild($)}a?(V.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IA(){var e;const n=(e=Rg())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CA(){return!IA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wA(){return!IA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function RA(){try{return typeof indexedDB=="object"}catch{return!1}}function $x(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="FirebaseError";class Za extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Xx,Object.setPrototypeOf(this,Za.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xA.prototype.create)}}class xA{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],u=a?Wx(a,i):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new Za(r,f,i)}}function Wx(n,e){return n.replace(Zx,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Zx=/\{\$([^}]+)}/g;function pd(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],u=e[r];if(aT(a)&&aT(u)){if(!pd(a,u))return!1}else if(a!==u)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function aT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(n){return n&&n._delegate?n._delegate:n}class Lu{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Hx;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tb(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);i===f&&u.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:eb(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eb(n){return n===ns?void 0:n}function tb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const ib={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},ob=Ke.INFO,rb={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},sb=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=rb[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bA{constructor(e){this.name=e,this._logLevel=ob,this._logHandler=sb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ib[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const ab=(n,e)=>e.some(t=>n instanceof t);let lT,uT;function lb(){return lT||(lT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ub(){return uT||(uT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NA=new WeakMap,Up=new WeakMap,DA=new WeakMap,vp=new WeakMap,bg=new WeakMap;function cb(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(fr(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&NA.set(t,n)}).catch(()=>{}),bg.set(e,n),e}function fb(n){if(Up.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Up.set(n,e)}let Lp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Up.get(n);if(e==="objectStoreNames")return n.objectStoreNames||DA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function db(n){Lp=n(Lp)}function hb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Tp(this),e,...t);return DA.set(i,e.sort?e.sort():[e]),fr(i)}:ub().includes(n)?function(...e){return n.apply(Tp(this),e),fr(NA.get(this))}:function(...e){return fr(n.apply(Tp(this),e))}}function mb(n){return typeof n=="function"?hb(n):(n instanceof IDBTransaction&&fb(n),ab(n,lb())?new Proxy(n,Lp):n)}function fr(n){if(n instanceof IDBRequest)return cb(n);if(vp.has(n))return vp.get(n);const e=mb(n);return e!==n&&(vp.set(n,e),bg.set(e,n)),e}const Tp=n=>bg.get(n);function pb(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const u=indexedDB.open(n,e),f=fr(u);return i&&u.addEventListener("upgradeneeded",h=>{i(fr(u.result),h.oldVersion,h.newVersion,fr(u.transaction),h)}),t&&u.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),f.then(h=>{a&&h.addEventListener("close",()=>a()),r&&h.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const gb=["get","getKey","getAll","getAllKeys","count"],yb=["put","add","delete","clear"],Ep=new Map;function cT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ep.get(e))return Ep.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=yb.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||gb.includes(t)))return;const a=async function(u,...f){const h=this.transaction(u,r?"readwrite":"readonly");let m=h.store;return i&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),r&&h.done]))[0]};return Ep.set(e,a),a}db(n=>({...n,get:(e,t,i)=>cT(e,t)||n.get(e,t,i),has:(e,t)=>!!cT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vb(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function vb(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kp="@firebase/app",fT="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new bA("@firebase/app"),Tb="@firebase/app-compat",Eb="@firebase/analytics-compat",Sb="@firebase/analytics",Ab="@firebase/app-check-compat",Ib="@firebase/app-check",Cb="@firebase/auth",wb="@firebase/auth-compat",Rb="@firebase/database",xb="@firebase/data-connect",bb="@firebase/database-compat",Nb="@firebase/functions",Db="@firebase/functions-compat",Mb="@firebase/installations",Vb="@firebase/installations-compat",Pb="@firebase/messaging",Ub="@firebase/messaging-compat",Lb="@firebase/performance",kb="@firebase/performance-compat",Ob="@firebase/remote-config",Fb="@firebase/remote-config-compat",Bb="@firebase/storage",Gb="@firebase/storage-compat",qb="@firebase/firestore",Hb="@firebase/ai",zb="@firebase/firestore-compat",Kb="firebase",Yb="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="[DEFAULT]",Jb={[kp]:"fire-core",[Tb]:"fire-core-compat",[Sb]:"fire-analytics",[Eb]:"fire-analytics-compat",[Ib]:"fire-app-check",[Ab]:"fire-app-check-compat",[Cb]:"fire-auth",[wb]:"fire-auth-compat",[Rb]:"fire-rtdb",[xb]:"fire-data-connect",[bb]:"fire-rtdb-compat",[Nb]:"fire-fn",[Db]:"fire-fn-compat",[Mb]:"fire-iid",[Vb]:"fire-iid-compat",[Pb]:"fire-fcm",[Ub]:"fire-fcm-compat",[Lb]:"fire-perf",[kb]:"fire-perf-compat",[Ob]:"fire-rc",[Fb]:"fire-rc-compat",[Bb]:"fire-gcs",[Gb]:"fire-gcs-compat",[qb]:"fire-fst",[zb]:"fire-fst-compat",[Hb]:"fire-vertex","fire-js":"fire-js",[Kb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Map,Qb=new Map,Fp=new Map;function dT(n,e){try{n.container.addComponent(e)}catch(t){_o.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yd(n){const e=n.name;if(Fp.has(e))return _o.debug(`There were multiple attempts to register component ${e}.`),!1;Fp.set(e,n);for(const t of gd.values())dT(t,n);for(const t of Qb.values())dT(t,n);return!0}function $b(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Xb(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dr=new xA("app","Firebase",Wb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Lu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=Yb;function MA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Op,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw dr.create("bad-app-name",{appName:String(r)});if(t||(t=AA()),!t)throw dr.create("no-options");const a=gd.get(r);if(a){if(pd(t,a.options)&&pd(i,a.config))return a;throw dr.create("duplicate-app",{appName:r})}const u=new nb(r);for(const h of Fp.values())u.addComponent(h);const f=new Zb(t,i,u);return gd.set(r,f),f}function e1(n=Op){const e=gd.get(n);if(!e&&n===Op&&AA())return MA();if(!e)throw dr.create("no-app",{appName:n});return e}function Ma(n,e,t){let i=Jb[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_o.warn(u.join(" "));return}yd(new Lu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="firebase-heartbeat-database",n1=1,ku="firebase-heartbeat-store";let Sp=null;function VA(){return Sp||(Sp=pb(t1,n1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw dr.create("idb-open",{originalErrorMessage:n.message})})),Sp}async function i1(n){try{const t=(await VA()).transaction(ku),i=await t.objectStore(ku).get(PA(n));return await t.done,i}catch(e){if(e instanceof Za)_o.warn(e.message);else{const t=dr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_o.warn(t.message)}}}async function hT(n,e){try{const i=(await VA()).transaction(ku,"readwrite");await i.objectStore(ku).put(e,PA(n)),await i.done}catch(t){if(t instanceof Za)_o.warn(t.message);else{const i=dr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_o.warn(i.message)}}}function PA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=1024,r1=30;class s1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new l1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=mT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>r1){const u=u1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){_o.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=mT(),{heartbeatsToSend:i,unsentEntries:r}=a1(this._heartbeatsCache.heartbeats),a=hd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return _o.warn(t),""}}}function mT(){return new Date().toISOString().substring(0,10)}function a1(n,e=o1){const t=[];let i=n.slice();for(const r of n){const a=t.find(u=>u.agent===r.agent);if(a){if(a.dates.push(r.date),pT(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),pT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class l1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RA()?$x().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await i1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function pT(n){return hd(JSON.stringify({version:2,heartbeats:n})).length}function u1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(n){yd(new Lu("platform-logger",e=>new _b(e),"PRIVATE")),yd(new Lu("heartbeat",e=>new s1(e),"PRIVATE")),Ma(kp,fT,n),Ma(kp,fT,"esm2020"),Ma("fire-js","")}c1("");var f1="firebase",d1="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ma(f1,d1,"app");var gT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hr,UA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,N){function D(){}D.prototype=N.prototype,x.F=N.prototype,x.prototype=new D,x.prototype.constructor=x,x.D=function(F,k,O){for(var M=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)M[Ae-2]=arguments[Ae];return N.prototype[k].apply(F,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,N,D){D||(D=0);const F=Array(16);if(typeof N=="string")for(var k=0;k<16;++k)F[k]=N.charCodeAt(D++)|N.charCodeAt(D++)<<8|N.charCodeAt(D++)<<16|N.charCodeAt(D++)<<24;else for(k=0;k<16;++k)F[k]=N[D++]|N[D++]<<8|N[D++]<<16|N[D++]<<24;N=x.g[0],D=x.g[1],k=x.g[2];let O=x.g[3],M;M=N+(O^D&(k^O))+F[0]+3614090360&4294967295,N=D+(M<<7&4294967295|M>>>25),M=O+(k^N&(D^k))+F[1]+3905402710&4294967295,O=N+(M<<12&4294967295|M>>>20),M=k+(D^O&(N^D))+F[2]+606105819&4294967295,k=O+(M<<17&4294967295|M>>>15),M=D+(N^k&(O^N))+F[3]+3250441966&4294967295,D=k+(M<<22&4294967295|M>>>10),M=N+(O^D&(k^O))+F[4]+4118548399&4294967295,N=D+(M<<7&4294967295|M>>>25),M=O+(k^N&(D^k))+F[5]+1200080426&4294967295,O=N+(M<<12&4294967295|M>>>20),M=k+(D^O&(N^D))+F[6]+2821735955&4294967295,k=O+(M<<17&4294967295|M>>>15),M=D+(N^k&(O^N))+F[7]+4249261313&4294967295,D=k+(M<<22&4294967295|M>>>10),M=N+(O^D&(k^O))+F[8]+1770035416&4294967295,N=D+(M<<7&4294967295|M>>>25),M=O+(k^N&(D^k))+F[9]+2336552879&4294967295,O=N+(M<<12&4294967295|M>>>20),M=k+(D^O&(N^D))+F[10]+4294925233&4294967295,k=O+(M<<17&4294967295|M>>>15),M=D+(N^k&(O^N))+F[11]+2304563134&4294967295,D=k+(M<<22&4294967295|M>>>10),M=N+(O^D&(k^O))+F[12]+1804603682&4294967295,N=D+(M<<7&4294967295|M>>>25),M=O+(k^N&(D^k))+F[13]+4254626195&4294967295,O=N+(M<<12&4294967295|M>>>20),M=k+(D^O&(N^D))+F[14]+2792965006&4294967295,k=O+(M<<17&4294967295|M>>>15),M=D+(N^k&(O^N))+F[15]+1236535329&4294967295,D=k+(M<<22&4294967295|M>>>10),M=N+(k^O&(D^k))+F[1]+4129170786&4294967295,N=D+(M<<5&4294967295|M>>>27),M=O+(D^k&(N^D))+F[6]+3225465664&4294967295,O=N+(M<<9&4294967295|M>>>23),M=k+(N^D&(O^N))+F[11]+643717713&4294967295,k=O+(M<<14&4294967295|M>>>18),M=D+(O^N&(k^O))+F[0]+3921069994&4294967295,D=k+(M<<20&4294967295|M>>>12),M=N+(k^O&(D^k))+F[5]+3593408605&4294967295,N=D+(M<<5&4294967295|M>>>27),M=O+(D^k&(N^D))+F[10]+38016083&4294967295,O=N+(M<<9&4294967295|M>>>23),M=k+(N^D&(O^N))+F[15]+3634488961&4294967295,k=O+(M<<14&4294967295|M>>>18),M=D+(O^N&(k^O))+F[4]+3889429448&4294967295,D=k+(M<<20&4294967295|M>>>12),M=N+(k^O&(D^k))+F[9]+568446438&4294967295,N=D+(M<<5&4294967295|M>>>27),M=O+(D^k&(N^D))+F[14]+3275163606&4294967295,O=N+(M<<9&4294967295|M>>>23),M=k+(N^D&(O^N))+F[3]+4107603335&4294967295,k=O+(M<<14&4294967295|M>>>18),M=D+(O^N&(k^O))+F[8]+1163531501&4294967295,D=k+(M<<20&4294967295|M>>>12),M=N+(k^O&(D^k))+F[13]+2850285829&4294967295,N=D+(M<<5&4294967295|M>>>27),M=O+(D^k&(N^D))+F[2]+4243563512&4294967295,O=N+(M<<9&4294967295|M>>>23),M=k+(N^D&(O^N))+F[7]+1735328473&4294967295,k=O+(M<<14&4294967295|M>>>18),M=D+(O^N&(k^O))+F[12]+2368359562&4294967295,D=k+(M<<20&4294967295|M>>>12),M=N+(D^k^O)+F[5]+4294588738&4294967295,N=D+(M<<4&4294967295|M>>>28),M=O+(N^D^k)+F[8]+2272392833&4294967295,O=N+(M<<11&4294967295|M>>>21),M=k+(O^N^D)+F[11]+1839030562&4294967295,k=O+(M<<16&4294967295|M>>>16),M=D+(k^O^N)+F[14]+4259657740&4294967295,D=k+(M<<23&4294967295|M>>>9),M=N+(D^k^O)+F[1]+2763975236&4294967295,N=D+(M<<4&4294967295|M>>>28),M=O+(N^D^k)+F[4]+1272893353&4294967295,O=N+(M<<11&4294967295|M>>>21),M=k+(O^N^D)+F[7]+4139469664&4294967295,k=O+(M<<16&4294967295|M>>>16),M=D+(k^O^N)+F[10]+3200236656&4294967295,D=k+(M<<23&4294967295|M>>>9),M=N+(D^k^O)+F[13]+681279174&4294967295,N=D+(M<<4&4294967295|M>>>28),M=O+(N^D^k)+F[0]+3936430074&4294967295,O=N+(M<<11&4294967295|M>>>21),M=k+(O^N^D)+F[3]+3572445317&4294967295,k=O+(M<<16&4294967295|M>>>16),M=D+(k^O^N)+F[6]+76029189&4294967295,D=k+(M<<23&4294967295|M>>>9),M=N+(D^k^O)+F[9]+3654602809&4294967295,N=D+(M<<4&4294967295|M>>>28),M=O+(N^D^k)+F[12]+3873151461&4294967295,O=N+(M<<11&4294967295|M>>>21),M=k+(O^N^D)+F[15]+530742520&4294967295,k=O+(M<<16&4294967295|M>>>16),M=D+(k^O^N)+F[2]+3299628645&4294967295,D=k+(M<<23&4294967295|M>>>9),M=N+(k^(D|~O))+F[0]+4096336452&4294967295,N=D+(M<<6&4294967295|M>>>26),M=O+(D^(N|~k))+F[7]+1126891415&4294967295,O=N+(M<<10&4294967295|M>>>22),M=k+(N^(O|~D))+F[14]+2878612391&4294967295,k=O+(M<<15&4294967295|M>>>17),M=D+(O^(k|~N))+F[5]+4237533241&4294967295,D=k+(M<<21&4294967295|M>>>11),M=N+(k^(D|~O))+F[12]+1700485571&4294967295,N=D+(M<<6&4294967295|M>>>26),M=O+(D^(N|~k))+F[3]+2399980690&4294967295,O=N+(M<<10&4294967295|M>>>22),M=k+(N^(O|~D))+F[10]+4293915773&4294967295,k=O+(M<<15&4294967295|M>>>17),M=D+(O^(k|~N))+F[1]+2240044497&4294967295,D=k+(M<<21&4294967295|M>>>11),M=N+(k^(D|~O))+F[8]+1873313359&4294967295,N=D+(M<<6&4294967295|M>>>26),M=O+(D^(N|~k))+F[15]+4264355552&4294967295,O=N+(M<<10&4294967295|M>>>22),M=k+(N^(O|~D))+F[6]+2734768916&4294967295,k=O+(M<<15&4294967295|M>>>17),M=D+(O^(k|~N))+F[13]+1309151649&4294967295,D=k+(M<<21&4294967295|M>>>11),M=N+(k^(D|~O))+F[4]+4149444226&4294967295,N=D+(M<<6&4294967295|M>>>26),M=O+(D^(N|~k))+F[11]+3174756917&4294967295,O=N+(M<<10&4294967295|M>>>22),M=k+(N^(O|~D))+F[2]+718787259&4294967295,k=O+(M<<15&4294967295|M>>>17),M=D+(O^(k|~N))+F[9]+3951481745&4294967295,x.g[0]=x.g[0]+N&4294967295,x.g[1]=x.g[1]+(k+(M<<21&4294967295|M>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+O&4294967295}i.prototype.v=function(x,N){N===void 0&&(N=x.length);const D=N-this.blockSize,F=this.C;let k=this.h,O=0;for(;O<N;){if(k==0)for(;O<=D;)r(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<N;)if(F[k++]=x.charCodeAt(O++),k==this.blockSize){r(this,F),k=0;break}}else for(;O<N;)if(F[k++]=x[O++],k==this.blockSize){r(this,F),k=0;break}}this.h=k,this.o+=N},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var N=1;N<x.length-8;++N)x[N]=0;N=this.o*8;for(var D=x.length-8;D<x.length;++D)x[D]=N&255,N/=256;for(this.v(x),x=Array(16),N=0,D=0;D<4;++D)for(let F=0;F<32;F+=8)x[N++]=this.g[D]>>>F&255;return x};function a(x,N){var D=f;return Object.prototype.hasOwnProperty.call(D,x)?D[x]:D[x]=N(x)}function u(x,N){this.h=N;const D=[];let F=!0;for(let k=x.length-1;k>=0;k--){const O=x[k]|0;F&&O==N||(D[k]=O,F=!1)}this.g=D}var f={};function h(x){return-128<=x&&x<128?a(x,function(N){return new u([N|0],N<0?-1:0)}):new u([x|0],x<0?-1:0)}function m(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return P(m(-x));const N=[];let D=1;for(let F=0;x>=D;F++)N[F]=x/D|0,D*=4294967296;return new u(N,0)}function _(x,N){if(x.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(x.charAt(0)=="-")return P(_(x.substring(1),N));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=m(Math.pow(N,8));let F=T;for(let O=0;O<x.length;O+=8){var k=Math.min(8,x.length-O);const M=parseInt(x.substring(O,O+k),N);k<8?(k=m(Math.pow(N,k)),F=F.j(k).add(m(M))):(F=F.j(D),F=F.add(m(M)))}return F}var T=h(0),E=h(1),w=h(16777216);n=u.prototype,n.m=function(){if(U(this))return-P(this).m();let x=0,N=1;for(let D=0;D<this.g.length;D++){const F=this.i(D);x+=(F>=0?F:4294967296+F)*N,N*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(V(this))return"0";if(U(this))return"-"+P(this).toString(x);const N=m(Math.pow(x,6));var D=this;let F="";for(;;){const k=se(D,N).g;D=z(D,k.j(N));let O=((D.g.length>0?D.g[0]:D.h)>>>0).toString(x);if(D=k,V(D))return O+F;for(;O.length<6;)O="0"+O;F=O+F}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function V(x){if(x.h!=0)return!1;for(let N=0;N<x.g.length;N++)if(x.g[N]!=0)return!1;return!0}function U(x){return x.h==-1}n.l=function(x){return x=z(this,x),U(x)?-1:V(x)?0:1};function P(x){const N=x.g.length,D=[];for(let F=0;F<N;F++)D[F]=~x.g[F];return new u(D,~x.h).add(E)}n.abs=function(){return U(this)?P(this):this},n.add=function(x){const N=Math.max(this.g.length,x.g.length),D=[];let F=0;for(let k=0;k<=N;k++){let O=F+(this.i(k)&65535)+(x.i(k)&65535),M=(O>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);F=M>>>16,O&=65535,M&=65535,D[k]=M<<16|O}return new u(D,D[D.length-1]&-2147483648?-1:0)};function z(x,N){return x.add(P(N))}n.j=function(x){if(V(this)||V(x))return T;if(U(this))return U(x)?P(this).j(P(x)):P(P(this).j(x));if(U(x))return P(this.j(P(x)));if(this.l(w)<0&&x.l(w)<0)return m(this.m()*x.m());const N=this.g.length+x.g.length,D=[];for(var F=0;F<2*N;F++)D[F]=0;for(F=0;F<this.g.length;F++)for(let k=0;k<x.g.length;k++){const O=this.i(F)>>>16,M=this.i(F)&65535,Ae=x.i(k)>>>16,Ze=x.i(k)&65535;D[2*F+2*k]+=M*Ze,j(D,2*F+2*k),D[2*F+2*k+1]+=O*Ze,j(D,2*F+2*k+1),D[2*F+2*k+1]+=M*Ae,j(D,2*F+2*k+1),D[2*F+2*k+2]+=O*Ae,j(D,2*F+2*k+2)}for(x=0;x<N;x++)D[x]=D[2*x+1]<<16|D[2*x];for(x=N;x<2*N;x++)D[x]=0;return new u(D,0)};function j(x,N){for(;(x[N]&65535)!=x[N];)x[N+1]+=x[N]>>>16,x[N]&=65535,N++}function $(x,N){this.g=x,this.h=N}function se(x,N){if(V(N))throw Error("division by zero");if(V(x))return new $(T,T);if(U(x))return N=se(P(x),N),new $(P(N.g),P(N.h));if(U(N))return N=se(x,P(N)),new $(P(N.g),N.h);if(x.g.length>30){if(U(x)||U(N))throw Error("slowDivide_ only works with positive integers.");for(var D=E,F=N;F.l(x)<=0;)D=X(D),F=X(F);var k=le(D,1),O=le(F,1);for(F=le(F,2),D=le(D,2);!V(F);){var M=O.add(F);M.l(x)<=0&&(k=k.add(D),O=M),F=le(F,1),D=le(D,1)}return N=z(x,k.j(N)),new $(k,N)}for(k=T;x.l(N)>=0;){for(D=Math.max(1,Math.floor(x.m()/N.m())),F=Math.ceil(Math.log(D)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),O=m(D),M=O.j(N);U(M)||M.l(x)>0;)D-=F,O=m(D),M=O.j(N);V(O)&&(O=E),k=k.add(O),x=z(x,M)}return new $(k,x)}n.B=function(x){return se(this,x).h},n.and=function(x){const N=Math.max(this.g.length,x.g.length),D=[];for(let F=0;F<N;F++)D[F]=this.i(F)&x.i(F);return new u(D,this.h&x.h)},n.or=function(x){const N=Math.max(this.g.length,x.g.length),D=[];for(let F=0;F<N;F++)D[F]=this.i(F)|x.i(F);return new u(D,this.h|x.h)},n.xor=function(x){const N=Math.max(this.g.length,x.g.length),D=[];for(let F=0;F<N;F++)D[F]=this.i(F)^x.i(F);return new u(D,this.h^x.h)};function X(x){const N=x.g.length+1,D=[];for(let F=0;F<N;F++)D[F]=x.i(F)<<1|x.i(F-1)>>>31;return new u(D,x.h)}function le(x,N){const D=N>>5;N%=32;const F=x.g.length-D,k=[];for(let O=0;O<F;O++)k[O]=N>0?x.i(O+D)>>>N|x.i(O+D+1)<<32-N:x.i(O+D);return new u(k,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,UA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,hr=u}).apply(typeof gT<"u"?gT:typeof self<"u"?self:typeof window<"u"?window:{});var Of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LA,Eu,kA,Zf,Bp,OA,FA,BA;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Of=="object"&&Of];for(var S=0;S<g.length;++S){var I=g[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=t(this);function r(g,S){if(S)e:{var I=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var K=g[b];if(!(K in I))break e;I=I[K]}g=g[g.length-1],b=I[g],S=S(b),S!=b&&S!=null&&e(I,g,{configurable:!0,writable:!0,value:S})}}r("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(g){return g||function(S){var I=[],b;for(b in S)Object.prototype.hasOwnProperty.call(S,b)&&I.push([b,S[b]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function f(g){var S=typeof g;return S=="object"&&g!=null||S=="function"}function h(g,S,I){return g.call.apply(g.bind,arguments)}function m(g,S,I){return m=h,m.apply(null,arguments)}function _(g,S){var I=Array.prototype.slice.call(arguments,1);return function(){var b=I.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function T(g,S){function I(){}I.prototype=S.prototype,g.Z=S.prototype,g.prototype=new I,g.prototype.constructor=g,g.Ob=function(b,K,W){for(var ue=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ue[Ne-2]=arguments[Ne];return S.prototype[K].apply(b,ue)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function w(g){const S=g.length;if(S>0){const I=Array(S);for(let b=0;b<S;b++)I[b]=g[b];return I}return[]}function V(g,S){for(let b=1;b<arguments.length;b++){const K=arguments[b];var I=typeof K;if(I=I!="object"?I:K?Array.isArray(K)?"array":I:"null",I=="array"||I=="object"&&typeof K.length=="number"){I=g.length||0;const W=K.length||0;g.length=I+W;for(let ue=0;ue<W;ue++)g[I+ue]=K[ue]}else g.push(K)}}class U{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function P(g){u.setTimeout(()=>{throw g},0)}function z(){var g=x;let S=null;return g.g&&(S=g.g,g.g=g.g.next,g.g||(g.h=null),S.next=null),S}class j{constructor(){this.h=this.g=null}add(S,I){const b=$.get();b.set(S,I),this.h?this.h.next=b:this.g=b,this.h=b}}var $=new U(()=>new se,g=>g.reset());class se{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let X,le=!1,x=new j,N=()=>{const g=Promise.resolve(void 0);X=()=>{g.then(D)}};function D(){for(var g;g=z();){try{g.h.call(g.g)}catch(I){P(I)}var S=$;S.j(g),S.h<100&&(S.h++,g.next=S.g,S.g=g)}le=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,S){this.type=g,this.g=this.target=S,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,S=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const I=()=>{};u.addEventListener("test",I,S),u.removeEventListener("test",I,S)}catch{}return g})();function M(g){return/^[\s\xa0]*$/.test(g)}function Ae(g,S){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,S)}T(Ae,k),Ae.prototype.init=function(g,S){const I=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=S,S=g.relatedTarget,S||(I=="mouseover"?S=g.fromElement:I=="mouseout"&&(S=g.toElement)),this.relatedTarget=S,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ze="closure_listenable_"+(Math.random()*1e6|0),ee=0;function fe(g,S,I,b,K){this.listener=g,this.proxy=null,this.src=S,this.type=I,this.capture=!!b,this.ha=K,this.key=++ee,this.da=this.fa=!1}function _e(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Le(g,S,I){for(const b in g)S.call(I,g[b],b,g)}function je(g,S){for(const I in g)S.call(void 0,g[I],I,g)}function G(g){const S={};for(const I in g)S[I]=g[I];return S}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(g,S){let I,b;for(let K=1;K<arguments.length;K++){b=arguments[K];for(I in b)g[I]=b[I];for(let W=0;W<re.length;W++)I=re[W],Object.prototype.hasOwnProperty.call(b,I)&&(g[I]=b[I])}}function pe(g){this.src=g,this.g={},this.h=0}pe.prototype.add=function(g,S,I,b,K){const W=g.toString();g=this.g[W],g||(g=this.g[W]=[],this.h++);const ue=Me(g,S,b,K);return ue>-1?(S=g[ue],I||(S.fa=!1)):(S=new fe(S,this.src,W,!!b,K),S.fa=I,g.push(S)),S};function Ce(g,S){const I=S.type;if(I in g.g){var b=g.g[I],K=Array.prototype.indexOf.call(b,S,void 0),W;(W=K>=0)&&Array.prototype.splice.call(b,K,1),W&&(_e(S),g.g[I].length==0&&(delete g.g[I],g.h--))}}function Me(g,S,I,b){for(let K=0;K<g.length;++K){const W=g[K];if(!W.da&&W.listener==S&&W.capture==!!I&&W.ha==b)return K}return-1}var He="closure_lm_"+(Math.random()*1e6|0),Bt={};function ht(g,S,I,b,K){if(Array.isArray(S)){for(let W=0;W<S.length;W++)ht(g,S[W],I,b,K);return null}return I=ll(I),g&&g[Ze]?g.J(S,I,f(b)?!!b.capture:!1,K):Ir(g,S,I,!1,b,K)}function Ir(g,S,I,b,K,W){if(!S)throw Error("Invalid event type");const ue=f(K)?!!K.capture:!!K;let Ne=Cr(g);if(Ne||(g[He]=Ne=new pe(g)),I=Ne.add(S,I,b,ue,W),I.proxy)return I;if(b=Rs(),I.proxy=b,b.src=g,b.listener=I,g.addEventListener)O||(K=ue),K===void 0&&(K=!1),g.addEventListener(S.toString(),b,K);else if(g.attachEvent)g.attachEvent(Ei(S.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Rs(){function g(I){return S.call(g.src,g.listener,I)}const S=sl;return g}function xs(g,S,I,b,K){if(Array.isArray(S))for(var W=0;W<S.length;W++)xs(g,S[W],I,b,K);else b=f(b)?!!b.capture:!!b,I=ll(I),g&&g[Ze]?(g=g.i,W=String(S).toString(),W in g.g&&(S=g.g[W],I=Me(S,I,b,K),I>-1&&(_e(S[I]),Array.prototype.splice.call(S,I,1),S.length==0&&(delete g.g[W],g.h--)))):g&&(g=Cr(g))&&(S=g.g[S.toString()],g=-1,S&&(g=Me(S,I,b,K)),(I=g>-1?S[g]:null)&&bs(I))}function bs(g){if(typeof g!="number"&&g&&!g.da){var S=g.src;if(S&&S[Ze])Ce(S.i,g);else{var I=g.type,b=g.proxy;S.removeEventListener?S.removeEventListener(I,b,g.capture):S.detachEvent?S.detachEvent(Ei(I),b):S.addListener&&S.removeListener&&S.removeListener(b),(I=Cr(S))?(Ce(I,g),I.h==0&&(I.src=null,S[He]=null)):_e(g)}}}function Ei(g){return g in Bt?Bt[g]:Bt[g]="on"+g}function sl(g,S){if(g.da)g=!0;else{S=new Ae(S,this);const I=g.listener,b=g.ha||g.src;g.fa&&bs(g),g=I.call(b,S)}return g}function Cr(g){return g=g[He],g instanceof pe?g:null}var al="__closure_events_fn_"+(Math.random()*1e9>>>0);function ll(g){return typeof g=="function"?g:(g[al]||(g[al]=function(S){return g.handleEvent(S)}),g[al])}function Rt(){F.call(this),this.i=new pe(this),this.M=this,this.G=null}T(Rt,F),Rt.prototype[Ze]=!0,Rt.prototype.removeEventListener=function(g,S,I,b){xs(this,g,S,I,b)};function Gt(g,S){var I,b=g.G;if(b)for(I=[];b;b=b.G)I.push(b);if(g=g.M,b=S.type||S,typeof S=="string")S=new k(S,g);else if(S instanceof k)S.target=S.target||g;else{var K=S;S=new k(b,g),he(S,K)}K=!0;let W,ue;if(I)for(ue=I.length-1;ue>=0;ue--)W=S.g=I[ue],K=wo(W,b,!0,S)&&K;if(W=S.g=g,K=wo(W,b,!0,S)&&K,K=wo(W,b,!1,S)&&K,I)for(ue=0;ue<I.length;ue++)W=S.g=I[ue],K=wo(W,b,!1,S)&&K}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var g=this.i;for(const S in g.g){const I=g.g[S];for(let b=0;b<I.length;b++)_e(I[b]);delete g.g[S],g.h--}}this.G=null},Rt.prototype.J=function(g,S,I,b){return this.i.add(String(g),S,!1,I,b)},Rt.prototype.K=function(g,S,I,b){return this.i.add(String(g),S,!0,I,b)};function wo(g,S,I,b){if(S=g.i.g[String(S)],!S)return!0;S=S.concat();let K=!0;for(let W=0;W<S.length;++W){const ue=S[W];if(ue&&!ue.da&&ue.capture==I){const Ne=ue.listener,At=ue.ha||ue.src;ue.fa&&Ce(g.i,ue),K=Ne.call(At,b)!==!1&&K}}return K&&!b.defaultPrevented}function ph(g,S){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=m(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(g,S||0)}function lc(g){g.g=ph(()=>{g.g=null,g.i&&(g.i=!1,lc(g))},g.l);const S=g.h;g.h=null,g.m.apply(null,S)}class cn extends F{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:lc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(g){F.call(this),this.h=g,this.g={}}T(wr,F);var ul=[];function cl(g){Le(g.g,function(S,I){this.g.hasOwnProperty(I)&&bs(S)},g),g.g={}}wr.prototype.N=function(){wr.Z.N.call(this),cl(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ro=u.JSON.stringify,gh=u.JSON.parse,uc=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function cc(){}function fc(){}var oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){k.call(this,"d")}T($t,k);function Fn(){k.call(this,"c")}T(Fn,k);var St={},dc=null;function Ns(){return dc=dc||new Rt}St.Ia="serverreachability";function hc(g){k.call(this,St.Ia,g)}T(hc,k);function Si(g){const S=Ns();Gt(S,new hc(S))}St.STAT_EVENT="statevent";function Rr(g,S){k.call(this,St.STAT_EVENT,g),this.stat=S}T(Rr,k);function xt(g){const S=Ns();Gt(S,new Rr(S,g))}St.Ja="timingevent";function Ai(g,S){k.call(this,St.Ja,g),this.size=S}T(Ai,k);function Ii(g,S){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},S)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function yh(g,S,I,b,K,W){g.info(function(){if(g.g)if(W){var ue="",Ne=W.split("&");for(let $e=0;$e<Ne.length;$e++){var At=Ne[$e].split("=");if(At.length>1){const mt=At[0];At=At[1];const Hn=mt.split("_");ue=Hn.length>=2&&Hn[1]=="type"?ue+(mt+"="+At+"&"):ue+(mt+"=redacted&")}}}else ue=null;else ue=W;return"XMLHTTP REQ ("+b+") [attempt "+K+"]: "+S+`
`+I+`
`+ue})}function mc(g,S,I,b,K,W,ue){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+K+"]: "+S+`
`+I+`
`+W+" "+ue})}function Ci(g,S,I,b){g.info(function(){return"XMLHTTP TEXT ("+S+"): "+_h(g,I)+(b?" "+b:"")})}function xr(g,S){g.info(function(){return"TIMEOUT: "+S})}ri.prototype.info=function(){};function _h(g,S){if(!g.g)return S;if(!S)return null;try{const W=JSON.parse(S);if(W){for(g=0;g<W.length;g++)if(Array.isArray(W[g])){var I=W[g];if(!(I.length<2)){var b=I[1];if(Array.isArray(b)&&!(b.length<1)){var K=b[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ue=1;ue<b.length;ue++)b[ue]=""}}}}return Ro(W)}catch{return S}}var br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},dl;function Nr(){}T(Nr,cc),Nr.prototype.g=function(){return new XMLHttpRequest},dl=new Nr;function Xi(g){return encodeURIComponent(String(g))}function pc(g){var S=1;g=g.split(":");const I=[];for(;S>0&&g.length;)I.push(g.shift()),S--;return g.length&&I.push(g.join(":")),I}function si(g,S,I,b){this.j=g,this.i=S,this.l=I,this.S=b||1,this.V=new wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}var bt={},zt={};function wi(g,S,I){g.M=1,g.A=Dr(Dt(S)),g.u=I,g.R=!0,Ds(g,null)}function Ds(g,S){g.F=Date.now(),Ri(g),g.B=Dt(g.A);var I=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),Us(I.i,"t",b),g.C=0,I=g.j.L,g.h=new ai,g.g=Nc(g.j,I?S:null,!g.u),g.P>0&&(g.O=new cn(m(g.Y,g,g.g),g.P)),S=g.V,I=g.g,b=g.ba;var K="readystatechange";Array.isArray(K)||(K&&(ul[0]=K.toString()),K=ul);for(let W=0;W<K.length;W++){const ue=ht(I,K[W],b||S.handleEvent,!1,S.h||S);if(!ue)break;S.g[ue.key]=ue}S=g.J?G(g.J):{},g.u?(g.v||(g.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,S)):(g.v="GET",g.g.ea(g.B,g.v,null,S)),Si(),yh(g.i,g.v,g.B,g.l,g.S,g.u)}si.prototype.ba=function(g){g=g.target;const S=this.O;S&&ci(g)==3?S.j():this.Y(g)},si.prototype.Y=function(g){try{if(g==this.g)e:{const Ne=ci(this.g),At=this.g.ya(),$e=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Xt(this.g)))){this.K||Ne!=4||At==7||(At==8||$e<=0?Si(3):Si(2)),xi(this);var S=this.g.ca();this.X=S;var I=vh(this);if(this.o=S==200,mc(this.i,this.v,this.B,this.l,this.S,Ne,S),this.o){if(this.U&&!this.L){t:{if(this.g){var b,K=this.g;if((b=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(b)){var W=b;break t}}W=null}if(g=W)Ci(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bi(this,g);else{this.o=!1,this.m=3,xt(12),wn(this),Bn(this);break e}}if(this.R){g=!0;let mt;for(;!this.K&&this.C<I.length;)if(mt=yc(this,I),mt==zt){Ne==4&&(this.m=4,xt(14),g=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==bt){this.m=4,xt(15),Ci(this.i,this.l,I,"[Invalid Chunk]"),g=!1;break}else Ci(this.i,this.l,mt,null),bi(this,mt);if(gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||I.length!=0||this.h.h||(this.m=1,xt(16),g=!1),this.o=this.o&&g,!g)Ci(this.i,this.l,I,"[Invalid Chunked Response]"),wn(this),Bn(this);else if(I.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Rl(ue),ue.P=!0,xt(11))}}else Ci(this.i,this.l,I,null),bi(this,I);Ne==4&&wn(this),this.o&&!this.K&&(Ne==4?wc(this.j,this):(this.o=!1,Ri(this)))}else Zi(this.g),S==400&&I.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),wn(this),Bn(this)}}}catch{}finally{}};function vh(g){if(!gc(g))return g.g.la();const S=Xt(g.g);if(S==="")return"";let I="";const b=S.length,K=ci(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return wn(g),Bn(g),"";g.h.i=new u.TextDecoder}for(let W=0;W<b;W++)g.h.h=!0,I+=g.h.i.decode(S[W],{stream:!(K&&W==b-1)});return S.length=0,g.h.g+=I,g.C=0,g.h.g}function gc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function yc(g,S){var I=g.C,b=S.indexOf(`
`,I);return b==-1?zt:(I=Number(S.substring(I,b)),isNaN(I)?bt:(b+=1,b+I>S.length?zt:(S=S.slice(b,b+I),g.C=b+I,S)))}si.prototype.cancel=function(){this.K=!0,wn(this)};function Ri(g){g.T=Date.now()+g.H,Ms(g,g.H)}function Ms(g,S){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Ii(m(g.aa,g),S)}function xi(g){g.D&&(u.clearTimeout(g.D),g.D=null)}si.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(xr(this.i,this.B),this.M!=2&&(Si(),xt(17)),wn(this),this.m=2,Bn(this)):Ms(this,this.T-g)};function Bn(g){g.j.I==0||g.K||wc(g.j,g)}function wn(g){xi(g);var S=g.O;S&&typeof S.dispose=="function"&&S.dispose(),g.O=null,cl(g.V),g.g&&(S=g.g,g.g=null,S.abort(),S.dispose())}function bi(g,S){try{var I=g.j;if(I.I!=0&&(I.g==g||Di(I.h,g))){if(!g.L&&Di(I.h,g)&&I.I==3){try{var b=I.Ba.g.parse(S)}catch{b=null}if(Array.isArray(b)&&b.length==3){var K=b;if(K[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<g.F)Bs(I),Uo(I);else break e;Or(I),xt(18)}}else I.xa=K[1],0<I.xa-I.K&&K[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=Ii(m(I.Va,I),6e3));Ni(I.h)<=1&&I.ta&&(I.ta=void 0)}else ki(I,11)}else if((g.L||I.g==g)&&Bs(I),!M(S))for(K=I.Ba.g.parse(S),S=0;S<K.length;S++){let $e=K[S];const mt=$e[0];if(!(mt<=I.K))if(I.K=mt,$e=$e[1],I.I==2)if($e[0]=="c"){I.M=$e[1],I.ba=$e[2];const Hn=$e[3];Hn!=null&&(I.ka=Hn,I.j.info("VER="+I.ka));const Oi=$e[4];Oi!=null&&(I.za=Oi,I.j.info("SVER="+I.za));const fi=$e[5];fi!=null&&typeof fi=="number"&&fi>0&&(b=1.5*fi,I.O=b,I.j.info("backChannelRequestTimeoutMs_="+b)),b=I;const di=g.g;if(di){const Fr=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fr){var W=b.h;W.g||Fr.indexOf("spdy")==-1&&Fr.indexOf("quic")==-1&&Fr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(pl(W,W.h),W.h=null))}if(b.G){const Gs=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;Gs&&(b.wa=Gs,et(b.J,b.G,Gs))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-g.F,I.j.info("Handshake RTT: "+I.T+"ms")),b=I;var ue=g;if(b.na=bc(b,b.L?b.ba:null,b.W),ue.L){gl(b.h,ue);var Ne=ue,At=b.O;At&&(Ne.H=At),Ne.D&&(xi(Ne),Ri(Ne)),b.g=ue}else Ic(b);I.i.length>0&&Li(I)}else $e[0]!="stop"&&$e[0]!="close"||ki(I,7);else I.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?ki(I,7):Cl(I):$e[0]!="noop"&&I.l&&I.l.qa($e),I.A=0)}}Si(4)}catch{}}var Nt=class{constructor(g,S){this.g=g,this.map=S}};function hl(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ml(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ni(g){return g.h?1:g.g?g.g.size:0}function Di(g,S){return g.h?g.h==S:g.g?g.g.has(S):!1}function pl(g,S){g.g?g.g.add(S):g.h=S}function gl(g,S){g.h&&g.h==S?g.h=null:g.g&&g.g.has(S)&&g.g.delete(S)}hl.prototype.cancel=function(){if(this.i=yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function yl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let S=g.i;for(const I of g.g.values())S=S.concat(I.G);return S}return w(g.i)}var _c=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vs(g,S){if(g){g=g.split("&");for(let I=0;I<g.length;I++){const b=g[I].indexOf("=");let K,W=null;b>=0?(K=g[I].substring(0,b),W=g[I].substring(b+1)):K=g[I],S(K,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Rn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;g instanceof Rn?(this.l=g.l,Kt(this,g.j),this.o=g.o,this.g=g.g,xo(this,g.u),this.h=g.h,_l(this,Sc(g.i)),this.m=g.m):g&&(S=String(g).match(_c))?(this.l=!1,Kt(this,S[1]||"",!0),this.o=Mi(S[2]||""),this.g=Mi(S[3]||"",!0),xo(this,S[4]),this.h=Mi(S[5]||"",!0),_l(this,S[6]||"",!0),this.m=Mi(S[7]||"")):(this.l=!1,this.i=new No(null,this.l))}Rn.prototype.toString=function(){const g=[];var S=this.j;S&&g.push(Mr(S,Ps,!0),":");var I=this.g;return(I||S=="file")&&(g.push("//"),(S=this.o)&&g.push(Mr(S,Ps,!0),"@"),g.push(Xi(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&g.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&g.push("/"),g.push(Mr(I,I.charAt(0)=="/"?vl:vc,!0))),(I=this.i.toString())&&g.push("?",I),(I=this.m)&&g.push("#",Mr(I,Tc)),g.join("")},Rn.prototype.resolve=function(g){const S=Dt(this);let I=!!g.j;I?Kt(S,g.j):I=!!g.o,I?S.o=g.o:I=!!g.g,I?S.g=g.g:I=g.u!=null;var b=g.h;if(I)xo(S,g.u);else if(I=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var K=S.h.lastIndexOf("/");K!=-1&&(b=S.h.slice(0,K+1)+b)}if(K=b,K==".."||K==".")b="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){b=K.lastIndexOf("/",0)==0,K=K.split("/");const W=[];for(let ue=0;ue<K.length;){const Ne=K[ue++];Ne=="."?b&&ue==K.length&&W.push(""):Ne==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),b&&ue==K.length&&W.push("")):(W.push(Ne),b=!0)}b=W.join("/")}else b=K}return I?S.h=b:I=g.i.toString()!=="",I?_l(S,Sc(g.i)):I=!!g.m,I&&(S.m=g.m),S};function Dt(g){return new Rn(g)}function Kt(g,S,I){g.j=I?Mi(S,!0):S,g.j&&(g.j=g.j.replace(/:$/,""))}function xo(g,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);g.u=S}else g.u=null}function _l(g,S,I){S instanceof No?(g.i=S,Ls(g.i,g.l)):(I||(S=Mr(S,bo)),g.i=new No(S,g.l))}function et(g,S,I){g.i.set(S,I)}function Dr(g){return et(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Mi(g,S){return g?S?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Mr(g,S,I){return typeof g=="string"?(g=encodeURI(g).replace(S,_n),I&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function _n(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ps=/[#\/\?@]/g,vc=/[#\?:]/g,vl=/[#\?]/g,bo=/[#\?@]/g,Tc=/#/g;function No(g,S){this.h=this.g=null,this.i=g||null,this.j=!!S}function vn(g){g.g||(g.g=new Map,g.h=0,g.i&&Vs(g.i,function(S,I){g.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}n=No.prototype,n.add=function(g,S){vn(this),this.i=null,g=Do(this,g);let I=this.g.get(g);return I||this.g.set(g,I=[]),I.push(S),this.h+=1,this};function Ec(g,S){vn(g),S=Do(g,S),g.g.has(S)&&(g.i=null,g.h-=g.g.get(S).length,g.g.delete(S))}function Tl(g,S){return vn(g),S=Do(g,S),g.g.has(S)}n.forEach=function(g,S){vn(this),this.g.forEach(function(I,b){I.forEach(function(K){g.call(S,K,b,this)},this)},this)};function El(g,S){vn(g);let I=[];if(typeof S=="string")Tl(g,S)&&(I=I.concat(g.g.get(Do(g,S))));else for(g=Array.from(g.g.values()),S=0;S<g.length;S++)I=I.concat(g[S]);return I}n.set=function(g,S){return vn(this),this.i=null,g=Do(this,g),Tl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[S]),this.h+=1,this},n.get=function(g,S){return g?(g=El(this,g),g.length>0?String(g[0]):S):S};function Us(g,S,I){Ec(g,S),I.length>0&&(g.i=null,g.g.set(Do(g,S),w(I)),g.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],S=Array.from(this.g.keys());for(let b=0;b<S.length;b++){var I=S[b];const K=Xi(I);I=El(this,I);for(let W=0;W<I.length;W++){let ue=K;I[W]!==""&&(ue+="="+Xi(I[W])),g.push(ue)}}return this.i=g.join("&")};function Sc(g){const S=new No;return S.i=g.i,g.g&&(S.g=new Map(g.g),S.h=g.h),S}function Do(g,S){return S=String(S),g.j&&(S=S.toLowerCase()),S}function Ls(g,S){S&&!g.j&&(vn(g),g.i=null,g.g.forEach(function(I,b){const K=b.toLowerCase();b!=K&&(Ec(this,b),Us(this,K,I))},g)),g.j=S}function li(g,S){const I=new ri;if(u.Image){const b=new Image;b.onload=_(Gn,I,"TestLoadImage: loaded",!0,S,b),b.onerror=_(Gn,I,"TestLoadImage: error",!1,S,b),b.onabort=_(Gn,I,"TestLoadImage: abort",!1,S,b),b.ontimeout=_(Gn,I,"TestLoadImage: timeout",!1,S,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else S(!1)}function Sl(g,S){const I=new ri,b=new AbortController,K=setTimeout(()=>{b.abort(),Gn(I,"TestPingServer: timeout",!1,S)},1e4);fetch(g,{signal:b.signal}).then(W=>{clearTimeout(K),W.ok?Gn(I,"TestPingServer: ok",!0,S):Gn(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(K),Gn(I,"TestPingServer: error",!1,S)})}function Gn(g,S,I,b,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),b(I)}catch{}}function Mo(){this.g=new uc}function Vi(g){this.i=g.Sb||null,this.h=g.ab||!1}T(Vi,cc),Vi.prototype.g=function(){return new Vr(this.i,this.h)};function Vr(g,S){Rt.call(this),this.H=g,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Vr,Rt),n=Vr.prototype,n.open=function(g,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=S,this.readyState=1,ui(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(S.body=g),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vo(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ks(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function ks(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var S=g.value?g.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!g.done}))&&(this.response=this.responseText+=S)}g.done?Vo(this):ui(this),this.readyState==3&&ks(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Vo(this))},n.Na=function(g){this.g&&(this.response=g,Vo(this))},n.ga=function(){this.g&&Vo(this)};function Vo(g){g.readyState=4,g.l=null,g.j=null,g.B=null,ui(g)}n.setRequestHeader=function(g,S){this.A.append(g,S)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,g.push(I[0]+": "+I[1]),I=S.next();return g.join(`\r
`)};function ui(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Vr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function qn(g){let S="";return Le(g,function(I,b){S+=b,S+=":",S+=I,S+=`\r
`}),S}function Pr(g,S,I){e:{for(b in I){var b=!1;break e}b=!0}b||(I=qn(I),typeof g=="string"?I!=null&&Xi(I):et(g,S,I))}function st(g){Rt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(st,Rt);var Pi=/^https?$/i,Al=["POST","PUT"];n=st.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,S,I,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);S=S?S.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():dl.g(),this.g.onreadystatechange=E(m(this.Ca,this));try{this.B=!0,this.g.open(S,String(g),!0),this.B=!1}catch(W){Ur(this,W);return}if(g=I||"",I=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var K in b)I.set(K,b[K]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const W of b.keys())I.set(W,b.get(W));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(I.keys()).find(W=>W.toLowerCase()=="content-type"),K=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(Al,S,void 0)>=0)||b||K||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ue]of I)this.g.setRequestHeader(W,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(W){Ur(this,W)}};function Ur(g,S){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=S,g.o=5,Il(g),Wi(g)}function Il(g){g.A||(g.A=!0,Gt(g,"complete"),Gt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Gt(this,"complete"),Gt(this,"abort"),Wi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wi(this,!0)),st.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Lr(this):this.Xa())},n.Xa=function(){Lr(this)};function Lr(g){if(g.h&&typeof a<"u"){if(g.v&&ci(g)==4)setTimeout(g.Ca.bind(g),0);else if(Gt(g,"readystatechange"),ci(g)==4){g.h=!1;try{const W=g.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var b;if(b=W===0){let ue=String(g.D).match(_c)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),b=!Pi.test(ue?ue.toLowerCase():"")}I=b}if(I)Gt(g,"complete"),Gt(g,"success");else{g.o=6;try{var K=ci(g)>2?g.g.statusText:""}catch{K=""}g.l=K+" ["+g.ca()+"]",Il(g)}}finally{Wi(g)}}}}function Wi(g,S){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const I=g.g;g.g=null,S||Gt(g,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ci(g){return g.g?g.g.readyState:0}n.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var S=this.g.responseText;return g&&S.indexOf(g)==0&&(S=S.substring(g.length)),gh(S)}};function Xt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Zi(g){const S={};g=(g.g&&ci(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(M(g[b]))continue;var I=pc(g[b]);const K=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const W=S[K]||[];S[K]=W,W.push(I)}je(S,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(g,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[g]||S}function Po(g){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ui("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ui("baseRetryDelayMs",5e3,g),this.Za=Ui("retryDelaySeedMs",1e4,g),this.Ta=Ui("forwardChannelMaxRetries",2,g),this.va=Ui("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new hl(g&&g.concurrentRequestLimit),this.Ba=new Mo,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Po.prototype,n.ka=8,n.I=1,n.connect=function(g,S,I,b){xt(0),this.W=g,this.H=S||{},I&&b!==void 0&&(this.H.OSID=I,this.H.OAID=b),this.F=this.X,this.J=bc(this,null,this.W),Li(this)};function Cl(g){if(Os(g),g.I==3){var S=g.V++,I=Dt(g.J);if(et(I,"SID",g.M),et(I,"RID",S),et(I,"TYPE","terminate"),kr(g,I),S=new si(g,g.j,S),S.M=2,S.A=Dr(Dt(I)),I=!1,u.navigator&&u.navigator.sendBeacon)try{I=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!I&&u.Image&&(new Image().src=S.A,I=!0),I||(S.g=Nc(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Ri(S)}xc(g)}function Uo(g){g.g&&(Rl(g),g.g.cancel(),g.g=null)}function Os(g){Uo(g),g.v&&(u.clearTimeout(g.v),g.v=null),Bs(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Li(g){if(!ml(g.h)&&!g.m){g.m=!0;var S=g.Ea;X||N(),le||(X(),le=!0),x.add(S,g),g.D=0}}function Fs(g,S){return Ni(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=S.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Ii(m(g.Ea,g,S),Rc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const K=new si(this,this.j,g);let W=this.o;if(this.U&&(W?(W=G(W),he(W,this.U)):W=this.U),this.u!==null||this.R||(K.J=W,W=null),this.S)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var b=this.i[I];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(S+=b,S>4096){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=Ac(this,K,S),I=Dt(this.J),et(I,"RID",g),et(I,"CVER",22),this.G&&et(I,"X-HTTP-Session-Id",this.G),kr(this,I),W&&(this.R?S="headers="+Xi(qn(W))+"&"+S:this.u&&Pr(I,this.u,W)),pl(this.h,K),this.Ra&&et(I,"TYPE","init"),this.S?(et(I,"$req",S),et(I,"SID","null"),K.U=!0,wi(K,I,null)):wi(K,I,S),this.I=2}}else this.I==3&&(g?wl(this,g):this.i.length==0||ml(this.h)||wl(this))};function wl(g,S){var I;S?I=S.l:I=g.V++;const b=Dt(g.J);et(b,"SID",g.M),et(b,"RID",I),et(b,"AID",g.K),kr(g,b),g.u&&g.o&&Pr(b,g.u,g.o),I=new si(g,g.j,I,g.D+1),g.u===null&&(I.J=g.o),S&&(g.i=S.G.concat(g.i)),S=Ac(g,I,1e3),I.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),pl(g.h,I),wi(I,b,S)}function kr(g,S){g.H&&Le(g.H,function(I,b){et(S,b,I)}),g.l&&Le({},function(I,b){et(S,b,I)})}function Ac(g,S,I){I=Math.min(g.i.length,I);const b=g.l?m(g.l.Ka,g.l,g):null;e:{var K=g.i;let Ne=-1;for(;;){const At=["count="+I];Ne==-1?I>0?(Ne=K[0].g,At.push("ofs="+Ne)):Ne=0:At.push("ofs="+Ne);let $e=!0;for(let mt=0;mt<I;mt++){var W=K[mt].g;const Hn=K[mt].map;if(W-=Ne,W<0)Ne=Math.max(0,K[mt].g-100),$e=!1;else try{W="req"+W+"_"||"";try{var ue=Hn instanceof Map?Hn:Object.entries(Hn);for(const[Oi,fi]of ue){let di=fi;f(fi)&&(di=Ro(fi)),At.push(W+Oi+"="+encodeURIComponent(di))}}catch(Oi){throw At.push(W+"type="+encodeURIComponent("_badmap")),Oi}}catch{b&&b(Hn)}}if($e){ue=At.join("&");break e}}ue=void 0}return g=g.i.splice(0,I),S.G=g,ue}function Ic(g){if(!g.g&&!g.v){g.Y=1;var S=g.Da;X||N(),le||(X(),le=!0),x.add(S,g),g.A=0}}function Or(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Ii(m(g.Da,g),Rc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Cc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Ii(m(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Uo(this),Cc(this))};function Rl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function Cc(g){g.g=new si(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var S=Dt(g.na);et(S,"RID","rpc"),et(S,"SID",g.M),et(S,"AID",g.K),et(S,"CI",g.F?"0":"1"),!g.F&&g.ia&&et(S,"TO",g.ia),et(S,"TYPE","xmlhttp"),kr(g,S),g.u&&g.o&&Pr(S,g.u,g.o),g.O&&(g.g.H=g.O);var I=g.g;g=g.ba,I.M=1,I.A=Dr(Dt(S)),I.u=null,I.R=!0,Ds(I,g)}n.Va=function(){this.C!=null&&(this.C=null,Uo(this),Or(this),xt(19))};function Bs(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function wc(g,S){var I=null;if(g.g==S){Bs(g),Rl(g),g.g=null;var b=2}else if(Di(g.h,S))I=S.G,gl(g.h,S),b=1;else return;if(g.I!=0){if(S.o)if(b==1){I=S.u?S.u.length:0,S=Date.now()-S.F;var K=g.D;b=Ns(),Gt(b,new Ai(b,I)),Li(g)}else Ic(g);else if(K=S.m,K==3||K==0&&S.X>0||!(b==1&&Fs(g,S)||b==2&&Or(g)))switch(I&&I.length>0&&(S=g.h,S.i=S.i.concat(I)),K){case 1:ki(g,5);break;case 4:ki(g,10);break;case 3:ki(g,6);break;default:ki(g,2)}}}function Rc(g,S){let I=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(I*=2),I*S}function ki(g,S){if(g.j.info("Error code "+S),S==2){var I=m(g.bb,g),b=g.Ua;const K=!b;b=new Rn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Kt(b,"https"),Dr(b),K?li(b.toString(),I):Sl(b.toString(),I)}else xt(2);g.I=0,g.l&&g.l.pa(S),xc(g),Os(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function xc(g){if(g.I=0,g.ja=[],g.l){const S=yl(g.h);(S.length!=0||g.i.length!=0)&&(V(g.ja,S),V(g.ja,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.oa()}}function bc(g,S,I){var b=I instanceof Rn?Dt(I):new Rn(I);if(b.g!="")S&&(b.g=S+"."+b.g),xo(b,b.u);else{var K=u.location;b=K.protocol,S=S?S+"."+K.hostname:K.hostname,K=+K.port;const W=new Rn(null);b&&Kt(W,b),S&&(W.g=S),K&&xo(W,K),I&&(W.h=I),b=W}return I=g.G,S=g.wa,I&&S&&et(b,I,S),et(b,"VER",g.ka),kr(g,b),b}function Nc(g,S,I){if(S&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=g.Aa&&!g.ma?new st(new Vi({ab:I})):new st(g.ma),S.Fa(g.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dc(){}n=Dc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Lo(){}Lo.prototype.g=function(g,S){return new fn(g,S)};function fn(g,S){Rt.call(this),this.g=new Po(S),this.l=g,this.h=S&&S.messageUrlParams||null,g=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(g?g["X-WebChannel-Content-Type"]=S.messageContentType:g={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(g?g["X-WebChannel-Client-Profile"]=S.sa:g={"X-WebChannel-Client-Profile":S.sa}),this.g.U=g,(g=S&&S.Qb)&&!M(g)&&(this.g.u=g),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!M(S)&&(this.g.G=S,g=this.h,g!==null&&S in g&&(g=this.h,S in g&&delete g[S])),this.j=new ji(this)}T(fn,Rt),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Cl(this.g)},fn.prototype.o=function(g){var S=this.g;if(typeof g=="string"){var I={};I.__data__=g,g=I}else this.v&&(I={},I.__data__=Ro(g),g=I);S.i.push(new Nt(S.Ya++,g)),S.I==3&&Li(S)},fn.prototype.N=function(){this.g.l=null,delete this.j,Cl(this.g),delete this.g,fn.Z.N.call(this)};function Mc(g){$t.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var S=g.__sm__;if(S){e:{for(const I in S){g=I;break e}g=void 0}(this.i=g)&&(g=this.i,S=S!==null&&g in S?S[g]:void 0),this.data=S}else this.data=g}T(Mc,$t);function Vc(){Fn.call(this),this.status=1}T(Vc,Fn);function ji(g){this.g=g}T(ji,Dc),ji.prototype.ra=function(){Gt(this.g,"a")},ji.prototype.qa=function(g){Gt(this.g,new Mc(g))},ji.prototype.pa=function(g){Gt(this.g,new Vc)},ji.prototype.oa=function(){Gt(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,BA=function(){return new Lo},FA=function(){return Ns()},OA=St,Bp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,Zf=br,fl.COMPLETE="complete",kA=fl,fc.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,Eu=fc,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,LA=st}).apply(typeof Of<"u"?Of:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja="12.9.0";function h1(n){ja=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new bA("@firebase/firestore");function Ia(){return gs.logLevel}function ae(n,...e){if(gs.logLevel<=Ke.DEBUG){const t=e.map(Ng);gs.debug(`Firestore (${ja}): ${n}`,...t)}}function mn(n,...e){if(gs.logLevel<=Ke.ERROR){const t=e.map(Ng);gs.error(`Firestore (${ja}): ${n}`,...t)}}function gr(n,...e){if(gs.logLevel<=Ke.WARN){const t=e.map(Ng);gs.warn(`Firestore (${ja}): ${n}`,...t)}}function Ng(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,GA(n,i,t)}function GA(n,e,t){let i=`FIRESTORE (${ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw mn(i),new Error(i)}function Te(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||GA(e,r,i)}function xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Za{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class p1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class g1{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let a=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Yi,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await r(this.currentUser)}))},f=h=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>f(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?f(h):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Yi)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Te(typeof i.accessToken=="string",31837,{l:i}),new qA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class y1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class _1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new y1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xb(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);const i=a=>{a.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ae("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=T1(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Re(n,e){return n<e?-1:n>e?1:0}function Gp(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return Ap(r)===Ap(a)?Re(r,a):Ap(r)?1:-1}return Re(n.length,e.length)}const E1=55296,S1=57343;function Ap(n){const e=n.charCodeAt(0);return e>=E1&&e<=S1}function Oa(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}function HA(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="__name__";class Hi{constructor(e,t,i){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ye(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=Hi.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Re(e.length,t.length)}static compareSegments(e,t){const i=Hi.isNumericId(e),r=Hi.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Hi.extractNumericId(e).compare(Hi.extractNumericId(t)):Gp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hr.fromString(e.substring(4,e.length-2))}}class We extends Hi{construct(e,t,i){return new We(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new We(t)}static emptyPath(){return new We([])}}const A1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Hi{construct(e,t,i){return new _t(e,t,i)}static isValidIdentifier(e){return A1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_T}static keyField(){return new _t([_T])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new ce(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new ce(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ce(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else f==="`"?(u=!u,r++):f!=="."||u?(i+=f,r++):(a(),r++)}if(a(),u)throw new ce(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(t)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(We.fromString(e))}static fromName(e){return new de(We.fromString(e).popFirst(5))}static empty(){return new de(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n,e,t){if(!t)throw new ce(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function I1(n,e,t,i){if(e===!0&&i===!0)throw new ce(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vT(n){if(!de.isDocumentKey(n))throw new ce(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TT(n){if(de.isDocumentKey(n))throw new ce(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function KA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye(12329,{type:typeof n})}function Qi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gd(n);throw new ce(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Zu(n,e){if(!KA(n))throw new ce(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(r&&typeof u!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ce(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=-62135596800,ST=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ST);return new it(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ET)throw new ce(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ST}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zu(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ET;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:kt("string",it._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new it(0,0))}static max(){return new Se(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou=-1;class _d{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function qp(n){return n.fields.find((e=>e.kind===2))}function is(n){return n.fields.filter((e=>e.kind!==2))}_d.UNKNOWN_ID=-1;class jf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fu(0,On.min())}}function C1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(i===1e9?new it(t+1,0):new it(t,i));return new On(r,de.empty(),e)}function YA(n){return new On(n.readTime,n.key,Ou)}class On{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new On(Se.min(),de.empty(),Ou)}static max(){return new On(Se.max(),de.empty(),Ou)}}function Mg(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(n.documentKey,e.documentKey),t!==0?t:Re(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function As(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==JA)throw n;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,i)=>{t(e)}))}static reject(e){return new H(((t,i)=>{i(e)}))}static waitFor(e){return new H(((t,i)=>{let r=0,a=0,u=!1;e.forEach((f=>{++r,f.next((()=>{++a,u&&a===r&&t()}),(h=>i(h)))})),u=!0,a===r&&t()}))}static or(e){let t=H.resolve(!1);for(const i of e)t=t.next((r=>r?H.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new H(((i,r)=>{const a=e.length,u=new Array(a);let f=0;for(let h=0;h<a;h++){const m=h;t(e[m]).next((_=>{u[m]=_,++f,f===a&&i(u)}),(_=>r(_)))}}))}static doWhile(e,t){return new H(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="SimpleDb";class qd{static open(e,t,i,r){try{return new qd(t,e.transaction(r,i))}catch(a){throw new xu(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Yi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new xu(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=Vg(i.target.error);this.S.reject(new xu(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ae(Ln,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new R1(t)}}class mr{static delete(e){return ae(Ln,"Removing database:",e),as(SA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!RA())return!1;if(mr.F())return!0;const e=md(),t=mr.M(e),i=0<t&&t<10,r=$A(e),a=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,mr.M(md())===12.2&&mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ae(Ln,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=a=>{const u=a.target.result;t(u)},r.onblocked=()=>{i(new xu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=a=>{const u=a.target.error;u.name==="VersionError"?i(new ce(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?i(new ce(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):i(new xu(e,u))},r.onupgradeneeded=a=>{ae(Ln,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;this.N.k(u,r.transaction,a.oldVersion,this.version).next((()=>{ae(Ln,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,r){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const f=qd.open(this.db,e,a?"readonly":"readwrite",i),h=r(f).next((m=>(f.C(),m))).catch((m=>(f.abort(m),H.reject(m)))).toPromise();return h.catch((()=>{})),await f.D,h}catch(f){const h=f,m=h.name!=="FirebaseError"&&u<3;if(ae(Ln,"Transaction failed with error:",h.message,"Retrying:",m),this.close(),!m)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function $A(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class w1{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return as(this.U.delete())}}class xu extends ce{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Er(n){return n.name==="IndexedDbTransactionError"}class R1{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ae(Ln,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ae(Ln,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),as(i)}add(e){return ae(Ln,"ADD",this.store.name,e,e),as(this.store.add(e))}get(e){return as(this.store.get(e)).next((t=>(t===void 0&&(t=null),ae(Ln,"GET",this.store.name,e,t),t)))}delete(e){return ae(Ln,"DELETE",this.store.name,e),as(this.store.delete(e))}count(){return ae(Ln,"COUNT",this.store.name),as(this.store.count())}H(e,t){const i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const a=r.getAll(i.range);return new H(((u,f)=>{a.onerror=h=>{f(h.target.error)},a.onsuccess=h=>{u(h.target.result)}}))}{const a=this.cursor(i),u=[];return this.J(a,((f,h)=>{u.push(h)})).next((()=>u))}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new H(((r,a)=>{i.onerror=u=>{a(u.target.error)},i.onsuccess=u=>{r(u.target.result)}}))}X(e,t){ae(Ln,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const r=this.cursor(i);return this.J(r,((a,u,f)=>f.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.J(r,t)}te(e){const t=this.cursor({});return new H(((i,r)=>{t.onerror=a=>{const u=Vg(a.target.error);r(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next((f=>{f?u.continue():i()})):i()}}))}J(e,t){const i=[];return new H(((r,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void r();const h=new w1(f),m=t(f.primaryKey,f.value,h);if(m instanceof H){const _=m.catch((T=>(h.done(),H.reject(T))));i.push(_)}h.isDone?r():h.G===null?f.continue():f.continue(h.G)}})).next((()=>H.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function as(n){return new H(((e,t)=>{n.onsuccess=i=>{const r=i.target.result;e(r)},n.onerror=i=>{const r=Vg(i.target.error);t(r)}}))}let AT=!1;function Vg(n){const e=mr.M(md());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AT||(AT=!0,setTimeout((()=>{throw i}),0)),i}}return n}const bu="IndexBackfiller";class x1{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ae(bu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ae(bu,`Documents written: ${t}`)}catch(t){Er(t)?ae(bu,"Ignoring IndexedDB error during index backfill: ",t):await As(t)}await this.re(6e4)}))}}class b1{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let r=t,a=!0;return H.doWhile((()=>a===!0&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!i.has(u))return ae(bu,`Processing collection: ${u}`),this.oe(e,u,r).next((f=>{r-=f,i.add(u)}));a=!1})))).next((()=>t-r))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next((a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(r,a))).next((f=>(ae(bu,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>u.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((r,a)=>{const u=YA(a);Mg(u,i)>0&&(i=u)})),new On(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ei.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=-1;function Hd(n){return n==null}function Bu(n){return n===0&&1/n==-1/0}function N1(n){return typeof n=="number"&&Number.isInteger(n)&&!Bu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="";function un(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IT(e)),e=D1(n.get(t),e);return IT(e)}function D1(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case vd:t+="";break;default:t+=a}}return t}function IT(n){return n+vd+""}function zi(n){const e=n.length;if(Te(e>=2,64408,{path:n}),e===2)return Te(n.charAt(0)===vd&&n.charAt(1)==="",56145,{path:n}),We.emptyPath();const t=e-2,i=[];let r="";for(let a=0;a<e;){const u=n.indexOf(vd,a);switch((u<0||u>t)&&ye(50515,{path:n}),n.charAt(u+1)){case"":const f=n.substring(a,u);let h;r.length===0?h=f:(r+=f,h=r,r=""),i.push(h);break;case"":r+=n.substring(a,u),r+="\0";break;case"":r+=n.substring(a,u+1);break;default:ye(61167,{path:n})}a=u+2}return new We(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="remoteDocuments",ju="owner",ya="owner",Gu="mutationQueues",M1="userId",gi="mutations",CT="batchId",fs="userMutationsIndex",wT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(n,e){return[n,un(e)]}function XA(n,e,t){return[n,un(e),t]}const V1={},Fa="documentMutations",Td="remoteDocumentsV14",P1=["prefixPath","collectionGroup","readTime","documentId"],td="documentKeyIndex",U1=["prefixPath","collectionGroup","documentId"],WA="collectionGroupIndex",L1=["collectionGroup","readTime","prefixPath","documentId"],qu="remoteDocumentGlobal",Hp="remoteDocumentGlobalKey",Ba="targets",ZA="queryTargetsIndex",k1=["canonicalId","targetId"],Ga="targetDocuments",O1=["targetId","path"],Pg="documentTargetsIndex",F1=["path","targetId"],Ed="targetGlobalKey",hs="targetGlobal",Hu="collectionParents",B1=["collectionId","parent"],qa="clientMetadata",G1="clientId",zd="bundles",q1="bundleId",Kd="namedQueries",H1="name",Ug="indexConfiguration",z1="indexId",zp="collectionGroupIndex",K1="collectionGroup",Nu="indexState",Y1=["indexId","uid"],jA="sequenceNumberIndex",J1=["uid","sequenceNumber"],Du="indexEntries",Q1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eI="documentKeyIndex",$1=["indexId","uid","orderedDocumentKey"],Yd="documentOverlays",X1=["userId","collectionPath","documentId"],Kp="collectionPathOverlayIndex",W1=["userId","collectionPath","largestBatchId"],tI="collectionGroupOverlayIndex",Z1=["userId","collectionGroup","largestBatchId"],Lg="globals",j1="name",nI=[Gu,gi,Fa,os,Ba,ju,hs,Ga,qa,qu,Hu,zd,Kd],eN=[...nI,Yd],iI=[Gu,gi,Fa,Td,Ba,ju,hs,Ga,qa,qu,Hu,zd,Kd,Yd],oI=iI,kg=[...oI,Ug,Nu,Du],tN=kg,rI=[...kg,Lg],nN=rI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp extends QA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Ht(n,e){const t=xe(n);return mr.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ff(this.root,e,this.comparator,!0)}}class Ff{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??nn.RED,this.left=r??nn.EMPTY,this.right=a??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new nn(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return nn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xT(this.data.getIterator())}getIteratorFrom(e){return new xT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new rt(this.comparator);return t.data=e,t}}class xT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _a(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new rt(_t.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new aI("Invalid base64 string: "+a):a}})(e);return new Ft(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let u=0;u<r.length;++u)a+=String.fromCharCode(r[u]);return a})(e);return new Ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const iN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(n){if(Te(!!n,39018),typeof n=="string"){let e=0;const t=iN.exec(n);if(Te(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gt(n.seconds),nanos:gt(n.nanos)}}function gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function To(n){return typeof n=="string"?Ft.fromBase64String(n):Ft.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="server_timestamp",uI="__type__",cI="__previous_value__",fI="__local_write_time__";function Og(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[uI])==null?void 0:i.stringValue)===lI}function Jd(n){const e=n.mapValue.fields[cI];return Og(e)?Jd(e):e}function zu(n){const e=vo(n.mapValue.fields[fI].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,t,i,r,a,u,f,h,m,_,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=h,this.useFetchStreams=m,this.isUsingEmulator=_,this.apiKey=T}}const Sd="(default)";class ys{constructor(e,t){this.projectId=e,this.database=t||Sd}static empty(){return new ys("","")}get isDefaultDatabase(){return this.database===Sd}isEqual(e){return e instanceof ys&&e.projectId===this.projectId&&e.database===this.database}}function rN(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ce(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ys(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="__type__",dI="__max__",ur={mapValue:{fields:{__type__:{stringValue:dI}}}},Bg="__vector__",Ha="value",nd={nullValue:"NULL_VALUE"};function yr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Og(n)?4:hI(n)?9007199254740991:Qd(n)?10:11:ye(28295,{value:n})}function $i(n,e){if(n===e)return!0;const t=yr(n);if(t!==yr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zu(n).isEqual(zu(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const u=vo(r.timestampValue),f=vo(a.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return To(r.bytesValue).isEqual(To(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return gt(r.geoPointValue.latitude)===gt(a.geoPointValue.latitude)&&gt(r.geoPointValue.longitude)===gt(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return gt(r.integerValue)===gt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const u=gt(r.doubleValue),f=gt(a.doubleValue);return u===f?Bu(u)===Bu(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Oa(n.arrayValue.values||[],e.arrayValue.values||[],$i);case 10:case 11:return(function(r,a){const u=r.mapValue.fields||{},f=a.mapValue.fields||{};if(RT(u)!==RT(f))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(f[h]===void 0||!$i(u[h],f[h])))return!1;return!0})(n,e);default:return ye(52216,{left:n})}}function Ku(n,e){return(n.values||[]).find((t=>$i(t,e)))!==void 0}function _r(n,e){if(n===e)return 0;const t=yr(n),i=yr(e);if(t!==i)return Re(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const f=gt(a.integerValue||a.doubleValue),h=gt(u.integerValue||u.doubleValue);return f<h?-1:f>h?1:f===h?0:isNaN(f)?isNaN(h)?0:-1:1})(n,e);case 3:return bT(n.timestampValue,e.timestampValue);case 4:return bT(zu(n),zu(e));case 5:return Gp(n.stringValue,e.stringValue);case 6:return(function(a,u){const f=To(a),h=To(u);return f.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const f=a.split("/"),h=u.split("/");for(let m=0;m<f.length&&m<h.length;m++){const _=Re(f[m],h[m]);if(_!==0)return _}return Re(f.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const f=Re(gt(a.latitude),gt(u.latitude));return f!==0?f:Re(gt(a.longitude),gt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return NT(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var E,w,V,U;const f=a.fields||{},h=u.fields||{},m=(E=f[Ha])==null?void 0:E.arrayValue,_=(w=h[Ha])==null?void 0:w.arrayValue,T=Re(((V=m==null?void 0:m.values)==null?void 0:V.length)||0,((U=_==null?void 0:_.values)==null?void 0:U.length)||0);return T!==0?T:NT(m,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===ur.mapValue&&u===ur.mapValue)return 0;if(a===ur.mapValue)return 1;if(u===ur.mapValue)return-1;const f=a.fields||{},h=Object.keys(f),m=u.fields||{},_=Object.keys(m);h.sort(),_.sort();for(let T=0;T<h.length&&T<_.length;++T){const E=Gp(h[T],_[T]);if(E!==0)return E;const w=_r(f[h[T]],m[_[T]]);if(w!==0)return w}return Re(h.length,_.length)})(n.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function bT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Re(n,e);const t=vo(n),i=vo(e),r=Re(t.seconds,i.seconds);return r!==0?r:Re(t.nanos,i.nanos)}function NT(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=_r(t[r],i[r]);if(a)return a}return Re(t.length,i.length)}function za(n){return Jp(n)}function Jp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=vo(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return To(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return de.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=Jp(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const u of i)a?a=!1:r+=",",r+=`${u}:${Jp(t.fields[u])}`;return r+"}"})(n.mapValue):ye(61005,{value:n})}function id(n){switch(yr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jd(n);return e?16+id(e):16;case 5:return 2*n.stringValue.length;case 6:return To(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+id(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Sr(i.fields,((a,u)=>{r+=a.length+id(u)})),r})(n.mapValue);default:throw ye(13486,{value:n})}}function Yu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qp(n){return!!n&&"integerValue"in n}function Ju(n){return!!n&&"arrayValue"in n}function DT(n){return!!n&&"nullValue"in n}function MT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function od(n){return!!n&&"mapValue"in n}function Qd(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Fg])==null?void 0:i.stringValue)===Bg}function Mu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Sr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Mu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mu(n.arrayValue.values[t]);return e}return{...n}}function hI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dI}const mI={mapValue:{fields:{[Fg]:{stringValue:Bg},[Ha]:{arrayValue:{}}}}};function sN(n){return"nullValue"in n?nd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yu(ys.empty(),de.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Qd(n)?mI:{mapValue:{}}:ye(35942,{value:n})}function aN(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yu(ys.empty(),de.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?mI:"mapValue"in n?Qd(n)?{mapValue:{}}:ur:ye(61959,{value:n})}function VT(n,e){const t=_r(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function PT(n,e){const t=_r(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!od(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mu(t)}setAll(e){let t=_t.emptyPath(),i={},r=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const h=this.getFieldsMap(t);this.applyChanges(h,i,r),i={},r=[],t=f.popLast()}u?i[f.lastSegment()]=Mu(u):r.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());od(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];od(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Sr(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new an(Mu(this.value))}}function pI(n){const e=[];return Sr(n.fields,((t,i)=>{const r=new _t([t]);if(od(i)){const a=pI(i.mapValue).fields;if(a.length===0)e.push(r);else for(const u of a)e.push(r.child(u))}else e.push(r)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t,i,r,a,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Et(e,0,Se.min(),Se.min(),Se.min(),an.empty(),0)}static newFoundDocument(e,t,i,r){return new Et(e,1,t,Se.min(),i,r,0)}static newNoDocument(e,t){return new Et(e,2,t,Se.min(),Se.min(),an.empty(),0)}static newUnknownDocument(e,t){return new Et(e,3,t,Se.min(),Se.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t){this.position=e,this.inclusive=t}}function UT(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],u=n.position[r];if(a.field.isKeyField()?i=de.comparator(de.fromName(u.referenceValue),t.key):i=_r(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function LT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$i(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t="asc"){this.field=e,this.dir=t}}function lN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{}class Ge extends gI{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new uN(e,t,i):t==="array-contains"?new dN(e,i):t==="in"?new SI(e,i):t==="not-in"?new hN(e,i):t==="array-contains-any"?new mN(e,i):new Ge(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new cN(e,i):new fN(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_r(t,this.value)):t!==null&&yr(this.value)===yr(t)&&this.matchesComparison(_r(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ot extends gI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ot(e,t)}matches(e){return Ya(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ya(n){return n.op==="and"}function $p(n){return n.op==="or"}function Gg(n){return yI(n)&&Ya(n)}function yI(n){for(const e of n.filters)if(e instanceof ot)return!1;return!0}function Xp(n){if(n instanceof Ge)return n.field.canonicalString()+n.op.toString()+za(n.value);if(Gg(n))return n.filters.map((e=>Xp(e))).join(",");{const e=n.filters.map((t=>Xp(t))).join(",");return`${n.op}(${e})`}}function _I(n,e){return n instanceof Ge?(function(i,r){return r instanceof Ge&&i.op===r.op&&i.field.isEqual(r.field)&&$i(i.value,r.value)})(n,e):n instanceof ot?(function(i,r){return r instanceof ot&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,u,f)=>a&&_I(u,r.filters[f])),!0):!1})(n,e):void ye(19439)}function vI(n,e){const t=n.filters.concat(e);return ot.create(t,n.op)}function TI(n){return n instanceof Ge?(function(t){return`${t.field.canonicalString()} ${t.op} ${za(t.value)}`})(n):n instanceof ot?(function(t){return t.op.toString()+" {"+t.getFilters().map(TI).join(" ,")+"}"})(n):"Filter"}class uN extends Ge{constructor(e,t,i){super(e,t,i),this.key=de.fromName(i.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.matchesComparison(t)}}class cN extends Ge{constructor(e,t){super(e,"in",t),this.keys=EI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fN extends Ge{constructor(e,t){super(e,"not-in",t),this.keys=EI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function EI(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>de.fromName(i.referenceValue)))}class dN extends Ge{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ju(t)&&Ku(t.arrayValue,this.value)}}class SI extends Ge{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ku(this.value.arrayValue,t)}}class hN extends Ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ku(this.value.arrayValue,t)}}class mN extends Ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ju(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ku(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,t=null,i=[],r=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=u,this.endAt=f,this.Te=null}}function Wp(n,e=null,t=[],i=[],r=null,a=null,u=null){return new pN(n,e,t,i,r,a,u)}function _s(n){const e=xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Xp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>za(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>za(i))).join(",")),e.Te=t}return e.Te}function ec(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_I(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LT(n.startAt,e.startAt)&&LT(n.endAt,e.endAt)}function Id(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Cd(n,e){return n.filters.filter((t=>t instanceof Ge&&t.field.isEqual(e)))}function kT(n,e,t){let i=nd,r=!0;for(const a of Cd(n,e)){let u=nd,f=!0;switch(a.op){case"<":case"<=":u=sN(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,f=!1;break;case"!=":case"not-in":u=nd}VT({value:i,inclusive:r},{value:u,inclusive:f})<0&&(i=u,r=f)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];VT({value:i,inclusive:r},{value:u,inclusive:t.inclusive})<0&&(i=u,r=t.inclusive);break}}return{value:i,inclusive:r}}function OT(n,e,t){let i=ur,r=!0;for(const a of Cd(n,e)){let u=ur,f=!0;switch(a.op){case">=":case">":u=aN(a.value),f=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,f=!1;break;case"!=":case"not-in":u=ur}PT({value:i,inclusive:r},{value:u,inclusive:f})>0&&(i=u,r=f)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];PT({value:i,inclusive:r},{value:u,inclusive:t.inclusive})>0&&(i=u,r=t.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t=null,i=[],r=[],a=null,u="F",f=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function gN(n,e,t,i,r,a,u,f){return new tc(n,e,t,i,r,a,u,f)}function $d(n){return new tc(n)}function FT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yN(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function AI(n){return n.collectionGroup!==null}function Vu(n){const e=xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new rt(_t.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ad(a,i))})),t.has(_t.keyField().canonicalString())||e.Ie.push(new Ad(_t.keyField(),i))}return e.Ie}function ti(n){const e=xe(n);return e.Ee||(e.Ee=_N(e,Vu(n))),e.Ee}function _N(n,e){if(n.limitType==="F")return Wp(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new Ad(r.field,a)}));const t=n.endAt?new Ka(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ka(n.startAt.position,n.startAt.inclusive):null;return Wp(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Zp(n,e){const t=n.filters.concat([e]);return new tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jp(n,e,t){return new tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xd(n,e){return ec(ti(n),ti(e))&&n.limitType===e.limitType}function II(n){return`${_s(ti(n))}|lt:${n.limitType}`}function Ca(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>TI(r))).join(", ")}]`),Hd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>za(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>za(r))).join(",")),`Target(${i})`})(ti(n))}; limitType=${n.limitType})`}function nc(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):de.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of Vu(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(u,f,h){const m=UT(u,f,h);return u.inclusive?m<=0:m<0})(i.startAt,Vu(i),r)||i.endAt&&!(function(u,f,h){const m=UT(u,f,h);return u.inclusive?m>=0:m>0})(i.endAt,Vu(i),r))})(n,e)}function vN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function CI(n){return(e,t)=>{let i=!1;for(const r of Vu(n)){const a=TN(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function TN(n,e,t){const i=n.field.isKeyField()?de.comparator(e.key,t.key):(function(a,u,f){const h=u.data.field(a),m=f.data.field(a);return h!==null&&m!==null?_r(h,m):ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ye(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Sr(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return sI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new yt(de.comparator);function kn(){return EN}const wI=new yt(de.comparator);function Su(...n){let e=wI;for(const t of n)e=e.insert(t.key,t);return e}function RI(n){let e=wI;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ki(){return Pu()}function xI(){return Pu()}function Pu(){return new So((n=>n.toString()),((n,e)=>n.isEqual(e)))}const SN=new yt(de.comparator),AN=new rt(de.comparator);function Pe(...n){let e=AN;for(const t of n)e=e.add(t);return e}const IN=new rt(Re);function CN(){return IN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function bI(n){return{integerValue:""+n}}function wN(n,e){return N1(e)?bI(e):qg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(){this._=void 0}}function RN(n,e,t){return n instanceof Qu?(function(r,a){const u={fields:{[uI]:{stringValue:lI},[fI]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Og(a)&&(a=Jd(a)),a&&(u.fields[cI]=a),{mapValue:u}})(t,e):n instanceof Ja?DI(n,e):n instanceof Qa?MI(n,e):(function(r,a){const u=NI(r,a),f=BT(u)+BT(r.Ae);return Qp(u)&&Qp(r.Ae)?bI(f):qg(r.serializer,f)})(n,e)}function xN(n,e,t){return n instanceof Ja?DI(n,e):n instanceof Qa?MI(n,e):t}function NI(n,e){return n instanceof $u?(function(i){return Qp(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Qu extends Wd{}class Ja extends Wd{constructor(e){super(),this.elements=e}}function DI(n,e){const t=VI(e);for(const i of n.elements)t.some((r=>$i(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Qa extends Wd{constructor(e){super(),this.elements=e}}function MI(n,e){let t=VI(e);for(const i of n.elements)t=t.filter((r=>!$i(r,i)));return{arrayValue:{values:t}}}class $u extends Wd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function BT(n){return gt(n.integerValue||n.doubleValue)}function VI(n){return Ju(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t){this.field=e,this.transform=t}}function NN(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Ja&&r instanceof Ja||i instanceof Qa&&r instanceof Qa?Oa(i.elements,r.elements,$i):i instanceof $u&&r instanceof $u?$i(i.Ae,r.Ae):i instanceof Qu&&r instanceof Qu})(n.transform,e.transform)}class DN{constructor(e,t){this.version=e,this.transformResults=t}}class pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Zd{}function PI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jd(n.key,pn.none()):new el(n.key,n.data,pn.none());{const t=n.data,i=an.empty();let r=new rt(_t.comparator);for(let a of e.fields)if(!r.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),r=r.add(a)}return new Ao(n.key,i,new Cn(r.toArray()),pn.none())}}function MN(n,e,t){n instanceof el?(function(r,a,u){const f=r.value.clone(),h=qT(r.fieldTransforms,a,u.transformResults);f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Ao?(function(r,a,u){if(!rd(r.precondition,a))return void a.convertToUnknownDocument(u.version);const f=qT(r.fieldTransforms,a,u.transformResults),h=a.data;h.setAll(UI(r)),h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):(function(r,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Uu(n,e,t,i){return n instanceof el?(function(a,u,f,h){if(!rd(a.precondition,u))return f;const m=a.value.clone(),_=HT(a.fieldTransforms,h,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ao?(function(a,u,f,h){if(!rd(a.precondition,u))return f;const m=HT(a.fieldTransforms,h,u),_=u.data;return _.setAll(UI(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,f){return rd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function VN(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=NI(i.transform,r||null);a!=null&&(t===null&&(t=an.empty()),t.set(i.field,a))}return t||null}function GT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Oa(i,r,((a,u)=>NN(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class el extends Zd{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ao extends Zd{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function UI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function qT(n,e,t){const i=new Map;Te(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const a=n[r],u=a.transform,f=e.data.field(a.field);i.set(a.field,xN(u,f,t[r]))}return i}function HT(n,e,t){const i=new Map;for(const r of n){const a=r.transform,u=t.data.field(r.field);i.set(r.field,RN(a,u,e))}return i}class jd extends Zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LI extends Zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&MN(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Uu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Uu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=xI();return this.mutations.forEach((r=>{const a=e.get(r.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(r.key)?null:f;const h=PI(u,f);h!==null&&i.set(r.key,h),u.isValidDocument()||u.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,((t,i)=>GT(t,i)))&&Oa(this.baseMutations,e.baseMutations,((t,i)=>GT(t,i)))}}class zg{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Te(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return SN})();const a=e.mutations;for(let u=0;u<a.length;u++)r=r.insert(a[u].key,i[u].version);return new zg(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,ze;function UN(n){switch(n){case ne.OK:return ye(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return ye(15467,{code:n})}}function kI(n){if(n===void 0)return mn("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Lt.OK:return ne.OK;case Lt.CANCELLED:return ne.CANCELLED;case Lt.UNKNOWN:return ne.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return ne.INTERNAL;case Lt.UNAVAILABLE:return ne.UNAVAILABLE;case Lt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Lt.NOT_FOUND:return ne.NOT_FOUND;case Lt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Lt.ABORTED:return ne.ABORTED;case Lt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Lt.DATA_LOSS:return ne.DATA_LOSS;default:return ye(39323,{code:n})}}(ze=Lt||(Lt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new hr([4294967295,4294967295],0);function zT(n){const e=LN().encode(n),t=new UA;return t.update(e),new Uint8Array(t.digest())}function KT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new hr([t,i],0),new hr([r,a],0)]}class Yg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Au(`Invalid padding: ${t}`);if(i<0)throw new Au(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Au(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Au(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hr.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(hr.fromNumber(i)));return r.compare(kN)===1&&(r=new hr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=zT(e),[i,r]=KT(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Yg(a,r,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=zT(e),[i,r]=KT(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,ic.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new eh(Se.min(),r,new yt(Re),kn(),Pe())}}class ic{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ic(i,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class OI{constructor(e,t){this.targetId=e,this.Ce=t}}class FI{constructor(e,t,i=Ft.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class YT{constructor(){this.ve=0,this.Fe=JT(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),t=Pe(),i=Pe();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ye(38017,{changeType:a})}})),new ic(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=JT()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class ON{constructor(e){this.Ge=e,this.ze=new Map,this.je=kn(),this.He=Bf(),this.Je=Bf(),this.Ze=new yt(Re)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(Id(a))if(i===0){const u=new de(a.path);this.et(t,u,Et.newNoDocument(u,Se.min()))}else Te(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),h=f?this.ct(f,e,u):1;if(h!==0){this.it(t);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let u,f;try{u=To(i).toUint8Array()}catch(h){if(h instanceof aI)return gr("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{f=new Yg(u,r,a)}catch(h){return gr(h instanceof Au?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const f=this.ot(u);if(f){if(a.current&&Id(f.target)){const h=new de(f.target.path);this.It(h).has(u)||this.Et(u,h)||this.et(u,h,Et.newNoDocument(h,e))}a.Be&&(t.set(u,a.ke()),a.Ke())}}));let i=Pe();this.Je.forEach(((a,u)=>{let f=!0;u.forEachWhile((h=>{const m=this.ot(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const r=new eh(e,t,this.Ze,this.je,i);return this.je=kn(),this.He=Bf(),this.Je=Bf(),this.Ze=new yt(Re),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new YT,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new rt(Re),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new rt(Re),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new YT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Bf(){return new yt(de.comparator)}function JT(){return new yt(de.comparator)}const FN={asc:"ASCENDING",desc:"DESCENDING"},BN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GN={and:"AND",or:"OR"};class qN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eg(n,e){return n.useProto3Json||Hd(e)?e:{value:e}}function $a(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function HN(n,e){return $a(n,e.toTimestamp())}function gn(n){return Te(!!n,49232),Se.fromTimestamp((function(t){const i=vo(t);return new it(i.seconds,i.nanos)})(n))}function Jg(n,e){return tg(n,e).canonicalString()}function tg(n,e){const t=(function(r){return new We(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function GI(n){const e=We.fromString(n);return Te(XI(e),10190,{key:e.toString()}),e}function wd(n,e){return Jg(n.databaseId,e.path)}function ms(n,e){const t=GI(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new de(zI(t))}function qI(n,e){return Jg(n.databaseId,e)}function HI(n){const e=GI(n);return e.length===4?We.emptyPath():zI(e)}function ng(n){return new We(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zI(n){return Te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function QT(n,e,t){return{name:wd(n,e),fields:t.value.mapValue.fields}}function zN(n,e,t){const i=ms(n,e.name),r=gn(e.updateTime),a=e.createTime?gn(e.createTime):Se.min(),u=new an({mapValue:{fields:e.fields}}),f=Et.newFoundDocument(i,r,a,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function KN(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ye(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(Te(_===void 0||typeof _=="string",58123),Ft.fromBase64String(_||"")):(Te(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Ft.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(m){const _=m.code===void 0?ne.UNKNOWN:kI(m.code);return new ce(_,m.message||"")})(u);t=new FI(i,r,a,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ms(n,i.document.name),a=gn(i.document.updateTime),u=i.document.createTime?gn(i.document.createTime):Se.min(),f=new an({mapValue:{fields:i.document.fields}}),h=Et.newFoundDocument(r,a,u,f),m=i.targetIds||[],_=i.removedTargetIds||[];t=new sd(m,_,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ms(n,i.document),a=i.readTime?gn(i.readTime):Se.min(),u=Et.newNoDocument(r,a),f=i.removedTargetIds||[];t=new sd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ms(n,i.document),a=i.removedTargetIds||[];t=new sd([],a,r,null)}else{if(!("filter"in e))return ye(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,u=new PN(r,a),f=i.targetId;t=new OI(f,u)}}return t}function Rd(n,e){let t;if(e instanceof el)t={update:QT(n,e.key,e.value)};else if(e instanceof jd)t={delete:wd(n,e.key)};else if(e instanceof Ao)t={update:QT(n,e.key,e.data),updateMask:WN(e.fieldMask)};else{if(!(e instanceof LI))return ye(16599,{dt:e.type});t={verify:wd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const f=u.transform;if(f instanceof Qu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ja)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Qa)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof $u)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw ye(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:HN(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ye(27497)})(n,e.precondition)),t}function ig(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?pn.updateTime(gn(a.updateTime)):a.exists!==void 0?pn.exists(a.exists):pn.none()})(e.currentDocument):pn.none(),i=e.updateTransforms?e.updateTransforms.map((r=>(function(u,f){let h=null;if("setToServerValue"in f)Te(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),h=new Qu;else if("appendMissingElements"in f){const _=f.appendMissingElements.values||[];h=new Ja(_)}else if("removeAllFromArray"in f){const _=f.removeAllFromArray.values||[];h=new Qa(_)}else"increment"in f?h=new $u(u,f.increment):ye(16584,{proto:f});const m=_t.fromServerFormat(f.fieldPath);return new bN(m,h)})(n,r))):[];if(e.update){e.update.name;const r=ms(n,e.update.name),a=new an({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(h){const m=h.fieldPaths||[];return new Cn(m.map((_=>_t.fromServerFormat(_))))})(e.updateMask);return new Ao(r,a,u,t,i)}return new el(r,a,t,i)}if(e.delete){const r=ms(n,e.delete);return new jd(r,t)}if(e.verify){const r=ms(n,e.verify);return new LI(r,t)}return ye(1463,{proto:e})}function YN(n,e){return n&&n.length>0?(Te(e!==void 0,14353),n.map((t=>(function(r,a){let u=r.updateTime?gn(r.updateTime):gn(a);return u.isEqual(Se.min())&&(u=gn(a)),new DN(u,r.transformResults||[])})(t,e)))):[]}function KI(n,e){return{documents:[qI(n,e.path)]}}function YI(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=qI(n,r);const a=(function(m){if(m.length!==0)return $I(ot.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(E){return{field:wa(E.field),direction:QN(E.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=eg(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:r}}function JI(n){let e=HI(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Te(i===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(T){const E=QI(T);return E instanceof ot&&Gg(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((E=>(function(V){return new Ad(Ra(V.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(E)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let E;return E=typeof T=="object"?T.value:T,Hd(E)?null:E})(t.limit));let h=null;t.startAt&&(h=(function(T){const E=!!T.before,w=T.values||[];return new Ka(w,E)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const E=!T.before,w=T.values||[];return new Ka(w,E)})(t.endAt)),gN(e,r,u,a,f,"F",h,m)}function JN(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function QI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ra(t.unaryFilter.field);return Ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ra(t.unaryFilter.field);return Ge.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ra(t.unaryFilter.field);return Ge.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ra(t.unaryFilter.field);return Ge.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ge.create(Ra(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ot.create(t.compositeFilter.filters.map((i=>QI(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(n):ye(30097,{filter:n})}function QN(n){return FN[n]}function $N(n){return BN[n]}function XN(n){return GN[n]}function wa(n){return{fieldPath:n.canonicalString()}}function Ra(n){return _t.fromServerFormat(n.fieldPath)}function $I(n){return n instanceof Ge?(function(t){if(t.op==="=="){if(MT(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NAN"}};if(DT(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(MT(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NOT_NAN"}};if(DT(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wa(t.field),op:$N(t.op),value:t.value}}})(n):n instanceof ot?(function(t){const i=t.getFilters().map((r=>$I(r)));return i.length===1?i[0]:{compositeFilter:{op:XN(t.op),filters:i}}})(n):ye(54877,{filter:n})}function WN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function XI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function WI(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t,i,r,a=Se.min(),u=Se.min(),f=Ft.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=h}withSequenceNumber(e){return new go(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.yt=e}}function ZN(n,e){let t;if(e.document)t=zN(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=de.fromSegments(e.noDocument.path),r=Ts(e.noDocument.readTime);t=Et.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const i=de.fromSegments(e.unknownDocument.path),r=Ts(e.unknownDocument.version);t=Et.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime((function(r){const a=new it(r[0],r[1]);return Se.fromTimestamp(a)})(e.readTime)),t}function $T(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(a,u){return{name:wd(a,u.key),fields:u.data.value.mapValue.fields,updateTime:$a(a,u.version.toTimestamp()),createTime:$a(a,u.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:vs(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:vs(e.version)}}return i}function xd(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function vs(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ts(n){const e=new it(n.seconds,n.nanoseconds);return Se.fromTimestamp(e)}function ls(n,e){const t=(e.baseMutations||[]).map((a=>ig(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const f=e.mutations[a+1];u.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const i=e.mutations.map((a=>ig(n.yt,a))),r=it.fromMillis(e.localWriteTimeMs);return new Hg(e.batchId,r,t,i)}function Iu(n){const e=Ts(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ts(n.lastLimboFreeSnapshotVersion):Se.min();let i;return i=(function(a){return a.documents!==void 0})(n.query)?(function(a){const u=a.documents.length;return Te(u===1,1966,{count:u}),ti($d(HI(a.documents[0])))})(n.query):(function(a){return ti(JI(a))})(n.query),new go(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ft.fromBase64String(n.resumeToken))}function jI(n,e){const t=vs(e.snapshotVersion),i=vs(e.lastLimboFreeSnapshotVersion);let r;r=Id(e.target)?KI(n.yt,e.target):YI(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_s(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function eC(n){const e=JI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jp(e,e.limit,"L"):e}function Ip(n,e){return new Kg(e.largestBatchId,ig(n.yt,e.overlayMutation))}function XT(n,e){const t=e.path.lastSegment();return[n,un(e.path.popLast()),t]}function WT(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:vs(i.readTime),documentKey:un(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{getBundleMetadata(e,t){return ZT(e).get(t).next((i=>{if(i)return(function(a){return{id:a.bundleId,createTime:Ts(a.createTime),version:a.version}})(i)}))}saveBundleMetadata(e,t){return ZT(e).put((function(r){return{bundleId:r.id,createTime:vs(gn(r.createTime)),version:r.version}})(t))}getNamedQuery(e,t){return jT(e).get(t).next((i=>{if(i)return(function(a){return{name:a.name,query:eC(a.bundledQuery),readTime:Ts(a.readTime)}})(i)}))}saveNamedQuery(e,t){return jT(e).put((function(r){return{name:r.name,readTime:vs(gn(r.readTime)),bundledQuery:r.bundledQuery}})(t))}}function ZT(n){return Ht(n,zd)}function jT(n){return Ht(n,Kd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new th(e,i)}getOverlay(e,t){return du(e).get(XT(this.userId,t)).next((i=>i?Ip(this.serializer,i):null))}getOverlays(e,t){const i=Ki();return H.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){const r=[];return i.forEach(((a,u)=>{const f=new Kg(t,u);r.push(this.bt(e,f))})),H.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach((u=>r.add(un(u.getCollectionPath()))));const a=[];return r.forEach((u=>{const f=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);a.push(du(e).X(Kp,f))})),H.waitFor(a)}getOverlaysForCollection(e,t,i){const r=Ki(),a=un(t),u=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,Number.POSITIVE_INFINITY],!0);return du(e).H(Kp,u).next((f=>{for(const h of f){const m=Ip(this.serializer,h);r.set(m.getKey(),m)}return r}))}getOverlaysForCollectionGroup(e,t,i,r){const a=Ki();let u;const f=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return du(e).ee({index:tI,range:f},((h,m,_)=>{const T=Ip(this.serializer,m);a.size()<r||T.largestBatchId===u?(a.set(T.getKey(),T),u=T.largestBatchId):_.done()})).next((()=>a))}bt(e,t){return du(e).put((function(r,a,u){const[f,h,m]=XT(a,u.mutation.key);return{userId:a,collectionPath:h,documentId:m,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Rd(r.yt,u.mutation)}})(this.serializer,this.userId,t))}}function du(n){return Ht(n,Yd)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{St(e){return Ht(e,Lg)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const i=t==null?void 0:t.value;return i?Ft.fromUint8Array(i):Ft.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(gt(e.integerValue));else if("doubleValue"in e){const i=gt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Bu(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=vo(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(To(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?hI(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Qd(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ye(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const i=e.fields||{};this.Ft(t,55);for(const r of Object.keys(i))this.Ot(r,t),this.Ct(i[r],t)}kt(e,t){var u,f;const i=e.fields||{};this.Ft(t,53);const r=Ha,a=((f=(u=i[r].arrayValue)==null?void 0:u.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(gt(a)),this.Ot(r,t),this.Ct(i[r],t)}qt(e,t){const i=e.values||[];this.Ft(t,50);for(const r of i)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),de.fromName(e).path.forEach((i=>{this.Ft(t,60),this.$t(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}us.Wt=new us;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=255;function tD(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function eE(n){const e=64-(function(i){let r=0;for(let a=0;a<8;++a){const u=tD(255&i[a]);if(r+=u,u!==8)break}return r})(n);return Math.ceil(e/8)}class nD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ht(i.value),i=t.next();this.Jt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=t.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const r=t.codePointAt(0);this.Ht(240|r>>>18),this.Ht(128|63&r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r)}}this.Jt()}Yt(e){const t=this.en(e),i=eE(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),i=eE(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn(va),this.sn(255)}_n(){this.an(va),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===va?(this.sn(va),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===va?(this.an(va),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class iD{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class oD{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class hu{constructor(){this.cn=new nD,this.ascending=new iD(this.cn),this.descending=new oD(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t,i,r){this.hn=e,this.Pn=t,this.Tn=i,this.In=r}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.In,0),t!==e?i.set([0],this.In.length):++i[i.length-1],new cs(this.hn,this.Pn,this.Tn,i)}Rn(e,t,i){return{indexId:this.hn,uid:e,arrayValue:ad(this.Tn),directionalValue:ad(this.In),orderedDocumentKey:ad(t),documentKey:i.path.toArray()}}An(e,t,i){const r=this.Rn(e,t,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function rr(n,e){let t=n.hn-e.hn;return t!==0?t:(t=tE(n.Tn,e.Tn),t!==0?t:(t=tE(n.In,e.In),t!==0?t:de.comparator(n.Pn,e.Pn)))}function tE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function ad(n){return wA()?(function(t){let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return i})(n):n}function nE(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(n)}class iE{constructor(e){this.Vn=new rt(((t,i)=>_t.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(e){if(Te(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=qp(e);if(t!==void 0&&!this.pn(t))return!1;const i=is(e);let r=new Set,a=0,u=0;for(;a<i.length&&this.pn(i[a]);++a)r=r.add(i[a].fieldPath.canonicalString());if(a===i.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!r.has(f.field.canonicalString())){const h=i[a];if(!this.yn(f,h)||!this.wn(this.dn[u++],h))return!1}++a}for(;a<i.length;++a){const f=i[a];if(u>=this.dn.length||!this.wn(this.dn[u++],f))return!1}return!0}bn(){if(this.fn)return null;let e=new rt(_t.comparator);const t=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new jf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new jf(i.field,0))}for(const i of this.dn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new jf(i.field,i.dir==="asc"?0:1)));return new _d(_d.UNKNOWN_ID,this.collectionId,t,Fu.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(n){var t,i;if(Te(n instanceof Ge||n instanceof ot,20012),n instanceof Ge){if(n instanceof SI){const r=((i=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:i.map((a=>Ge.create(n.field,"==",a))))||[];return ot.create(r,"or")}return n}const e=n.filters.map((r=>tC(r)));return ot.create(e,n.op)}function rD(n){if(n.getFilters().length===0)return[];const e=sg(tC(n));return Te(nC(e),7391),og(e)||rg(e)?[e]:e.getFilters()}function og(n){return n instanceof Ge}function rg(n){return n instanceof ot&&Gg(n)}function nC(n){return og(n)||rg(n)||(function(t){if(t instanceof ot&&$p(t)){for(const i of t.getFilters())if(!og(i)&&!rg(i))return!1;return!0}return!1})(n)}function sg(n){if(Te(n instanceof Ge||n instanceof ot,34018),n instanceof Ge)return n;if(n.filters.length===1)return sg(n.filters[0]);const e=n.filters.map((i=>sg(i)));let t=ot.create(e,n.op);return t=bd(t),nC(t)?t:(Te(t instanceof ot,64498),Te(Ya(t),40251),Te(t.filters.length>1,57927),t.filters.reduce(((i,r)=>Qg(i,r))))}function Qg(n,e){let t;return Te(n instanceof Ge||n instanceof ot,38388),Te(e instanceof Ge||e instanceof ot,25473),t=n instanceof Ge?e instanceof Ge?(function(r,a){return ot.create([r,a],"and")})(n,e):oE(n,e):e instanceof Ge?oE(e,n):(function(r,a){if(Te(r.filters.length>0&&a.filters.length>0,48005),Ya(r)&&Ya(a))return vI(r,a.getFilters());const u=$p(r)?r:a,f=$p(r)?a:r,h=u.filters.map((m=>Qg(m,f)));return ot.create(h,"or")})(n,e),bd(t)}function oE(n,e){if(Ya(e))return vI(e,n.getFilters());{const t=e.filters.map((i=>Qg(n,i)));return ot.create(t,"or")}}function bd(n){if(Te(n instanceof Ge||n instanceof ot,11850),n instanceof Ge)return n;const e=n.getFilters();if(e.length===1)return bd(e[0]);if(yI(n))return n;const t=e.map((r=>bd(r))),i=[];return t.forEach((r=>{r instanceof Ge?i.push(r):r instanceof ot&&(r.op===n.op?i.push(...r.filters):i.push(r))})),i.length===1?i[0]:ot.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.Sn=new $g}addToCollectionParentIndex(e,t){return this.Sn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(On.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(On.min())}updateCollectionGroup(e,t,i){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class $g{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new rt(We.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new rt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="IndexedDbIndexManager",Gf=new Uint8Array(0);class aD{constructor(e,t){this.databaseId=t,this.Dn=new $g,this.Cn=new So((i=>_s(i)),((i,r)=>ec(i,r))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const a={collectionId:i,parent:un(r)};return sE(e).put(a)}return H.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[HA(t),""],!1,!0);return sE(e).H(r).next((a=>{for(const u of a){if(u.collectionId!==t)break;i.push(zi(u.parent))}return i}))}addFieldIndex(e,t){const i=mu(e),r=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete r.indexId;const a=i.add(r);if(t.indexState){const u=Ea(e);return a.next((f=>{u.put(WT(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const i=mu(e),r=Ea(e),a=Ta(e);return i.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=mu(e),i=Ta(e),r=Ea(e);return t.X().next((()=>i.X())).next((()=>r.X()))}createTargetIndexes(e,t){return H.forEach(this.vn(t),(i=>this.getIndexType(e,i).next((r=>{if(r===0||r===1){const a=new iE(i).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const i=Ta(e);let r=!0;const a=new Map;return H.forEach(this.vn(t),(u=>this.Fn(e,u).next((f=>{r&&(r=!!f),a.set(u,f)})))).next((()=>{if(r){let u=Pe();const f=[];return H.forEach(a,((h,m)=>{ae(rE,`Using index ${(function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map((se=>`${se.fieldPath}:${se.kind}`)).join(",")}`})(h)} to execute ${_s(t)}`);const _=(function($,se){const X=qp(se);if(X===void 0)return null;for(const le of Cd($,X.fieldPath))switch(le.op){case"array-contains-any":return le.value.arrayValue.values||[];case"array-contains":return[le.value]}return null})(m,h),T=(function($,se){const X=new Map;for(const le of is(se))for(const x of Cd($,le.fieldPath))switch(x.op){case"==":case"in":X.set(le.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return X.set(le.fieldPath.canonicalString(),x.value),Array.from(X.values())}return null})(m,h),E=(function($,se){const X=[];let le=!0;for(const x of is(se)){const N=x.kind===0?kT($,x.fieldPath,$.startAt):OT($,x.fieldPath,$.startAt);X.push(N.value),le&&(le=N.inclusive)}return new Ka(X,le)})(m,h),w=(function($,se){const X=[];let le=!0;for(const x of is(se)){const N=x.kind===0?OT($,x.fieldPath,$.endAt):kT($,x.fieldPath,$.endAt);X.push(N.value),le&&(le=N.inclusive)}return new Ka(X,le)})(m,h),V=this.Mn(h,m,E),U=this.Mn(h,m,w),P=this.xn(h,m,T),z=this.On(h.indexId,_,V,E.inclusive,U,w.inclusive,P);return H.forEach(z,(j=>i.Z(j,t.limit).next(($=>{$.forEach((se=>{const X=de.fromSegments(se.documentKey);u.has(X)||(u=u.add(X),f.push(X))}))}))))})).next((()=>f))}return H.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=rD(ot.create(e.filters,"and")).map((i=>Wp(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,i,r,a,u,f){const h=(t!=null?t.length:1)*Math.max(i.length,a.length),m=h/(t!=null?t.length:1),_=[];for(let T=0;T<h;++T){const E=t?this.Nn(t[T/m]):Gf,w=this.Bn(e,E,i[T%m],r),V=this.Ln(e,E,a[T%m],u),U=f.map((P=>this.Bn(e,E,P,!0)));_.push(...this.createRange(w,V,U))}return _}Bn(e,t,i,r){const a=new cs(e,de.empty(),t,i);return r?a:a.En()}Ln(e,t,i,r){const a=new cs(e,de.empty(),t,i);return r?a.En():a}Fn(e,t){const i=new iE(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((a=>{let u=null;for(const f of a)i.gn(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u}))}getIndexType(e,t){let i=2;const r=this.vn(t);return H.forEach(r,(a=>this.Fn(e,a).next((u=>{u?i!==0&&u.fields.length<(function(h){let m=new rt(_t.comparator),_=!1;for(const T of h.filters)for(const E of T.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?_=!0:m=m.add(E.field));for(const T of h.orderBy)T.field.isKeyField()||(m=m.add(T.field));return m.size+(_?1:0)})(a)&&(i=1):i=0})))).next((()=>(function(u){return u.limit!==null})(t)&&r.length>1&&i===2?1:i))}kn(e,t){const i=new hu;for(const r of is(e)){const a=t.data.field(r.fieldPath);if(a==null)return null;const u=i.ln(r.kind);us.Wt.Dt(a,u)}return i.un()}Nn(e){const t=new hu;return us.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const i=new hu;return us.Wt.Dt(Yu(this.databaseId,t),i.ln((function(a){const u=is(a);return u.length===0?0:u[u.length-1].kind})(e))),i.un()}xn(e,t,i){if(i===null)return[];let r=[];r.push(new hu);let a=0;for(const u of is(e)){const f=i[a++];for(const h of r)if(this.qn(t,u.fieldPath)&&Ju(f))r=this.Un(r,u,f);else{const m=h.ln(u.kind);us.Wt.Dt(f,m)}}return this.$n(r)}Mn(e,t,i){return this.xn(e,t,i.position)}$n(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Un(e,t,i){const r=[...e],a=[];for(const u of i.arrayValue.values||[])for(const f of r){const h=new hu;h.seed(f.un()),us.Wt.Dt(u,h.ln(t.kind)),a.push(h)}return a}qn(e,t){return!!e.filters.find((i=>i instanceof Ge&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=mu(e),r=Ea(e);return(t?i.H(zp,IDBKeyRange.bound(t,t)):i.H()).next((a=>{const u=[];return H.forEach(a,(f=>r.get([f.indexId,this.uid]).next((h=>{u.push((function(_,T){const E=T?new Fu(T.sequenceNumber,new On(Ts(T.readTime),new de(zi(T.documentKey)),T.largestBatchId)):Fu.empty(),w=_.fields.map((([V,U])=>new jf(_t.fromServerFormat(V),U)));return new _d(_.indexId,_.collectionGroup,w,E)})(f,h))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,r)=>{const a=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return a!==0?a:Re(i.collectionGroup,r.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const r=mu(e),a=Ea(e);return this.Wn(e).next((u=>r.H(zp,IDBKeyRange.bound(t,t)).next((f=>H.forEach(f,(h=>a.put(WT(h.indexId,this.uid,u,i))))))))}updateIndexEntries(e,t){const i=new Map;return H.forEach(t,((r,a)=>{const u=i.get(r.collectionGroup);return(u?H.resolve(u):this.getFieldIndexes(e,r.collectionGroup)).next((f=>(i.set(r.collectionGroup,f),H.forEach(f,(h=>this.Qn(e,r,h).next((m=>{const _=this.Gn(a,h);return m.isEqual(_)?H.resolve():this.zn(e,a,h,m,_)})))))))}))}jn(e,t,i,r){return Ta(e).put(r.Rn(this.uid,this.Kn(i,t.key),t.key))}Hn(e,t,i,r){return Ta(e).delete(r.An(this.uid,this.Kn(i,t.key),t.key))}Qn(e,t,i){const r=Ta(e);let a=new rt(rr);return r.ee({index:eI,range:IDBKeyRange.only([i.indexId,this.uid,ad(this.Kn(i,t))])},((u,f)=>{a=a.add(new cs(i.indexId,t,nE(f.arrayValue),nE(f.directionalValue)))})).next((()=>a))}Gn(e,t){let i=new rt(rr);const r=this.kn(t,e);if(r==null)return i;const a=qp(t);if(a!=null){const u=e.data.field(a.fieldPath);if(Ju(u))for(const f of u.arrayValue.values||[])i=i.add(new cs(t.indexId,e.key,this.Nn(f),r))}else i=i.add(new cs(t.indexId,e.key,Gf,r));return i}zn(e,t,i,r,a){ae(rE,"Updating index entries for document '%s'",t.key);const u=[];return(function(h,m,_,T,E){const w=h.getIterator(),V=m.getIterator();let U=_a(w),P=_a(V);for(;U||P;){let z=!1,j=!1;if(U&&P){const $=_(U,P);$<0?j=!0:$>0&&(z=!0)}else U!=null?j=!0:z=!0;z?(T(P),P=_a(V)):j?(E(U),U=_a(w)):(U=_a(w),P=_a(V))}})(r,a,rr,(f=>{u.push(this.jn(e,t,i,f))}),(f=>{u.push(this.Hn(e,t,i,f))})),H.waitFor(u)}Wn(e){let t=1;return Ea(e).ee({index:jA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,r,a)=>{a.done(),t=r.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((u,f)=>rr(u,f))).filter(((u,f,h)=>!f||rr(u,h[f-1])!==0));const r=[];r.push(e);for(const u of i){const f=rr(u,e),h=rr(u,t);if(f===0)r[0]=e.En();else if(f>0&&h<0)r.push(u),r.push(u.En());else if(h>0)break}r.push(t);const a=[];for(let u=0;u<r.length;u+=2){if(this.Jn(r[u],r[u+1]))return[];const f=r[u].An(this.uid,Gf,de.empty()),h=r[u+1].An(this.uid,Gf,de.empty());a.push(IDBKeyRange.bound(f,h))}return a}Jn(e,t){return rr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(aE)}getMinOffset(e,t){return H.mapArray(this.vn(t),(i=>this.Fn(e,i).next((r=>r||ye(44426))))).next(aE)}}function sE(n){return Ht(n,Hu)}function Ta(n){return Ht(n,Du)}function mu(n){return Ht(n,Ug)}function Ea(n){return Ht(n,Nu)}function aE(n){Te(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;Mg(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new On(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iC=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(n,e,t){const i=n.store(gi),r=n.store(Fa),a=[],u=IDBKeyRange.only(t.batchId);let f=0;const h=i.ee({range:u},((_,T,E)=>(f++,E.delete())));a.push(h.next((()=>{Te(f===1,47070,{batchId:t.batchId})})));const m=[];for(const _ of t.mutations){const T=XA(e,_.key.path,t.batchId);a.push(r.delete(T)),m.push(_.key)}return H.waitFor(a).next((()=>m))}function Nd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ye(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(iC,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class nh{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Zn={}}static wt(e,t,i,r){Te(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new nh(a,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sr(e).ee({index:fs,range:i},((r,a,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,i,r){const a=xa(e),u=sr(e);return u.add({}).next((f=>{Te(typeof f=="number",49019);const h=new Hg(f,t,i,r),m=(function(w,V,U){const P=U.baseMutations.map((j=>Rd(w.yt,j))),z=U.mutations.map((j=>Rd(w.yt,j)));return{userId:V,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:P,mutations:z}})(this.serializer,this.userId,h),_=[];let T=new rt(((E,w)=>Re(E.canonicalString(),w.canonicalString())));for(const E of r){const w=XA(this.userId,E.key.path,f);T=T.add(E.key.path.popLast()),_.push(u.put(m)),_.push(a.put(w,V1))}return T.forEach((E=>{_.push(this.indexManager.addToCollectionParentIndex(e,E))})),e.addOnCommittedListener((()=>{this.Zn[f]=h.keys()})),H.waitFor(_).next((()=>h))}))}lookupMutationBatch(e,t){return sr(e).get(t).next((i=>i?(Te(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),ls(this.serializer,i)):null))}Xn(e,t){return this.Zn[t]?H.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const r=i.keys();return this.Zn[t]=r,r}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let a=null;return sr(e).ee({index:fs,range:r},((u,f,h)=>{f.userId===this.userId&&(Te(f.batchId>=i,47524,{Yn:i}),a=ls(this.serializer,f)),h.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=ds;return sr(e).ee({index:fs,range:t,reverse:!0},((r,a,u)=>{i=a.batchId,u.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ds],[this.userId,Number.POSITIVE_INFINITY]);return sr(e).H(fs,t).next((i=>i.map((r=>ls(this.serializer,r)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=ed(this.userId,t.path),r=IDBKeyRange.lowerBound(i),a=[];return xa(e).ee({range:r},((u,f,h)=>{const[m,_,T]=u,E=zi(_);if(m===this.userId&&t.path.isEqual(E))return sr(e).get(T).next((w=>{if(!w)throw ye(61480,{er:u,batchId:T});Te(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:T}),a.push(ls(this.serializer,w))}));h.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new rt(Re);const r=[];return t.forEach((a=>{const u=ed(this.userId,a.path),f=IDBKeyRange.lowerBound(u),h=xa(e).ee({range:f},((m,_,T)=>{const[E,w,V]=m,U=zi(w);E===this.userId&&a.path.isEqual(U)?i=i.add(V):T.done()}));r.push(h)})),H.waitFor(r).next((()=>this.tr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,a=ed(this.userId,i),u=IDBKeyRange.lowerBound(a);let f=new rt(Re);return xa(e).ee({range:u},((h,m,_)=>{const[T,E,w]=h,V=zi(E);T===this.userId&&i.isPrefixOf(V)?V.length===r&&(f=f.add(w)):_.done()})).next((()=>this.tr(e,f)))}tr(e,t){const i=[],r=[];return t.forEach((a=>{r.push(sr(e).get(a).next((u=>{if(u===null)throw ye(35274,{batchId:a});Te(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:a}),i.push(ls(this.serializer,u))})))})),H.waitFor(r).next((()=>i))}removeMutationBatch(e,t){return oC(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),H.forEach(i,(r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();const i=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),r=[];return xa(e).ee({range:i},((a,u,f)=>{if(a[0]===this.userId){const h=zi(a[1]);r.push(h)}else f.done()})).next((()=>{Te(r.length===0,56720,{rr:r.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return rC(e,this.userId,t)}ir(e){return sC(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ds,lastStreamToken:""}))}}function rC(n,e,t){const i=ed(e,t.path),r=i[1],a=IDBKeyRange.lowerBound(i);let u=!1;return xa(n).ee({range:a,Y:!0},((f,h,m)=>{const[_,T,E]=f;_===e&&T===r&&(u=!0),m.done()})).next((()=>u))}function sr(n){return Ht(n,gi)}function xa(n){return Ht(n,Fa)}function sC(n){return Ht(n,Gu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Es(0)}static ar(){return new Es(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const i=new Es(t.highestTargetId);return t.highestTargetId=i.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Se.fromTimestamp(new it(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.ur(e).next((r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.cr(e,r))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((i=>(i.targetCount+=1,this.hr(t,i),this.cr(e,i))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Sa(e).delete(t.targetId))).next((()=>this.ur(e))).next((i=>(Te(i.targetCount>0,8065),i.targetCount-=1,this.cr(e,i))))}removeTargets(e,t,i){let r=0;const a=[];return Sa(e).ee(((u,f)=>{const h=Iu(f);h.sequenceNumber<=t&&i.get(h.targetId)===null&&(r++,a.push(this.removeTargetData(e,h)))})).next((()=>H.waitFor(a))).next((()=>r))}forEachTarget(e,t){return Sa(e).ee(((i,r)=>{const a=Iu(r);t(a)}))}ur(e){return uE(e).get(Ed).next((t=>(Te(t!==null,2888),t)))}cr(e,t){return uE(e).put(Ed,t)}lr(e,t){return Sa(e).put(jI(this.serializer,t))}hr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const i=_s(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let a=null;return Sa(e).ee({range:r,index:ZA},((u,f,h)=>{const m=Iu(f);ec(t,m.target)&&(a=m,h.done())})).next((()=>a))}addMatchingKeys(e,t,i){const r=[],a=lr(e);return t.forEach((u=>{const f=un(u.path);r.push(a.put({targetId:i,path:f})),r.push(this.referenceDelegate.addReference(e,i,u))})),H.waitFor(r)}removeMatchingKeys(e,t,i){const r=lr(e);return H.forEach(t,(a=>{const u=un(a.path);return H.waitFor([r.delete([i,u]),this.referenceDelegate.removeReference(e,i,a)])}))}removeMatchingKeysForTargetId(e,t){const i=lr(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=lr(e);let a=Pe();return r.ee({range:i,Y:!0},((u,f,h)=>{const m=zi(u[1]),_=new de(m);a=a.add(_)})).next((()=>a))}containsKey(e,t){const i=un(t.path),r=IDBKeyRange.bound([i],[HA(i)],!1,!0);let a=0;return lr(e).ee({index:Pg,Y:!0,range:r},(([u,f],h,m)=>{u!==0&&(a++,m.done())})).next((()=>a>0))}At(e,t){return Sa(e).get(t).next((i=>i?Iu(i):null))}}function Sa(n){return Ht(n,Ba)}function uE(n){return Ht(n,hs)}function lr(n){return Ht(n,Ga)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="LruGarbageCollector",uD=1048576;function fE([n,e],[t,i]){const r=Re(n,t);return r===0?Re(e,i):r}class cD{constructor(e){this.Pr=e,this.buffer=new rt(fE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();fE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ae(cE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Er(t)?ae(cE,"Ignoring IndexedDB error during garbage collection: ",t):await As(t)}await this.Ar(3e5)}))}}class fD{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(ei.ce);const i=new cD(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(lE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,a,u,f,h,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(m=Date.now(),Ia()<=Ke.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(f-u)+`ms
	Removed ${a} targets in `+(h-f)+`ms
	Removed ${T} documents in `+(m-h)+`ms
Total Duration: ${m-_}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:T}))))}}function lC(n,e){return new fD(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,t){this.db=e,this.garbageCollector=lC(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((i,r)=>t(r)))}addReference(e,t,i){return qf(e,i)}removeReference(e,t,i){return qf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return qf(e,t)}wr(e,t){return(function(r,a){let u=!1;return sC(r).te((f=>rC(r,f,a).next((h=>(h&&(u=!0),H.resolve(!h)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let a=0;return this.yr(e,((u,f)=>{if(f<=t){const h=this.wr(e,u).next((m=>{if(!m)return a++,i.getEntry(e,u).next((()=>(i.removeEntry(u,Se.min()),lr(e).delete((function(T){return[0,un(T.path)]})(u)))))}));r.push(h)}})).next((()=>H.waitFor(r))).next((()=>i.apply(e))).next((()=>a))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return qf(e,t)}yr(e,t){const i=lr(e);let r,a=ei.ce;return i.ee({index:Pg},(([u,f],{path:h,sequenceNumber:m})=>{u===0?(a!==ei.ce&&t(new de(zi(r)),a),a=m,r=h):a=ei.ce})).next((()=>{a!==ei.ce&&t(new de(zi(r)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qf(n,e){return lr(n).put((function(i,r){return{targetId:0,path:un(i.path),sequenceNumber:r}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.changes=new So((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?H.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ts(e).put(i)}removeEntry(e,t,i){return ts(e).delete((function(a,u){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],xd(u),f[f.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.br(e,i))))}getEntry(e,t){let i=Et.newInvalidDocument(t);return ts(e).ee({index:td,range:IDBKeyRange.only(pu(t))},((r,a)=>{i=this.Sr(t,a)})).next((()=>i))}Dr(e,t){let i={size:0,document:Et.newInvalidDocument(t)};return ts(e).ee({index:td,range:IDBKeyRange.only(pu(t))},((r,a)=>{i={document:this.Sr(t,a),size:Nd(a)}})).next((()=>i))}getEntries(e,t){let i=kn();return this.Cr(e,t,((r,a)=>{const u=this.Sr(r,a);i=i.insert(r,u)})).next((()=>i))}vr(e,t){let i=kn(),r=new yt(de.comparator);return this.Cr(e,t,((a,u)=>{const f=this.Sr(a,u);i=i.insert(a,f),r=r.insert(a,Nd(u))})).next((()=>({documents:i,Fr:r})))}Cr(e,t,i){if(t.isEmpty())return H.resolve();let r=new rt(mE);t.forEach((h=>r=r.add(h)));const a=IDBKeyRange.bound(pu(r.first()),pu(r.last())),u=r.getIterator();let f=u.getNext();return ts(e).ee({index:td,range:a},((h,m,_)=>{const T=de.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;f&&mE(f,T)<0;)i(f,null),f=u.getNext();f&&f.isEqual(T)&&(i(f,m),f=u.hasNext()?u.getNext():null),f?_.j(pu(f)):_.done()})).next((()=>{for(;f;)i(f,null),f=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,i,r,a){const u=t.path,f=[u.popLast().toArray(),u.lastSegment(),xd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],h=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ts(e).H(IDBKeyRange.bound(f,h,!0)).next((m=>{a==null||a.incrementDocumentReadCount(m.length);let _=kn();for(const T of m){const E=this.Sr(de.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);E.isFoundDocument()&&(nc(t,E)||r.has(E.key))&&(_=_.insert(E.key,E))}return _}))}getAllFromCollectionGroup(e,t,i,r){let a=kn();const u=hE(t,i),f=hE(t,On.max());return ts(e).ee({index:WA,range:IDBKeyRange.bound(u,f,!0)},((h,m,_)=>{const T=this.Sr(de.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(T.key,T),a.size===r&&_.done()})).next((()=>a))}newChangeBuffer(e){return new mD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return dE(e).get(Hp).next((t=>(Te(!!t,20021),t)))}br(e,t){return dE(e).put(Hp,t)}Sr(e,t){if(t){const i=ZN(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Se.min())))return i}return Et.newInvalidDocument(e)}}function cC(n){return new hD(n)}class mD extends uC{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new So((i=>i.toString()),((i,r)=>i.isEqual(r)))}applyChanges(e){const t=[];let i=0,r=new rt(((a,u)=>Re(a.canonicalString(),u.canonicalString())));return this.changes.forEach(((a,u)=>{const f=this.Or.get(a);if(t.push(this.Mr.removeEntry(e,a,f.readTime)),u.isValidDocument()){const h=$T(this.Mr.serializer,u);r=r.add(a.path.popLast());const m=Nd(h);i+=m-f.size,t.push(this.Mr.addEntry(e,a,h))}else if(i-=f.size,this.trackRemovals){const h=$T(this.Mr.serializer,u.convertToNoDocument(Se.min()));t.push(this.Mr.addEntry(e,a,h))}})),r.forEach((a=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Mr.updateMetadata(e,i)),H.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((i=>(this.Or.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:i,Fr:r})=>(r.forEach(((a,u)=>{this.Or.set(a,{size:u,readTime:i.get(a).readTime})})),i)))}}function dE(n){return Ht(n,qu)}function ts(n){return Ht(n,Td)}function pu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hE(n,e){const t=e.documentKey.path.toArray();return[n,xd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function mE(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let a=0;a<t.length-2&&a<i.length-2;++a)if(r=Re(t[a],i[a]),r)return r;return r=Re(t.length,i.length),r||(r=Re(t[t.length-2],i[i.length-2]),r||Re(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&Uu(i.mutation,r,Cn.empty(),it.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Pe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Pe()){const r=Ki();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let u=Su();return a.forEach(((f,h)=>{u=u.insert(f,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Ki();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Pe())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,r){let a=kn();const u=Pu(),f=(function(){return Pu()})();return t.forEach(((h,m)=>{const _=i.get(m.key);r.has(m.key)&&(_===void 0||_.mutation instanceof Ao)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),Uu(_.mutation,m,_.mutation.getFieldMask(),it.now())):u.set(m.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>f.set(m,new pD(_,u.get(m)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Pu();let r=new yt(((u,f)=>u-f)),a=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((h=>{const m=t.get(h);if(m===null)return;let _=i.get(h)||Cn.empty();_=f.applyToLocalView(m,_),i.set(h,_);const T=(r.get(f.batchId)||Pe()).add(h);r=r.insert(f.batchId,T)}))})).next((()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const h=f.getNext(),m=h.key,_=h.value,T=xI();_.forEach((E=>{if(!a.has(E)){const w=PI(t.get(E),i.get(E));w!==null&&T.set(E,w),a=a.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,T))}return H.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return yN(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):AI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const u=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):H.resolve(Ki());let f=Ou,h=a;return u.next((m=>H.forEach(m,((_,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(_)?H.resolve():this.remoteDocumentCache.getEntry(e,_).next((E=>{h=h.insert(_,E)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,h,m,Pe()))).next((_=>({batchId:f,changes:RI(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next((i=>{let r=Su();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let u=Su();return this.indexManager.getCollectionParents(e,a).next((f=>H.forEach(f,(h=>{const m=(function(T,E){return new tc(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,r).next((_=>{_.forEach(((T,E)=>{u=u.insert(T,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((u=>{a.forEach(((h,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,Et.newInvalidDocument(_)))}));let f=Su();return u.forEach(((h,m)=>{const _=a.get(h);_!==void 0&&Uu(_.mutation,m,Cn.empty(),it.now()),nc(t,m)&&(f=f.insert(h,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return H.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:gn(r.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:eC(r.bundledQuery),readTime:gn(r.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.overlays=new yt(de.comparator),this.Lr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ki();return H.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.bt(e,t,a)})),H.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),H.resolve()}getOverlaysForCollection(e,t,i){const r=Ki(),a=t.length+1,u=new de(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const h=f.getNext().value,m=h.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&h.largestBatchId>i&&r.set(h.getKey(),h)}return H.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new yt(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let _=a.get(m.largestBatchId);_===null&&(_=Ki(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const f=Ki(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((m,_)=>f.set(m,_))),!(f.size()>=r)););return H.resolve(f)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new Kg(t,i));let a=this.Lr.get(t);a===void 0&&(a=Pe(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(){this.kr=new rt(Jt.Kr),this.qr=new rt(Jt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Jt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Jt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new de(new We([])),i=new Jt(t,e),r=new Jt(t,e+1),a=[];return this.qr.forEachInRange([i,r],(u=>{this.Wr(u),a.push(u.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new de(new We([])),i=new Jt(t,e),r=new Jt(t,e+1);let a=Pe();return this.qr.forEachInRange([i,r],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Jt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Jt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return de.comparator(e.key,t.key)||Re(e.Hr,t.Hr)}static Ur(e,t){return Re(e.Hr,t.Hr)||de.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new rt(Jt.Kr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Hg(a,t,i,r);this.mutationQueue.push(u);for(const f of r)this.Jr=this.Jr.add(new Jt(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return H.resolve(u)}lookupMutationBatch(e,t){return H.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),a=r<0?0:r;return H.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?ds:this.Yn-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Jt(t,0),r=new Jt(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,r],(u=>{const f=this.Zr(u.Hr);a.push(f)})),H.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new rt(Re);return t.forEach((r=>{const a=new Jt(r,0),u=new Jt(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,u],(f=>{i=i.add(f.Hr)}))})),H.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;de.isDocumentKey(a)||(a=a.child(""));const u=new Jt(new de(a),0);let f=new rt(Re);return this.Jr.forEachWhile((h=>{const m=h.key.path;return!!i.isPrefixOf(m)&&(m.length===r&&(f=f.add(h.Hr)),!0)}),u),H.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Te(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return H.forEach(t.mutations,(r=>{const a=new Jt(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Jt(t,0),r=this.Jr.firstAfterOrEqual(i);return H.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.ti=e,this.docs=(function(){return new yt(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return H.resolve(i?i.document.mutableCopy():Et.newInvalidDocument(t))}getEntries(e,t){let i=kn();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Et.newInvalidDocument(r))})),H.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=kn();const u=t.path,f=new de(u.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(f);for(;h.hasNext();){const{key:m,value:{document:_}}=h.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||Mg(YA(_),i)<=0||(r.has(_.key)||nc(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return H.resolve(a)}getAllFromCollectionGroup(e,t,i,r){ye(9500)}ni(e,t){return H.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new ED(this)}getSize(e){return H.resolve(this.size)}}class ED extends uC{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),H.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.persistence=e,this.ri=new So((t=>_s(t)),ec),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.ii=0,this.si=new Xg,this.targetCount=0,this.oi=Es._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),H.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Es(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.lr(t),H.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),H.waitFor(a).next((()=>r))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return H.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),H.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((u=>{a.push(r.markPotentiallyOrphaned(e,u))})),H.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return H.resolve(i)}containsKey(e,t){return H.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){this._i={},this.overlays={},this.ai=new ei(0),this.ui=!1,this.ui=!0,this.ci=new _D,this.referenceDelegate=e(this),this.li=new SD(this),this.indexManager=new sD,this.remoteDocumentCache=(function(r){return new TD(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new ZI(t),this.Pi=new gD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new vD(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){ae("MemoryPersistence","Starting transaction:",e);const r=new AD(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((a=>this.referenceDelegate.Ii(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ei(e,t){return H.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class AD extends QA{constructor(e){super(),this.currentSequenceNumber=e}}class ih{constructor(e){this.persistence=e,this.Ri=new Xg,this.Ai=null}static Vi(e){return new ih(e)}get di(){if(this.Ai)return this.Ai;throw ye(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),H.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.di,(i=>{const r=de.fromPath(i);return this.mi(e,r).next((a=>{a||t.removeEntry(r,Se.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Dd{constructor(e,t){this.persistence=e,this.fi=new So((i=>un(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=lC(this,t)}static Vi(e,t){return new Dd(e,t)}Ti(){}Ii(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return H.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((a=>a?H.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ni(e,(u=>this.wr(e,u,t).next((f=>{f||(i++,a.removeEntry(u,Se.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),H.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=id(e.data.value)),t}wr(e,t,i){return H.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return H.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.serializer=e}k(e,t,i,r){const a=new qd("createOrUpgrade",t);i<1&&r>=1&&((function(h){h.createObjectStore(ju)})(e),(function(h){h.createObjectStore(Gu,{keyPath:M1}),h.createObjectStore(gi,{keyPath:CT,autoIncrement:!0}).createIndex(fs,wT,{unique:!0}),h.createObjectStore(Fa)})(e),pE(e),(function(h){h.createObjectStore(os)})(e));let u=H.resolve();return i<3&&r>=3&&(i!==0&&((function(h){h.deleteObjectStore(Ga),h.deleteObjectStore(Ba),h.deleteObjectStore(hs)})(e),pE(e)),u=u.next((()=>(function(h){const m=h.store(hs),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return m.put(Ed,_)})(a)))),i<4&&r>=4&&(i!==0&&(u=u.next((()=>(function(h,m){return m.store(gi).H().next((T=>{h.deleteObjectStore(gi),h.createObjectStore(gi,{keyPath:CT,autoIncrement:!0}).createIndex(fs,wT,{unique:!0});const E=m.store(gi),w=T.map((V=>E.put(V)));return H.waitFor(w)}))})(e,a)))),u=u.next((()=>{(function(h){h.createObjectStore(qa,{keyPath:G1})})(e)}))),i<5&&r>=5&&(u=u.next((()=>this.gi(a)))),i<6&&r>=6&&(u=u.next((()=>((function(h){h.createObjectStore(qu)})(e),this.pi(a))))),i<7&&r>=7&&(u=u.next((()=>this.yi(a)))),i<8&&r>=8&&(u=u.next((()=>this.wi(e,a)))),i<9&&r>=9&&(u=u.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&r>=10&&(u=u.next((()=>this.bi(a)))),i<11&&r>=11&&(u=u.next((()=>{(function(h){h.createObjectStore(zd,{keyPath:q1})})(e),(function(h){h.createObjectStore(Kd,{keyPath:H1})})(e)}))),i<12&&r>=12&&(u=u.next((()=>{(function(h){const m=h.createObjectStore(Yd,{keyPath:X1});m.createIndex(Kp,W1,{unique:!1}),m.createIndex(tI,Z1,{unique:!1})})(e)}))),i<13&&r>=13&&(u=u.next((()=>(function(h){const m=h.createObjectStore(Td,{keyPath:P1});m.createIndex(td,U1),m.createIndex(WA,L1)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(os)))),i<14&&r>=14&&(u=u.next((()=>this.Di(e,a)))),i<15&&r>=15&&(u=u.next((()=>(function(h){h.createObjectStore(Ug,{keyPath:z1,autoIncrement:!0}).createIndex(zp,K1,{unique:!1}),h.createObjectStore(Nu,{keyPath:Y1}).createIndex(jA,J1,{unique:!1}),h.createObjectStore(Du,{keyPath:Q1}).createIndex(eI,$1,{unique:!1})})(e)))),i<16&&r>=16&&(u=u.next((()=>{t.objectStore(Nu).clear()})).next((()=>{t.objectStore(Du).clear()}))),i<17&&r>=17&&(u=u.next((()=>{(function(h){h.createObjectStore(Lg,{keyPath:j1})})(e)}))),i<18&&r>=18&&wA()&&(u=u.next((()=>{t.objectStore(Nu).clear()})).next((()=>{t.objectStore(Du).clear()}))),u}pi(e){let t=0;return e.store(os).ee(((i,r)=>{t+=Nd(r)})).next((()=>{const i={byteSize:t};return e.store(qu).put(Hp,i)}))}gi(e){const t=e.store(Gu),i=e.store(gi);return t.H().next((r=>H.forEach(r,(a=>{const u=IDBKeyRange.bound([a.userId,ds],[a.userId,a.lastAcknowledgedBatchId]);return i.H(fs,u).next((f=>H.forEach(f,(h=>{Te(h.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const m=ls(this.serializer,h);return oC(e,a.userId,m).next((()=>{}))}))))}))))}yi(e){const t=e.store(Ga),i=e.store(os);return e.store(hs).get(Ed).next((r=>{const a=[];return i.ee(((u,f)=>{const h=new We(u),m=(function(T){return[0,un(T)]})(h);a.push(t.get(m).next((_=>_?H.resolve():(T=>t.put({targetId:0,path:un(T),sequenceNumber:r.highestListenSequenceNumber}))(h))))})).next((()=>H.waitFor(a)))}))}wi(e,t){e.createObjectStore(Hu,{keyPath:B1});const i=t.store(Hu),r=new $g,a=u=>{if(r.add(u)){const f=u.lastSegment(),h=u.popLast();return i.put({collectionId:f,parent:un(h)})}};return t.store(os).ee({Y:!0},((u,f)=>{const h=new We(u);return a(h.popLast())})).next((()=>t.store(Fa).ee({Y:!0},(([u,f,h],m)=>{const _=zi(f);return a(_.popLast())}))))}bi(e){const t=e.store(Ba);return t.ee(((i,r)=>{const a=Iu(r),u=jI(this.serializer,a);return t.put(u)}))}Si(e,t){const i=t.store(os),r=[];return i.ee(((a,u)=>{const f=t.store(Td),h=(function(T){return T.document?new de(We.fromString(T.document.name).popFirst(5)):T.noDocument?de.fromSegments(T.noDocument.path):T.unknownDocument?de.fromSegments(T.unknownDocument.path):ye(36783)})(u).path.toArray(),m={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};r.push(f.put(m))})).next((()=>H.waitFor(r)))}Di(e,t){const i=t.store(gi),r=cC(this.serializer),a=new Wg(ih.Vi,this.serializer.yt);return i.H().next((u=>{const f=new Map;return u.forEach((h=>{let m=f.get(h.userId)??Pe();ls(this.serializer,h).keys().forEach((_=>m=m.add(_))),f.set(h.userId,m)})),H.forEach(f,((h,m)=>{const _=new tn(m),T=th.wt(this.serializer,_),E=a.getIndexManager(_),w=nh.wt(_,this.serializer,E,a.referenceDelegate);return new fC(r,w,T,E).recalculateAndSaveOverlaysForDocumentKeys(new Yp(t,ei.ce),h).next()}))}))}}function pE(n){n.createObjectStore(Ga,{keyPath:O1}).createIndex(Pg,F1,{unique:!0}),n.createObjectStore(Ba,{keyPath:"targetId"}).createIndex(ZA,k1,{unique:!0}),n.createObjectStore(hs)}const ar="IndexedDbPersistence",Cp=18e5,wp=5e3,Rp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",CD="main";class Zg{constructor(e,t,i,r,a,u,f,h,m,_,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ci=a,this.window=u,this.document=f,this.Fi=m,this.Mi=_,this.xi=T,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=E=>Promise.resolve(),!Zg.v())throw new ce(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dD(this,r),this.Ki=t+CD,this.serializer=new ZI(h),this.qi=new mr(this.Ki,this.xi,new ID(this.serializer)),this.ci=new eD,this.li=new lD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cC(this.serializer),this.Pi=new jN,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&mn(ar,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(ne.FAILED_PRECONDITION,Rp);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new ei(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Hf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Er(e))return ae(ar,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ae(ar,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return gu(e).get(ya).next((t=>H.resolve(this.Xi(t))))}Yi(e){return Hf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Cp)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Ht(t,qa);return i.H().next((r=>{const a=this.ns(r,Cp),u=r.filter((f=>a.indexOf(f)===-1));return H.forEach(u,(f=>i.delete(f.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?H.resolve(!0):gu(e).get(ya).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,wp)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ce(ne.FAILED_PRECONDITION,Rp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hf(e).H().next((i=>this.ns(i,wp).find((r=>{if(this.clientId!==r.clientId){const a=!this.networkEnabled&&r.networkEnabled,u=!this.inForeground&&r.inForeground,f=this.networkEnabled===r.networkEnabled;if(a||u&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ae(ar,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[ju,qa],(e=>{const t=new Yp(e,ei.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((i=>this.ts(i.updateTimeMs,t)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Hf(e).H().next((t=>this.ns(t,Cp).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return nh.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aD(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return th.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,i){ae(ar,"Starting transaction:",e);const r=t==="readonly"?"readonly":"readwrite",a=(function(h){return h===18?nN:h===17?rI:h===16?tN:h===15?kg:h===14?oI:h===13?iI:h===12?eN:h===11?nI:void ye(60245)})(this.xi);let u;return this.qi.runTransaction(e,r,a,(f=>(u=new Yp(f,this.ai?this.ai.next():ei.ce),t==="readwrite-primary"?this.ji(u).next((h=>!!h||this.Hi(u))).next((h=>{if(!h)throw mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new ce(ne.FAILED_PRECONDITION,JA);return i(u)})).next((h=>this.Zi(u).next((()=>h)))):this.Ps(u).next((()=>i(u)))))).then((f=>(u.raiseOnCommittedEvent(),f)))}Ps(e){return gu(e).get(ya).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,wp)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(ne.FAILED_PRECONDITION,Rp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gu(e).put(ya,t)}static v(){return mr.v()}Ji(e){const t=gu(e);return t.get(ya).next((i=>this.Xi(i)?(ae(ar,"Releasing primary lease."),t.delete(ya)):H.resolve()))}ts(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(mn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;CA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const i=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return ae(ar,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return mn(ar,"Failed to get zombied client id.",i),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){mn("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gu(n){return Ht(n,ju)}function Hf(n){return Ht(n,qa)}function wD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=Pe(),r=Pe();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new jg(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return CA()?8:$A(md())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.gs(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ps(e,t,r,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new RD;return this.ys(e,t,u).next((f=>{if(a.result=f,this.As)return this.ws(e,t,u,f.size)}))})).next((()=>a.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?(Ia()<=Ke.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Ca(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),H.resolve()):(Ia()<=Ke.DEBUG&&ae("QueryEngine","Query:",Ca(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(Ia()<=Ke.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Ca(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):H.resolve())}gs(e,t){if(FT(t))return H.resolve(null);let i=ti(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=jp(t,null,"F"),i=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Pe(...a);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((h=>{const m=this.bs(t,f);return this.Ss(t,m,u,h.readTime)?this.gs(e,jp(t,null,"F")):this.Ds(e,m,t,h)}))))})))))}ps(e,t,i,r){return FT(t)||r.isEqual(Se.min())?H.resolve(null):this.fs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ss(t,u,i,r)?H.resolve(null):(Ia()<=Ke.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ca(t)),this.Ds(e,u,t,C1(r,Ou)).next((f=>f)))}))}bs(e,t){let i=new rt(CI(e));return t.forEach(((r,a)=>{nc(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ys(e,t,i){return Ia()<=Ke.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Ca(t)),this.fs.getDocumentsMatchingQuery(e,t,On.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="LocalStore",xD=3e8;class bD{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new yt(Re),this.Fs=new So((a=>_s(a)),ec),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function hC(n,e,t,i){return new bD(n,e,t,i)}async function mC(n,e){const t=xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],f=[];let h=Pe();for(const m of r){u.push(m.batchId);for(const _ of m.mutations)h=h.add(_.key)}for(const m of a){f.push(m.batchId);for(const _ of m.mutations)h=h.add(_.key)}return t.localDocuments.getDocuments(i,h).next((m=>({Ns:m,removedBatchIds:u,addedBatchIds:f})))}))}))}function ND(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,h,m,_){const T=m.batch,E=T.keys();let w=H.resolve();return E.forEach((V=>{w=w.next((()=>_.getEntry(h,V))).next((U=>{const P=m.docVersions.get(V);Te(P!==null,48541),U.version.compareTo(P)<0&&(T.applyToRemoteDocument(U,m),U.isValidDocument()&&(U.setReadTime(m.commitVersion),_.addEntry(U)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(h,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let h=Pe();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(h=h.add(f.batch.mutations[m].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function pC(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function DD(n,e){const t=xe(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const f=[];e.targetChanges.forEach(((_,T)=>{const E=r.get(T);if(!E)return;f.push(t.li.removeMatchingKeys(a,_.removedDocuments,T).next((()=>t.li.addMatchingKeys(a,_.addedDocuments,T))));let w=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(Ft.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,i)),r=r.insert(T,w),(function(U,P,z){return U.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=xD?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(E,w,_)&&f.push(t.li.updateTargetData(a,w))}));let h=kn(),m=Pe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),f.push(MD(a,u,e.documentUpdates).next((_=>{h=_.Bs,m=_.Ls}))),!i.isEqual(Se.min())){const _=t.li.getLastRemoteSnapshotVersion(a).next((T=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));f.push(_)}return H.waitFor(f).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,h,m))).next((()=>h))})).then((a=>(t.vs=r,a)))}function MD(n,e,t){let i=Pe(),r=Pe();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=kn();return t.forEach(((f,h)=>{const m=a.get(f);h.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(f)),h.isNoDocument()&&h.version.isEqual(Se.min())?(e.removeEntry(f,h.readTime),u=u.insert(f,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),u=u.insert(f,h)):ae(ey,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",h.version)})),{Bs:u,Ls:r}}))}function VD(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ds),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function PD(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((a=>a?(r=a,H.resolve(r)):t.li.allocateTargetId(i).next((u=>(r=new go(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function ag(n,e,t){const i=xe(n),r=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Er(u))throw u;ae(ey,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function gE(n,e,t){const i=xe(n);let r=Se.min(),a=Pe();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,m,_){const T=xe(h),E=T.Fs.get(_);return E!==void 0?H.resolve(T.vs.get(E)):T.li.getTargetData(m,_)})(i,u,ti(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,f.targetId).next((h=>{a=h}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?r:Se.min(),t?a:Pe()))).next((f=>(UD(i,vN(e),f),{documents:f,ks:a})))))}function UD(n,e,t){let i=n.Ms.get(e)||Se.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class yE{constructor(){this.activeTargetIds=CN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gC{constructor(){this.vo=new yE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new yE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="ConnectivityMonitor";class vE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ae(_E,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ae(_E,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf=null;function lg(){return zf===null?zf=(function(){return 268435456+Math.round(2147483648*Math.random())})():zf++,"0x"+zf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="RestConnection",kD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class OD{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===Sd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,a){const u=lg(),f=this.Qo(e,t.toUriEncodedString());ae(xp,`Sending RPC '${e}' ${u}:`,f,i);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,r,a);const{host:m}=new URL(f),_=xg(m);return this.zo(e,f,h,i,_).then((T=>(ae(xp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw gr(xp,`RPC '${e}' ${u} failed with error: `,T,"url: ",f,"request:",i),T}))}jo(e,t,i,r,a,u){return this.Wo(e,t,i,r,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ja})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}Qo(e,t){const i=kD[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection",yu=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class Va extends OD{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Va.c_){const e=FA();yu(e,OA.STAT_EVENT,(t=>{t.stat===Bp.PROXY?ae(rn,"STAT_EVENT: detected buffering proxy"):t.stat===Bp.NOPROXY&&ae(rn,"STAT_EVENT: detected no buffering proxy")})),Va.c_=!0}}zo(e,t,i,r,a){const u=lg();return new Promise(((f,h)=>{const m=new LA;m.setWithCredentials(!0),m.listenOnce(kA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Zf.NO_ERROR:const T=m.getResponseJson();ae(rn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case Zf.TIMEOUT:ae(rn,`RPC '${e}' ${u} timed out`),h(new ce(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Zf.HTTP_ERROR:const E=m.getStatus();if(ae(rn,`RPC '${e}' ${u} failed with status:`,E,"response text:",m.getResponseText()),E>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const V=w==null?void 0:w.error;if(V&&V.status&&V.message){const U=(function(z){const j=z.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(j)>=0?j:ne.UNKNOWN})(V.status);h(new ce(U,V.message))}else h(new ce(ne.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new ce(ne.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ae(rn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);ae(rn,`RPC '${e}' ${u} sending request:`,r),m.send(t,"POST",_,i,15)}))}T_(e,t,i){const r=lg(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const m=a.join("");ae(rn,`Creating RPC '${e}' stream ${r}: ${m}`,f);const _=u.createWebChannel(m,f);this.I_(_);let T=!1,E=!1;const w=new FD({Ho:V=>{E?ae(rn,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(T||(ae(rn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),T=!0),ae(rn,`RPC '${e}' stream ${r} sending:`,V),_.send(V))},Jo:()=>_.close()});return yu(_,Eu.EventType.OPEN,(()=>{E||(ae(rn,`RPC '${e}' stream ${r} transport opened.`),w.i_())})),yu(_,Eu.EventType.CLOSE,(()=>{E||(E=!0,ae(rn,`RPC '${e}' stream ${r} transport closed`),w.o_(),this.E_(_))})),yu(_,Eu.EventType.ERROR,(V=>{E||(E=!0,gr(rn,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),w.o_(new ce(ne.UNAVAILABLE,"The operation could not be completed")))})),yu(_,Eu.EventType.MESSAGE,(V=>{var U;if(!E){const P=V.data[0];Te(!!P,16349);const z=P,j=(z==null?void 0:z.error)||((U=z[0])==null?void 0:U.error);if(j){ae(rn,`RPC '${e}' stream ${r} received error:`,j);const $=j.status;let se=(function(x){const N=Lt[x];if(N!==void 0)return kI(N)})($),X=j.message;$==="NOT_FOUND"&&X.includes("database")&&X.includes("does not exist")&&X.includes(this.databaseId.database)&&gr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),se===void 0&&(se=ne.INTERNAL,X="Unknown error status: "+$+" with message "+j.message),E=!0,w.o_(new ce(se,X)),_.close()}else ae(rn,`RPC '${e}' stream ${r} received:`,P),w.__(P)}})),Va.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return BA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(n){return new Va(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(){return typeof window<"u"?window:null}function ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(n){return new qN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Va.c_=!1;class yC{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&ae("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="PersistentStream";class _C{constructor(e,t,i,r,a,u,f,h){this.Ci=e,this.b_=i,this.S_=r,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(mn(t.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new ce(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ae(TE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ae(TE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qD extends _C{constructor(e,t,i,r,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=KN(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Se.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Se.min():u.readTime?gn(u.readTime):Se.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=ng(this.serializer),t.addTarget=(function(a,u){let f;const h=u.target;if(f=Id(h)?{documents:KI(a,h)}:{query:YI(a,h).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=BI(a,u.resumeToken);const m=eg(a,u.expectedCount);m!==null&&(f.expectedCount=m)}else if(u.snapshotVersion.compareTo(Se.min())>0){f.readTime=$a(a,u.snapshotVersion.toTimestamp());const m=eg(a,u.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const i=JN(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=ng(this.serializer),t.removeTarget=e,this.K_(t)}}class HD extends _C{constructor(e,t,i,r,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=YN(e.writeResults,e.commitTime),i=gn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ng(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Rd(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{}class KD extends zD{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ce(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,tg(t,i),r,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(ne.UNKNOWN,a.toString())}))}jo(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,tg(t,i),r,u,f,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(ne.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function YD(n,e,t,i){return new KD(n,e,t,i)}class JD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mn(t),this.aa=!1):ae("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="RemoteStore";class QD{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{Is(this)&&(ae(Ss,"Restarting streams for network reachability change."),await(async function(h){const m=xe(h);m.Ea.add(4),await oc(m),m.Va.set("Unknown"),m.Ea.delete(4),await rh(m)})(this))}))})),this.Va=new JD(i,r)}}async function rh(n){if(Is(n))for(const e of n.Ra)await e(!0)}async function oc(n){for(const e of n.Ra)await e(!1)}function vC(n,e){const t=xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),oy(t)?iy(t):tl(t).O_()&&ny(t,e))}function ty(n,e){const t=xe(n),i=tl(t);t.Ia.delete(e),i.O_()&&TC(t,e),t.Ia.size===0&&(i.O_()?i.L_():Is(t)&&t.Va.set("Unknown"))}function ny(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}tl(n).Z_(e)}function TC(n,e){n.da.$e(e),tl(n).X_(e)}function iy(n){n.da=new ON({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),tl(n).start(),n.Va.ua()}function oy(n){return Is(n)&&!tl(n).x_()&&n.Ia.size>0}function Is(n){return xe(n).Ea.size===0}function EC(n){n.da=void 0}async function $D(n){n.Va.set("Online")}async function XD(n){n.Ia.forEach(((e,t)=>{ny(n,e)}))}async function WD(n,e){EC(n),oy(n)?(n.Va.ha(e),iy(n)):n.Va.set("Unknown")}async function ZD(n,e,t){if(n.Va.set("Online"),e instanceof FI&&e.state===2&&e.cause)try{await(async function(r,a){const u=a.cause;for(const f of a.targetIds)r.Ia.has(f)&&(await r.remoteSyncer.rejectListen(f,u),r.Ia.delete(f),r.da.removeTarget(f))})(n,e)}catch(i){ae(Ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Md(n,i)}else if(e instanceof sd?n.da.Xe(e):e instanceof OI?n.da.st(e):n.da.tt(e),!t.isEqual(Se.min()))try{const i=await pC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const f=a.da.Tt(u);return f.targetChanges.forEach(((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const _=a.Ia.get(m);_&&a.Ia.set(m,_.withResumeToken(h.resumeToken,u))}})),f.targetMismatches.forEach(((h,m)=>{const _=a.Ia.get(h);if(!_)return;a.Ia.set(h,_.withResumeToken(Ft.EMPTY_BYTE_STRING,_.snapshotVersion)),TC(a,h);const T=new go(_.target,h,m,_.sequenceNumber);ny(a,T)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){ae(Ss,"Failed to raise snapshot:",i),await Md(n,i)}}async function Md(n,e,t){if(!Er(e))throw e;n.Ea.add(1),await oc(n),n.Va.set("Offline"),t||(t=()=>pC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ae(Ss,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await rh(n)}))}function SC(n,e){return e().catch((t=>Md(n,t,e)))}async function rc(n){const e=xe(n),t=vr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ds;for(;jD(e);)try{const r=await VD(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,eM(e,r)}catch(r){await Md(e,r)}AC(e)&&IC(e)}function jD(n){return Is(n)&&n.Ta.length<10}function eM(n,e){n.Ta.push(e);const t=vr(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function AC(n){return Is(n)&&!vr(n).x_()&&n.Ta.length>0}function IC(n){vr(n).start()}async function tM(n){vr(n).ra()}async function nM(n){const e=vr(n);for(const t of n.Ta)e.ea(t.mutations)}async function iM(n,e,t){const i=n.Ta.shift(),r=zg.from(i,e,t);await SC(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await rc(n)}async function oM(n,e){e&&vr(n).Y_&&await(async function(i,r){if((function(u){return UN(u)&&u!==ne.ABORTED})(r.code)){const a=i.Ta.shift();vr(i).B_(),await SC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await rc(i)}})(n,e),AC(n)&&IC(n)}async function EE(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),ae(Ss,"RemoteStore received new credentials");const i=Is(t);t.Ea.add(3),await oc(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await rh(t)}async function rM(n,e){const t=xe(n);e?(t.Ea.delete(2),await rh(t)):e||(t.Ea.add(2),await oc(t),t.Va.set("Unknown"))}function tl(n){return n.ma||(n.ma=(function(t,i,r){const a=xe(t);return a.sa(),new qD(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:$D.bind(null,n),Yo:XD.bind(null,n),t_:WD.bind(null,n),J_:ZD.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),oy(n)?iy(n):n.Va.set("Unknown")):(await n.ma.stop(),EC(n))}))),n.ma}function vr(n){return n.fa||(n.fa=(function(t,i,r){const a=xe(t);return a.sa(),new HD(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:tM.bind(null,n),t_:oM.bind(null,n),ta:nM.bind(null,n),na:iM.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await rc(n)):(await n.fa.stop(),n.Ta.length>0&&(ae(Ss,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const u=Date.now()+i,f=new ry(e,t,u,r,a);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(n,e){if(mn("AsyncQueue",`${e}: ${n}`),Er(n))return new ce(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static emptySet(e){return new Pa(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||de.comparator(t.key,i.key):(t,i)=>de.comparator(t.key,i.key),this.keyedMap=Su(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Pa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.ga=new yt(de.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Xa{constructor(e,t,i,r,a,u,f,h,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,r,a){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Xa(e,t,Pa.emptySet(t),u,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class aM{constructor(){this.queries=AE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=xe(t),a=r.queries;r.queries=AE(),a.forEach(((u,f)=>{for(const h of f.ba)h.onError(i)}))})(this,new ce(ne.ABORTED,"Firestore shutting down"))}}function AE(){return new So((n=>II(n)),Xd)}async function CC(n,e){const t=xe(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Sa()&&e.Da()&&(i=2):(a=new sM,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const f=sy(u,`Initialization of query '${Ca(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&ay(t)}async function wC(n,e){const t=xe(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const u=a.ba.indexOf(e);u>=0&&(a.ba.splice(u,1),a.ba.length===0?r=e.Da()?0:1:!a.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function lM(n,e){const t=xe(n);let i=!1;for(const r of e){const a=r.query,u=t.queries.get(a);if(u){for(const f of u.ba)f.Fa(r)&&(i=!0);u.wa=r}}i&&ay(t)}function uM(n,e,t){const i=xe(n),r=i.queries.get(e);if(r)for(const a of r.ba)a.onError(t);i.queries.delete(e)}function ay(n){n.Ca.forEach((e=>{e.next()}))}var ug,IE;(IE=ug||(ug={})).Ma="default",IE.Cache="cache";class RC{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Xa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ug.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.key=e}}class bC{constructor(e){this.key=e}}class cM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Pe(),this.mutatedKeys=Pe(),this.eu=CI(e),this.tu=new Pa(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new SE,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=r,f=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const E=r.get(_),w=nc(this.query,T)?T:null,V=!!E&&this.mutatedKeys.has(E.key),U=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;E&&w?E.data.isEqual(w.data)?V!==U&&(i.track({type:3,doc:w}),P=!0):this.su(E,w)||(i.track({type:2,doc:w}),P=!0,(h&&this.eu(w,h)>0||m&&this.eu(w,m)<0)&&(f=!0)):!E&&w?(i.track({type:0,doc:w}),P=!0):E&&!w&&(i.track({type:1,doc:E}),P=!0,(h||m)&&(f=!0)),P&&(w?(u=u.add(w),a=U?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Ss:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(w,V){const U=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Vt:P})}};return U(w)-U(V)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),r=r??!1;const f=t&&!r?this._u():[],h=this.Ya.size===0&&this.current&&!r?1:0,m=h!==this.Xa;return this.Xa=h,u.length!==0||m?{snapshot:new Xa(this.query,e.tu,a,u,e.mutatedKeys,h===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new SE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Pe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new bC(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new xC(i))})),t}cu(e){this.Za=e.ks,this.Ya=Pe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ly="SyncEngine";class fM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class dM{constructor(e){this.key=e,this.hu=!1}}class hM{constructor(e,t,i,r,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new So((f=>II(f)),Xd),this.Iu=new Map,this.Eu=new Set,this.Ru=new yt(de.comparator),this.Au=new Map,this.Vu=new Xg,this.du={},this.mu=new Map,this.fu=Es.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mM(n,e,t=!0){const i=UC(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await NC(i,e,t,!0),r}async function pM(n,e){const t=UC(n);await NC(t,e,!0,!1)}async function NC(n,e,t,i){const r=await PD(n.localStore,ti(e)),a=r.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let f;return i&&(f=await gM(n,e,a,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&vC(n.remoteStore,r),f}async function gM(n,e,t,i,r){n.pu=(T,E,w)=>(async function(U,P,z,j){let $=P.view.ru(z);$.Ss&&($=await gE(U.localStore,P.query,!1).then((({documents:x})=>P.view.ru(x,$))));const se=j&&j.targetChanges.get(P.targetId),X=j&&j.targetMismatches.get(P.targetId)!=null,le=P.view.applyChanges($,U.isPrimaryClient,se,X);return wE(U,P.targetId,le.au),le.snapshot})(n,T,E,w);const a=await gE(n.localStore,e,!0),u=new cM(e,a.ks),f=u.ru(a.documents),h=ic.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),m=u.applyChanges(f,n.isPrimaryClient,h);wE(n,t,m.au);const _=new fM(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function yM(n,e,t){const i=xe(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((u=>!Xd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ag(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&ty(i.remoteStore,r.targetId),cg(i,r.targetId)})).catch(As)):(cg(i,r.targetId),await ag(i.localStore,r.targetId,!0))}async function _M(n,e){const t=xe(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ty(t.remoteStore,i.targetId))}async function vM(n,e,t){const i=LC(n);try{const r=await(function(u,f){const h=xe(u),m=it.now(),_=f.reduce(((w,V)=>w.add(V.key)),Pe());let T,E;return h.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let V=kn(),U=Pe();return h.xs.getEntries(w,_).next((P=>{V=P,V.forEach(((z,j)=>{j.isValidDocument()||(U=U.add(z))}))})).next((()=>h.localDocuments.getOverlayedDocuments(w,V))).next((P=>{T=P;const z=[];for(const j of f){const $=VN(j,T.get(j.key).overlayedDocument);$!=null&&z.push(new Ao(j.key,$,pI($.value.mapValue),pn.exists(!0)))}return h.mutationQueue.addMutationBatch(w,m,z,f)})).next((P=>{E=P;const z=P.applyToLocalDocumentSet(T,U);return h.documentOverlayCache.saveOverlays(w,P.batchId,z)}))})).then((()=>({batchId:E.batchId,changes:RI(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,f,h){let m=u.du[u.currentUser.toKey()];m||(m=new yt(Re)),m=m.insert(f,h),u.du[u.currentUser.toKey()]=m})(i,r.batchId,t),await sc(i,r.changes),await rc(i.remoteStore)}catch(r){const a=sy(r,"Failed to persist write");t.reject(a)}}async function DC(n,e){const t=xe(n);try{const i=await DD(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const u=t.Au.get(a);u&&(Te(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?Te(u.hu,14607):r.removedDocuments.size>0&&(Te(u.hu,42227),u.hu=!1))})),await sc(t,i,e)}catch(i){await As(i)}}function CE(n,e,t){const i=xe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,u)=>{const f=u.view.va(e);f.snapshot&&r.push(f.snapshot)})),(function(u,f){const h=xe(u);h.onlineState=f;let m=!1;h.queries.forEach(((_,T)=>{for(const E of T.ba)E.va(f)&&(m=!0)})),m&&ay(h)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function TM(n,e,t){const i=xe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let u=new yt(de.comparator);u=u.insert(a,Et.newNoDocument(a,Se.min()));const f=Pe().add(a),h=new eh(Se.min(),new Map,new yt(Re),u,f);await DC(i,h),i.Ru=i.Ru.remove(a),i.Au.delete(e),uy(i)}else await ag(i.localStore,e,!1).then((()=>cg(i,e,t))).catch(As)}async function EM(n,e){const t=xe(n),i=e.batch.batchId;try{const r=await ND(t.localStore,e);VC(t,i,null),MC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await sc(t,r)}catch(r){await As(r)}}async function SM(n,e,t){const i=xe(n);try{const r=await(function(u,f){const h=xe(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return h.mutationQueue.lookupMutationBatch(m,f).next((T=>(Te(T!==null,37113),_=T.keys(),h.mutationQueue.removeMutationBatch(m,T)))).next((()=>h.mutationQueue.performConsistencyCheck(m))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(m,_,f))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>h.localDocuments.getDocuments(m,_)))}))})(i.localStore,e);VC(i,e,t),MC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await sc(i,r)}catch(r){await As(r)}}function MC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function VC(n,e,t){const i=xe(n);let r=i.du[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function cg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||PC(n,i)}))}function PC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(ty(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),uy(n))}function wE(n,e,t){for(const i of t)i instanceof xC?(n.Vu.addReference(i.key,e),AM(n,i)):i instanceof bC?(ae(ly,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||PC(n,i.key)):ye(19791,{wu:i})}function AM(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(ae(ly,"New document in limbo: "+t),n.Eu.add(i),uy(n))}function uy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new de(We.fromString(e)),i=n.fu.next();n.Au.set(i,new dM(t)),n.Ru=n.Ru.insert(t,i),vC(n.remoteStore,new go(ti($d(t.path)),i,"TargetPurposeLimboResolution",ei.ce))}}async function sc(n,e,t){const i=xe(n),r=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,h)=>{u.push(i.pu(h,e,t).then((m=>{var _;if((m||t)&&i.isPrimaryClient){const T=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(h.targetId,T?"current":"not-current")}if(m){r.push(m);const T=jg.Es(h.targetId,m);a.push(T)}})))})),await Promise.all(u),i.Pu.J_(r),await(async function(h,m){const _=xe(h);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>H.forEach(m,(E=>H.forEach(E.Ts,(w=>_.persistence.referenceDelegate.addReference(T,E.targetId,w))).next((()=>H.forEach(E.Is,(w=>_.persistence.referenceDelegate.removeReference(T,E.targetId,w)))))))))}catch(T){if(!Er(T))throw T;ae(ey,"Failed to update sequence numbers: "+T)}for(const T of m){const E=T.targetId;if(!T.fromCache){const w=_.vs.get(E),V=w.snapshotVersion,U=w.withLastLimboFreeSnapshotVersion(V);_.vs=_.vs.insert(E,U)}}})(i.localStore,a))}async function IM(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){ae(ly,"User change. New user:",e.toKey());const i=await mC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((f=>{f.forEach((h=>{h.reject(new ce(ne.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await sc(t,i.Ns)}}function CM(n,e){const t=xe(n),i=t.Au.get(e);if(i&&i.hu)return Pe().add(i.key);{let r=Pe();const a=t.Iu.get(e);if(!a)return r;for(const u of a){const f=t.Tu.get(u);r=r.unionWith(f.view.nu)}return r}}function UC(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TM.bind(null,e),e.Pu.J_=lM.bind(null,e.eventManager),e.Pu.yu=uM.bind(null,e.eventManager),e}function LC(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SM.bind(null,e),e}class Xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hC(this.persistence,new dC,e.initialUser,this.serializer)}Cu(e){return new Wg(ih.Vi,this.serializer)}Du(e){return new gC}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xu.provider={build:()=>new Xu};class wM extends Xu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Te(this.persistence.referenceDelegate instanceof Dd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new aC(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Wg((i=>Dd.Vi(i,t)),this.serializer)}}class RM extends Xu{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await LC(this.xu.syncEngine),await rc(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return hC(this.persistence,new dC,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new aC(i,e.asyncQueue,t)}Mu(e,t){const i=new b1(t,this.persistence);return new x1(e.asyncQueue,i)}Cu(e){const t=wD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Zg(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,GD(),ld(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new gC}}class Vd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>CE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=IM.bind(null,this.syncEngine),await rM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aM})()}createDatastore(e){const t=oh(e.databaseInfo.databaseId),i=BD(e.databaseInfo);return YD(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,u,f){return new QD(i,r,a,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>CE(this.syncEngine,t,0)),(function(){return vE.v()?new vE:new LD})())}createSyncEngine(e,t){return(function(r,a,u,f,h,m,_){const T=new hM(r,a,u,f,h,m);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=xe(r);ae(Ss,"RemoteStore shutting down."),a.Ea.add(5),await oc(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Vd.provider={build:()=>new Vd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="FirestoreClient";class xM{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=tn.UNAUTHENTICATED,this.clientId=Dg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ae(Tr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ae(Tr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function bp(n,e){n.asyncQueue.verifyOperationInProgress(),ae(Tr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await mC(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function RE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await bM(n);ae(Tr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>EE(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>EE(e.remoteStore,r))),n._onlineComponents=e}async function bM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae(Tr,"Using user provided OfflineComponentProvider");try{await bp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ne.FAILED_PRECONDITION||r.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;gr("Error using user provided cache. Falling back to memory cache: "+t),await bp(n,new Xu)}}else ae(Tr,"Using default OfflineComponentProvider"),await bp(n,new wM(void 0));return n._offlineComponents}async function OC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae(Tr,"Using user provided OnlineComponentProvider"),await RE(n,n._uninitializedComponentsProvider._online)):(ae(Tr,"Using default OnlineComponentProvider"),await RE(n,new Vd))),n._onlineComponents}function NM(n){return OC(n).then((e=>e.syncEngine))}async function FC(n){const e=await OC(n),t=e.eventManager;return t.onListen=mM.bind(null,e.syncEngine),t.onUnlisten=yM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_M.bind(null,e.syncEngine),t}function DM(n,e,t={}){const i=new Yi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,h,m){const _=new kC({next:E=>{_.Nu(),u.enqueueAndForget((()=>wC(a,T)));const w=E.docs.has(f);!w&&E.fromCache?m.reject(new ce(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&E.fromCache&&h&&h.source==="server"?m.reject(new ce(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),T=new RC($d(f.path),_,{includeMetadataChanges:!0,Ka:!0});return CC(a,T)})(await FC(n),n.asyncQueue,e,t,i))),i.promise}function MM(n,e,t={}){const i=new Yi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,h,m){const _=new kC({next:E=>{_.Nu(),u.enqueueAndForget((()=>wC(a,T))),E.fromCache&&h.source==="server"?m.reject(new ce(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),T=new RC(f,_,{includeMetadataChanges:!0,Ka:!0});return CC(a,T)})(await FC(n),n.asyncQueue,e,t,i))),i.promise}function VM(n,e){const t=new Yi;return n.asyncQueue.enqueueAndForget((async()=>vM(await NM(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM="ComponentProvider",xE=new Map;function UM(n,e,t,i,r){return new oN(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,BC(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="firestore.googleapis.com",bE=!0;class NE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GC,this.ssl=bE}else this.host=e.host,this.ssl=e.ssl??bE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uD)throw new ce(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}I1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ce(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ce(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ce(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sh{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new m1;switch(i.type){case"firstParty":return new _1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=xE.get(t);i&&(ae(PM,"Removing Datastore"),xE.delete(t),i.terminate())})(this),Promise.resolve()}}function LM(n,e,t,i={}){var m;n=Qi(n,sh);const r=xg(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;r&&(zx(`https://${f}`),Qx("Firestore",!0)),a.host!==GC&&a.host!==f&&gr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:f,ssl:r,emulatorOptions:i};if(!pd(h,u)&&(n._setSettings(h),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=tn.MOCK_USER;else{_=Kx(i.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ce(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new tn(E)}n._authCredentials=new p1(new qA(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new nl(this.firestore,e,this._query)}}class Ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Zu(t,Ot._jsonSchema))return new Ot(e,i||null,new de(We.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:kt("string",Ot._jsonSchemaVersion),referencePath:kt("string")};class pr extends nl{constructor(e,t,i){super(e,t,$d(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new de(e))}withConverter(e){return new pr(this.firestore,e,this._path)}}function Aa(n,e,...t){if(n=yo(n),zA("collection","path",e),n instanceof sh){const i=We.fromString(e,...t);return TT(i),new pr(n,null,i)}{if(!(n instanceof Ot||n instanceof pr))throw new ce(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return TT(i),new pr(n.firestore,null,i)}}function rs(n,e,...t){if(n=yo(n),arguments.length===1&&(e=Dg.newId()),zA("doc","path",e),n instanceof sh){const i=We.fromString(e,...t);return vT(i),new Ot(n,null,new de(i))}{if(!(n instanceof Ot||n instanceof pr))throw new ce(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return vT(i),new Ot(n.firestore,n instanceof pr?n.converter:null,new de(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="AsyncQueue";class ME{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yC(this,"async_queue_retry"),this._c=()=>{const i=ld();i&&ae(DE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=ld();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ld();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Yi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Er(e))throw e;ae(DE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,mn("INTERNAL UNHANDLED ERROR: ",VE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=ry.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&ye(47125,{Pc:VE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function VE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Cs extends sh{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new ME,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ME(e),this._firestoreClient=void 0,await e}}}function kM(n,e){const t=typeof n=="object"?n:e1(),i=typeof n=="string"?n:Sd,r=$b(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=qx("firestore");a&&LM(r,...a)}return r}function cy(n){if(n._terminated)throw new ce(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||qC(n),n._firestoreClient}function qC(n){var i,r,a,u;const e=n._freezeSettings(),t=UM(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new xM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}})(n._componentsProvider))}function OM(n,e){gr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return FM(n,Vd.provider,{build:i=>new RM(i,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function FM(n,e,t){if((n=Qi(n,Cs))._firestoreClient||n._terminated)throw new ce(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ce(ne.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},qC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zn(Ft.fromBase64String(e))}catch(t){throw new ce(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zn(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zu(e,Zn._jsonSchema))return Zn.fromBase64String(e.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:kt("string",Zn._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ji._jsonSchemaVersion}}static fromJSON(e){if(Zu(e,Ji._jsonSchema))return new Ji(e.latitude,e.longitude)}}Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:kt("string",Ji._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zu(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yi(e.vectorValues);throw new ce(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:kt("string",yi._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=/^__.*__$/;class GM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new el(e,this.data,t,this.fieldTransforms)}}class HC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{dataSource:n})}}class hy{constructor(e,t,i,r,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new hy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Pd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(zC(this.dataSource)&&BM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class qM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||oh(e)}createContext(e,t,i,r=!1){return new hy({dataSource:e,methodName:t,targetDoc:i,path:_t.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function my(n){const e=n._freezeSettings(),t=oh(n._databaseId);return new qM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function HM(n,e,t,i,r,a={}){const u=n.createContext(a.merge||a.mergeFields?2:0,e,t,r);py("Data must be an object, but it was:",u,i);const f=KC(i,u);let h,m;if(a.merge)h=new Cn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const T of a.mergeFields){const E=Wa(e,T,t);if(!u.contains(E))throw new ce(ne.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);QC(_,E)||_.push(E)}h=new Cn(_),m=u.fieldTransforms.filter((T=>h.covers(T.field)))}else h=null,m=u.fieldTransforms;return new GM(new an(f),h,m)}class ah extends dy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ah}}function zM(n,e,t,i){const r=n.createContext(1,e,t);py("Data must be an object, but it was:",r,i);const a=[],u=an.empty();Sr(i,((h,m)=>{const _=JC(e,h,t);m=yo(m);const T=r.childContextForFieldPath(_);if(m instanceof ah)a.push(_);else{const E=ac(m,T);E!=null&&(a.push(_),u.set(_,E))}}));const f=new Cn(a);return new HC(u,f,r.fieldTransforms)}function KM(n,e,t,i,r,a){const u=n.createContext(1,e,t),f=[Wa(e,i,t)],h=[r];if(a.length%2!=0)throw new ce(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)f.push(Wa(e,a[E])),h.push(a[E+1]);const m=[],_=an.empty();for(let E=f.length-1;E>=0;--E)if(!QC(m,f[E])){const w=f[E];let V=h[E];V=yo(V);const U=u.childContextForFieldPath(w);if(V instanceof ah)m.push(w);else{const P=ac(V,U);P!=null&&(m.push(w),_.set(w,P))}}const T=new Cn(m);return new HC(_,T,u.fieldTransforms)}function YM(n,e,t,i=!1){return ac(t,n.createContext(i?4:3,e))}function ac(n,e){if(YC(n=yo(n)))return py("Unsupported field value:",e,n),KC(n,e);if(n instanceof dy)return(function(i,r){if(!zC(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const a=[];let u=0;for(const f of i){let h=ac(f,r.childContextForArray(u));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=yo(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wN(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=it.fromDate(i);return{timestampValue:$a(r.serializer,a)}}if(i instanceof it){const a=new it(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$a(r.serializer,a)}}if(i instanceof Ji)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Zn)return{bytesValue:BI(r.serializer,i._byteString)};if(i instanceof Ot){const a=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw r.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Jg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof yi)return(function(u,f){const h=u instanceof yi?u.toArray():u;return{mapValue:{fields:{[Fg]:{stringValue:Bg},[Ha]:{arrayValue:{values:h.map((_=>{if(typeof _!="number")throw f.createError("VectorValues must only contain numeric values.");return qg(f.serializer,_)}))}}}}}})(i,r);if(WI(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${Gd(i)}`)})(n,e)}function KC(n,e){const t={};return sI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sr(n,((i,r)=>{const a=ac(r,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function YC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Ji||n instanceof Zn||n instanceof Ot||n instanceof dy||n instanceof yi||WI(n))}function py(n,e,t){if(!YC(t)||!KA(t)){const i=Gd(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Wa(n,e,t){if((e=yo(e))instanceof fy)return e._internalPath;if(typeof e=="string")return JC(n,e);throw Pd("Field path arguments must be of type string or ",n,!1,void 0,t)}const JM=new RegExp("[~\\*/\\[\\]]");function JC(n,e,t){if(e.search(JM)>=0)throw Pd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fy(...e.split("."))._internalPath}catch{throw Pd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Pd(n,e,t,i,r){const a=i&&!i.isEmpty(),u=r!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let h="";return(a||u)&&(h+=" (found",a&&(h+=` in field ${i}`),u&&(h+=` in document ${r}`),h+=")"),new ce(ne.INVALID_ARGUMENT,f+n+h)}function QC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{convertValue(e,t="none"){switch(yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(To(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Sr(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[Ha].arrayValue)==null?void 0:r.values)==null?void 0:a.map((u=>gt(u.doubleValue)));return new yi(t)}convertGeoPoint(e){return new Ji(gt(e.latitude),gt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Jd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){const t=vo(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=We.fromString(e);Te(XI(i),9688,{name:e});const r=new ys(i.get(1),i.get(3)),a=new de(i.popFirst(5));return r.isEqual(t)||mn(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C extends QM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}const PE="@firebase/firestore",UE="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $M(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Wa("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $M extends XC{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gy{}class WM extends gy{}function ZM(n,e,...t){let i=[];e instanceof gy&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((h=>h instanceof yy)).length,f=a.filter((h=>h instanceof lh)).length;if(u>1||u>0&&f>0)throw new ce(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class lh extends WM{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new lh(e,t,i)}_apply(e){const t=this._parse(e);return WC(e._query,t),new nl(e.firestore,e.converter,Zp(e._query,t))}_parse(e){const t=my(e.firestore);return(function(a,u,f,h,m,_,T){let E;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ce(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){OE(T,_);const V=[];for(const U of T)V.push(kE(h,a,U));E={arrayValue:{values:V}}}else E=kE(h,a,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||OE(T,_),E=YM(f,u,T,_==="in"||_==="not-in");return Ge.create(m,_,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function LE(n,e,t){const i=e,r=Wa("where",n);return lh._create(r,i,t)}class yy extends gy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new yy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ot.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,a){let u=r;const f=a.getFlattenedFilters();for(const h of f)WC(u,h),u=Zp(u,h)})(e._query,t),new nl(e.firestore,e.converter,Zp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function kE(n,e,t){if(typeof(t=yo(t))=="string"){if(t==="")throw new ce(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AI(e)&&t.indexOf("/")!==-1)throw new ce(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(We.fromString(t));if(!de.isDocumentKey(i))throw new ce(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Yu(n,new de(i))}if(t instanceof Ot)return Yu(n,t._key);throw new ce(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gd(t)}.`)}function OE(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WC(n,e){const t=(function(r,a){for(const u of r)for(const f of u.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function jM(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Cu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ps extends XC{constructor(e,t,i,r,a,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Wa("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ps._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",ps._jsonSchema={type:kt("string",ps._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class ud extends ps{data(e={}){return super.data(e)}}class Ua{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Cu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new ud(this._firestore,this._userDataWriter,i.key,i,new Cu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((f=>{const h=new ud(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Cu(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const h=new ud(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Cu(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,_=-1;return f.type!==0&&(m=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:e2(f.type),doc:h,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ua._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function e2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ua._jsonSchemaVersion="firestore/querySnapshot/1.0",Ua._jsonSchema={type:kt("string",Ua._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n){n=Qi(n,Ot);const e=Qi(n.firestore,Cs),t=cy(e);return DM(t,n._key).then((i=>t2(e,n,i)))}function Np(n){n=Qi(n,nl);const e=Qi(n.firestore,Cs),t=cy(e),i=new $C(e);return XM(n._query),MM(t,n._query).then((r=>new Ua(e,i,n,r)))}function Kf(n,e,t,...i){n=Qi(n,Ot);const r=Qi(n.firestore,Cs),a=my(r);let u;return u=typeof(e=yo(e))=="string"||e instanceof fy?KM(a,"updateDoc",n._key,e,t,i):zM(a,"updateDoc",n._key,e),_y(r,[u.toMutation(n._key,pn.exists(!0))])}function BE(n){return _y(Qi(n.firestore,Cs),[new jd(n._key,pn.none())])}function Dp(n,e){const t=Qi(n.firestore,Cs),i=rs(n),r=jM(n.converter,e),a=my(n.firestore);return _y(t,[HM(a,"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,pn.exists(!1))]).then((()=>i))}function _y(n,e){const t=cy(n);return VM(t,e)}function t2(n,e,t){const i=t.docs.get(e._key),r=new $C(n);return new ps(n,r,e._key,i,new Cu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){h1(jb),yd(new Lu("firestore",((i,{instanceIdentifier:r,options:a})=>{const u=i.getProvider("app").getImmediate(),f=new Cs(new g1(i.getProvider("auth-internal")),new v1(u,i.getProvider("app-check-internal")),rN(u,r),u);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),Ma(PE,UE,e),Ma(PE,UE,"esm2020")})();const n2={apiKey:"SUA_API_KEY",authDomain:"biblioteca-jimui.firebaseapp.com",projectId:"biblioteca-jimui",storageBucket:"biblioteca-jimui.appspot.com",messagingSenderId:"150578605856",appId:"1:150578605856:web:xxxxx"},i2=MA(n2),Un=kM(i2);OM(Un).catch(n=>{console.error("Erro offline:",n.code)});const wt={async init(){},async getBooks(){return(await Np(Aa(Un,"books"))).docs.map(e=>({id:e.id,...e.data()}))},async saveBook(n){if(n.id){const e=rs(Un,"books",n.id);await Kf(e,{...n})}else await Dp(Aa(Un,"books"),n)},async deleteBook(n){await BE(rs(Un,"books",n))},async getCategories(){return(await Np(Aa(Un,"categories"))).docs.map(e=>({id:e.id,...e.data()}))},async saveCategory(n){await Dp(Aa(Un,"categories"),{name:n})},async deleteCategory(n){await BE(rs(Un,"categories",n))},async getUser(n){const e=rs(Un,"users",n),t=await FE(e);return t.exists()?t.data():null},async register(n,e,t,i=dd.USER){const r={id:"",name:n,email:e,password:t,role:i,favorites:[],readingHistory:[],cachedBookIds:[]},a=await Dp(Aa(Un,"users"),r);return await Kf(a,{id:a.id}),{...r,id:a.id}},async login(n,e){const t=ZM(Aa(Un,"users"),LE("email","==",n),LE("password","==",e)),i=await Np(t);return i.empty?null:i.docs[0].data()},async getCurrentUser(){return null},async updateUser(n){const e=rs(Un,"users",n.id);await Kf(e,{...n})},async logout(){},async addToHistory(n,e){var f;const t=rs(Un,"users",n),i=await FE(t);if(!i.exists())return;const r=i.data(),a={bookId:e,readAt:Date.now()},u=((f=r.readingHistory)==null?void 0:f.filter(h=>h.bookId!==e))||[];await Kf(t,{readingHistory:[a,...u]})}},Yf={name:"Biblioteca JIMUI",creator:"Comisso de Cultura da JIMUI",purpose:"A Biblioteca JIMUI foi criada para democratizar o acesso ao conhecimento e  cultura para todos os membros da nossa comunidade. Este aplicativo permite que voc leve seus livros favoritos para qualquer lugar, funcionando inclusive sem conexo com a internet.",version:"1.0.0"},jn={Search:()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),Heart:({filled:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:n?"currentColor":"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n?"text-orange-500":""}`,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),Admin:()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),Plus:()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Wifi:({online:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${n?"text-green-500":"text-gray-400"}`,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22a.75.75 0 1 1-1.06 1.06.75.75 0 0 1 1.06-1.06Z"})}),Info:()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),Download:()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M7.5 12L12 16.5m0 0L16.5 12M12 16.5V3"})}),BookOpen:()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18c-2.305 0-4.408.867-6 2.292m0-14.25v14.25"})})},o2=({book:n,isFavorite:e,isCached:t,onToggleFavorite:i,onClick:r})=>C.jsxs("div",{className:"group cursor-pointer",children:[C.jsxs("div",{className:"relative aspect-[2/3] overflow-hidden rounded-2xl shadow-md transition-all duration-300 group-hover:shadow-xl group-hover:-translate-y-1",children:[C.jsx("img",{src:n.coverUrl,alt:n.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onClick:r}),C.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-2",children:[C.jsx("button",{onClick:a=>{a.stopPropagation(),i()},className:"p-2 bg-white/90 backdrop-blur rounded-full shadow-sm hover:scale-110 active:scale-95 transition-all text-gray-400 hover:text-orange-500",children:C.jsx(jn.Heart,{filled:e})}),t&&C.jsx("div",{className:"p-2 bg-[#0F9D58]/90 backdrop-blur rounded-full shadow-sm text-white",children:C.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),C.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none text-center",children:C.jsx("p",{className:"text-white text-[10px] font-bold uppercase tracking-wider",children:t?"DISPONVEL OFFLINE":"DISPONVEL ONLINE"})})]}),C.jsxs("div",{className:"mt-3",onClick:r,children:[C.jsx("h3",{className:"text-sm font-bold text-gray-800 line-clamp-1 group-hover:text-[#0F9D58] transition-colors",children:n.title}),C.jsx("p",{className:"text-[10px] text-orange-600 font-bold uppercase tracking-wider mt-1",children:n.category})]})]});var r2={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let s2,a2;function l2(){return{geminiUrl:s2,vertexUrl:a2}}function u2(n,e,t,i){var r,a;if(!(n!=null&&n.baseUrl)){const u=l2();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Io{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const h=n[f];if(Array.isArray(t))for(let m=0;m<h.length;m++){const _=h[m];p(_,e.slice(a+1),t[m])}else for(const m of h)p(m,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const h=n[f];p(h[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function c2(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),a=i.split("."),u=new Set;let f=-1;for(let h=0;h<r.length;h++)if(r[h]==="*"){f=h;break}if(f!==-1&&a.length>f)for(let h=f;h<a.length;h++){const m=a[h];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}fg(n,r,a,0,u)}}function fg(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const h of f[u])fg(h,e,t,i+1,r)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(m=>!m.startsWith("_")&&!r.has(m)),h={};for(const m of f)h[m]=u[m];for(const[m,_]of Object.entries(h)){const T=[];for(const E of t.slice(i))E==="*"?T.push(m):T.push(E);p(u,T,_)}for(const m of f)delete u[m]}}else{const u=n;a in u&&fg(u[a],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vy(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f2(n){const e={},t=d(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function d2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],m2(u)),e}function h2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],p2(u)),e}function m2(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>g2(u))),p(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function p2(n){const e={},t=d(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>y2(u))),p(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function g2(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],A2(t)),e}function y2(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],I2(t)),e}function _2(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function v2(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function T2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],E2(u)),e}function E2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function ZC(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],S2(u)),e}function S2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function A2(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],vy(i));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function I2(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],vy(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var GE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(GE||(GE={}));var qE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(qE||(qE={}));var HE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(HE||(HE={}));var cr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(cr||(cr={}));var zE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zE||(zE={}));var KE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(KE||(KE={}));var YE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(YE||(YE={}));var JE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(JE||(JE={}));var QE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(QE||(QE={}));var $E;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})($E||($E={}));var XE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(XE||(XE={}));var WE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(WE||(WE={}));var ZE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ZE||(ZE={}));var jE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(jE||(jE={}));var eS;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(eS||(eS={}));var tS;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(tS||(tS={}));var nS;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(nS||(nS={}));var iS;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(iS||(iS={}));var oS;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(oS||(oS={}));var rS;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(rS||(rS={}));var sS;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(sS||(sS={}));var Ud;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ud||(Ud={}));var aS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(aS||(aS={}));var lS;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(lS||(lS={}));var uS;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(uS||(uS={}));var dg;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(dg||(dg={}));var cS;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(cS||(cS={}));var fS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(fS||(fS={}));var hg;(function(n){n.COLLECTION="COLLECTION"})(hg||(hg={}));var dS;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(dS||(dS={}));var hS;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(hS||(hS={}));var mS;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(mS||(mS={}));var pS;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(pS||(pS={}));var gS;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(gS||(gS={}));var yS;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yS||(yS={}));var _S;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(_S||(_S={}));var vS;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vS||(vS={}));var TS;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(TS||(TS={}));var ES;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(ES||(ES={}));var SS;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(SS||(SS={}));var AS;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(AS||(AS={}));var IS;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(IS||(IS={}));var CS;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(CS||(CS={}));var wS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(wS||(wS={}));var RS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(RS||(RS={}));var xS;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(xS||(xS={}));var bS;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bS||(bS={}));var NS;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(NS||(NS={}));var DS;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(DS||(DS={}));var MS;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(MS||(MS={}));var VS;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(VS||(VS={}));var PS;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(PS||(PS={}));var US;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(US||(US={}));var LS;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(LS||(LS={}));var kS;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kS||(kS={}));var OS;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(OS||(OS={}));var Na;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Na||(Na={}));class mg{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class _u{get text(){var e,t,i,r,a,u,f,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",_=!1;const T=[];for(const E of(h=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&h!==void 0?h:[]){for(const[w,V]of Object.entries(E))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(V!==null||V!==void 0)&&T.push(w);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;_=!0,m+=E.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?m:void 0}get data(){var e,t,i,r,a,u,f,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const _=[];for(const T of(h=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&h!==void 0?h:[]){for(const[E,w]of Object.entries(T))E!=="inlineData"&&(w!==null||w!==void 0)&&_.push(E);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,i,r,a,u,f,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(h=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,i,r,a,u,f,h,m;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(h=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,i,r,a,u,f,h,m;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(h=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.output}}class FS{}class BS{}class C2{}class w2{}class R2{}class x2{}class GS{}class qS{}class HS{}class b2{}class Ld{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ld;let r;const a=e;return t?r=h2(a):r=d2(a),Object.assign(i,r),i}}class zS{}class KS{}class YS{}class JS{}class N2{}class D2{}class M2{}class Ty{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ty,a=T2(e);return Object.assign(i,a),i}}class V2{}class P2{}class U2{}class L2{}class QS{}class k2{get text(){var e,t,i;let r="",a=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[h,m]of Object.entries(f))h!=="text"&&h!=="thought"&&m!==null&&u.push(h);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,r+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,t,i;let r="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,h]of Object.entries(u))f!=="inlineData"&&h!==null&&a.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class O2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ey{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ey,a=ZC(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function jC(n,e){const t=Qe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function ew(n){return Array.isArray(n)?n.map(e=>kd(e)):[kd(n)]}function kd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function tw(n){const e=kd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function nw(n){const e=kd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $S(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function iw(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>$S(e)):[$S(n)]}function pg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function XS(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function WS(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ln(n){if(n==null)throw new Error("ContentUnion is required");return pg(n)?n:{role:"user",parts:iw(n)}}function Sy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=ln(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=ln(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ln(t)):[ln(e)]}function ni(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(XS(n)||WS(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ln(n)]}const e=[],t=[],i=pg(n[0]);for(const r of n){const a=pg(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(XS(r)||WS(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:iw(t)}),e}function F2(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(cr).includes(t[0].toUpperCase())?t[0].toUpperCase():cr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(cr).includes(i.toUpperCase())?i.toUpperCase():cr.TYPE_UNSPECIFIED})}}function La(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&F2(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(cr).includes(f.toUpperCase())?f.toUpperCase():cr.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=La(f);else if(i.includes(u)){const h=[];for(const m of f){if(m.type=="null"){e.nullable=!0;continue}h.push(La(m))}e[u]=h}else if(r.includes(u)){const h={};for(const[m,_]of Object.entries(f))h[m]=La(_);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Ay(n){return La(n)}function Iy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Cy(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function il(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=La(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=La(e.response));return n}function ol(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function B2(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Co(n,e){if(typeof e!="string")throw new Error("name must be a string");return B2(n,e,"cachedContents")}function ow(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ar(n){return vy(n)}function G2(n){return n!=null&&typeof n=="object"&&"name"in n}function q2(n){return n!=null&&typeof n=="object"&&"video"in n}function H2(n){return n!=null&&typeof n=="object"&&"uri"in n}function rw(n){var e;let t;if(G2(n)&&(t=n.name),!(H2(n)&&(t=n.uri,t===void 0))&&!(q2(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function sw(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function aw(n){for(const e of["models","tunedModels","publisherModels"])if(z2(n,e))return n[e];return[]}function z2(n,e){return n!==null&&typeof n=="object"&&e in n}function K2(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Y2(n,e={}){const t=[],i=new Set;for(const r of n){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=K2(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function lw(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function J2(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function uw(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function rl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function cw(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q2(n){const e={},t=d(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>xV(u))),p(e,["inlinedResponses"],a)}const r=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function $2(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const r=d(n,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function X2(n){const e={},t=d(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function cd(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["metadata","state"]);r!=null&&p(e,["state"],cw(r));const a=d(n,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=d(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&p(e,["updateTime"],f);const h=d(n,["metadata","model"]);h!=null&&p(e,["model"],h);const m=d(n,["metadata","output"]);return m!=null&&p(e,["dest"],Q2(uw(m))),e}function gg(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["state"]);r!=null&&p(e,["state"],cw(r));const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["createTime"]);u!=null&&p(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(e,["startTime"],f);const h=d(n,["endTime"]);h!=null&&p(e,["endTime"],h);const m=d(n,["updateTime"]);m!=null&&p(e,["updateTime"],m);const _=d(n,["model"]);_!=null&&p(e,["model"],_);const T=d(n,["inputConfig"]);T!=null&&p(e,["src"],W2(T));const E=d(n,["outputConfig"]);E!=null&&p(e,["dest"],$2(uw(E)));const w=d(n,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function W2(n){const e={},t=d(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const r=d(n,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function Z2(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&p(t,["fileName"],i);const r=d(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>RV(n,u))),p(t,["requests","requests"],a)}return t}function j2(n){const e={},t=d(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function eV(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function tV(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],rl(n,i)),t}function nV(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],rl(n,i)),t}function iV(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],oV(i));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const a=d(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const h=d(n,["index"]);h!=null&&p(e,["index"],h);const m=d(n,["logprobsResult"]);m!=null&&p(e,["logprobsResult"],m);const _=d(n,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(w=>w)),p(e,["safetyRatings"],E)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function oV(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function fw(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>UV(a))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function rV(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function sV(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],X2(J2(r))),t}function ZS(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],Qe(n,i));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],Z2(n,lw(n,r)));const a=d(e,["config"]);return a!=null&&rV(a,t),t}function aV(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],Qe(n,i));const r=d(e,["src"]);r!=null&&p(t,["inputConfig"],j2(lw(n,r)));const a=d(e,["config"]);return a!=null&&sV(a,t),t}function lV(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function uV(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],Qe(n,i));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],gV(n,r));const a=d(e,["config"]);return a!=null&&lV(a,t),t}function cV(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],rl(n,i)),t}function fV(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],rl(n,i)),t}function dV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const a=d(n,["error"]);return a!=null&&p(e,["error"],a),e}function hV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const a=d(n,["error"]);return a!=null&&p(e,["error"],a),e}function mV(n,e){const t={},i=d(e,["contents"]);if(i!=null){let a=Sy(n,i);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["requests[]","request","content"],a)}const r=d(e,["config"]);return r!=null&&(p(t,["_self"],pV(r,t)),c2(t,{"requests[].*":"requests[].request.*"})),t}function pV(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const a=d(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function gV(n,e){const t={},i=d(e,["fileName"]);i!=null&&p(t,["file_name"],i);const r=d(e,["inlinedRequests"]);return r!=null&&p(t,["requests"],mV(n,r)),t}function yV(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function _V(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vV(n){const e={},t=d(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=d(n,["mode"]);if(i!=null&&p(e,["mode"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function TV(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],fw(ln(r)));const a=d(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const h=d(e,["candidateCount"]);h!=null&&p(i,["candidateCount"],h);const m=d(e,["maxOutputTokens"]);m!=null&&p(i,["maxOutputTokens"],m);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const E=d(e,["logprobs"]);E!=null&&p(i,["logprobs"],E);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const V=d(e,["frequencyPenalty"]);V!=null&&p(i,["frequencyPenalty"],V);const U=d(e,["seed"]);U!=null&&p(i,["seed"],U);const P=d(e,["responseMimeType"]);P!=null&&p(i,["responseMimeType"],P);const z=d(e,["responseSchema"]);z!=null&&p(i,["responseSchema"],Ay(z));const j=d(e,["responseJsonSchema"]);if(j!=null&&p(i,["responseJsonSchema"],j),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=d(e,["safetySettings"]);if(t!==void 0&&$!=null){let M=$;Array.isArray(M)&&(M=M.map(Ae=>LV(Ae))),p(t,["safetySettings"],M)}const se=d(e,["tools"]);if(t!==void 0&&se!=null){let M=ol(se);Array.isArray(M)&&(M=M.map(Ae=>OV(il(Ae)))),p(t,["tools"],M)}const X=d(e,["toolConfig"]);if(t!==void 0&&X!=null&&p(t,["toolConfig"],kV(X)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=d(e,["cachedContent"]);t!==void 0&&le!=null&&p(t,["cachedContent"],Co(n,le));const x=d(e,["responseModalities"]);x!=null&&p(i,["responseModalities"],x);const N=d(e,["mediaResolution"]);N!=null&&p(i,["mediaResolution"],N);const D=d(e,["speechConfig"]);if(D!=null&&p(i,["speechConfig"],Iy(D)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=d(e,["thinkingConfig"]);F!=null&&p(i,["thinkingConfig"],F);const k=d(e,["imageConfig"]);k!=null&&p(i,["imageConfig"],wV(k));const O=d(e,["enableEnhancedCivicAnswers"]);if(O!=null&&p(i,["enableEnhancedCivicAnswers"],O),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function EV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>iV(m))),p(e,["candidates"],h)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const a=d(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function SV(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],rl(n,i)),t}function AV(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],rl(n,i)),t}function IV(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function CV(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function wV(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function RV(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["request","model"],Qe(n,i));const r=d(e,["contents"]);if(r!=null){let f=ni(r);Array.isArray(f)&&(f=f.map(h=>fw(h))),p(t,["request","contents"],f)}const a=d(e,["metadata"]);a!=null&&p(t,["metadata"],a);const u=d(e,["config"]);return u!=null&&p(t,["request","generationConfig"],TV(n,u,d(t,["request"],{}))),t}function xV(n){const e={},t=d(n,["response"]);t!=null&&p(e,["response"],EV(t));const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["error"]);return r!=null&&p(e,["error"],r),e}function bV(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function NV(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const a=d(n,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),t}function DV(n){const e={},t=d(n,["config"]);return t!=null&&bV(t,e),e}function MV(n){const e={},t=d(n,["config"]);return t!=null&&NV(t,e),e}function VV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>cd(u))),p(e,["batchJobs"],a)}return e}function PV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>gg(u))),p(e,["batchJobs"],a)}return e}function UV(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],yV(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],_V(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const h=d(n,["inlineData"]);h!=null&&p(e,["inlineData"],eV(h));const m=d(n,["text"]);m!=null&&p(e,["text"],m);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const E=d(n,["videoMetadata"]);return E!=null&&p(e,["videoMetadata"],E),e}function LV(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function kV(n){const e={},t=d(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=d(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],vV(i)),e}function OV(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=d(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}const u=d(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],IV(u));const f=d(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],CV(f));const h=d(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const m=d(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Eo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Eo||(Eo={}));class ws{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FV extends Io{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ws(Eo.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=ZS(this.apiClient,e),i=t._url,r=me("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,h=f.requests,m=[];for(const _ of h){const T=Object.assign({},_);if(T.systemInstruction){const E=T.systemInstruction;delete T.systemInstruction;const w=T.request;w.systemInstruction=E,T.request=w}m.push(T)}return f.requests=m,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=aV(this.apiClient,e);return f=me("batchPredictionJobs",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>gg(_))}else{const m=ZS(this.apiClient,e);return f=me("{model}:batchGenerateContent",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>cd(_))}}async createEmbeddingsInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uV(this.apiClient,e);return a=me("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>cd(h))}}async get(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=AV(this.apiClient,e);return f=me("batchPredictionJobs/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>gg(_))}else{const m=SV(this.apiClient,e);return f=me("batches/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>cd(_))}}async cancel(e){var t,i,r,a;let u="",f={};if(this.apiClient.isVertexAI()){const h=nV(this.apiClient,e);u=me("batchPredictionJobs/{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=tV(this.apiClient,e);u=me("batches/{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=MV(e);return f=me("batchPredictionJobs",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=PV(_),E=new QS;return Object.assign(E,T),E})}else{const m=DV(e);return f=me("batches",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=VV(_),E=new QS;return Object.assign(E,T),E})}}async delete(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=fV(this.apiClient,e);return f=me("batchPredictionJobs/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>hV(_))}else{const m=cV(this.apiClient,e);return f=me("batches/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>dV(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BV(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function jS(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>uP(a))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function GV(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const a=d(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let _=ni(u);Array.isArray(_)&&(_=_.map(T=>jS(T))),p(e,["contents"],_)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],jS(ln(f)));const h=d(n,["tools"]);if(e!==void 0&&h!=null){let _=h;Array.isArray(_)&&(_=_.map(T=>fP(T))),p(e,["tools"],_)}const m=d(n,["toolConfig"]);if(e!==void 0&&m!=null&&p(e,["toolConfig"],cP(m)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function qV(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const a=d(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let T=ni(u);Array.isArray(T)&&(T=T.map(E=>E)),p(e,["contents"],T)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],ln(f));const h=d(n,["tools"]);if(e!==void 0&&h!=null){let T=h;Array.isArray(T)&&(T=T.map(E=>dP(E))),p(e,["tools"],T)}const m=d(n,["toolConfig"]);e!==void 0&&m!=null&&p(e,["toolConfig"],m);const _=d(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function HV(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],jC(n,i));const r=d(e,["config"]);return r!=null&&GV(r,t),t}function zV(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],jC(n,i));const r=d(e,["config"]);return r!=null&&qV(r,t),t}function KV(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Co(n,i)),t}function YV(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Co(n,i)),t}function JV(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function QV(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function $V(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function XV(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WV(n){const e={},t=d(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=d(n,["mode"]);if(i!=null&&p(e,["mode"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ZV(n){const e={},t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const a=d(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);if(f!=null&&p(e,["responseJsonSchema"],f),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function jV(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Co(n,i)),t}function eP(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Co(n,i)),t}function tP(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function nP(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function iP(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function oP(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function rP(n){const e={},t=d(n,["config"]);return t!=null&&iP(t,e),e}function sP(n){const e={},t=d(n,["config"]);return t!=null&&oP(t,e),e}function aP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function lP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function uP(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],$V(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],XV(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const h=d(n,["inlineData"]);h!=null&&p(e,["inlineData"],BV(h));const m=d(n,["text"]);m!=null&&p(e,["text"],m);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const E=d(n,["videoMetadata"]);return E!=null&&p(e,["videoMetadata"],E),e}function cP(n){const e={},t=d(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=d(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],WV(i)),e}function fP(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=d(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}const u=d(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],tP(u));const f=d(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],nP(f));const h=d(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const m=d(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function dP(n){const e={},t=d(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=d(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(n,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const a=d(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=d(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>ZV(E))),p(e,["functionDeclarations"],T)}const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],f);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const m=d(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function hP(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function mP(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function pP(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],Co(n,i));const r=d(e,["config"]);return r!=null&&hP(r,t),t}function gP(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],Co(n,i));const r=d(e,["config"]);return r!=null&&mP(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yP extends Io{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ws(Eo.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=zV(this.apiClient,e);return f=me("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=HV(this.apiClient,e);return f=me("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=eP(this.apiClient,e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=jV(this.apiClient,e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=YV(this.apiClient,e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=QV(_),E=new YS;return Object.assign(E,T),E})}else{const m=KV(this.apiClient,e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=JV(_),E=new YS;return Object.assign(E,T),E})}}async update(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=gP(this.apiClient,e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=pP(this.apiClient,e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=sP(e);return f=me("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=lP(_),E=new JS;return Object.assign(E,T),E})}else{const m=rP(e);return f=me("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=aP(_),E=new JS;return Object.assign(E,T),E})}}}function Od(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function eA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(n){return this instanceof we?(this.v=n,this):new we(n)}function _i(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(V){return Promise.resolve(V).then(w,T)}}function f(w,V){i[w]&&(r[w]=function(U){return new Promise(function(P,z){a.push([w,U,P,z])>1||h(w,U)})},V&&(r[w]=V(r[w])))}function h(w,V){try{m(i[w](V))}catch(U){E(a[0][3],U)}}function m(w){w.value instanceof we?Promise.resolve(w.value.v).then(_,T):E(a[0][2],w)}function _(w){h("next",w)}function T(w){h("throw",w)}function E(w,V){w(V),a.shift(),a.length&&h(a[0][0],a[0][1])}}function vi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof eA=="function"?eA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(f,h){u=n[a](u),r(f,h,u.done,u.value)})}}function r(a,u,f,h){Promise.resolve(h).then(function(m){a({value:m,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _P(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:dw(t)}function dw(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function vP(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function tA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let a=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),a&&!dw(n[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class TP{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new EP(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class EP{constructor(e,t,i,r={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),vP(a)}async sendMessage(e){var t;await this.sendPromise;const i=ln(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,f;const h=await r,m=(u=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=h.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let E=[];_!=null&&(E=(f=_.slice(T))!==null&&f!==void 0?f:[]);const w=m?[m]:[];this.recordHistory(i,w,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=ln(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?tA(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return _i(this,arguments,function*(){var r,a,u,f,h,m;const _=[];try{for(var T=!0,E=vi(e),w;w=yield we(E.next()),r=w.done,!r;T=!0){f=w.value,T=!1;const V=f;if(_P(V)){const U=(m=(h=V.candidates)===null||h===void 0?void 0:h[0])===null||m===void 0?void 0:m.content;U!==void 0&&_.push(U)}yield yield we(V)}}catch(V){a={error:V}}finally{try{!T&&!r&&(u=E.return)&&(yield we(u.call(E)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(a=>a.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...tA(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Wu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SP(n){const e={},t=d(n,["file"]);return t!=null&&p(e,["file"],t),e}function AP(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function IP(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],rw(t)),e}function CP(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function wP(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],rw(t)),e}function RP(n){const e={},t=d(n,["uris"]);return t!=null&&p(e,["uris"],t),e}function xP(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function bP(n){const e={},t=d(n,["config"]);return t!=null&&xP(t,e),e}function NP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}function DP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),p(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MP extends Io{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ws(Eo.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=bP(e);return a=me("files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>{const m=NP(h),_=new V2;return Object.assign(_,m),_})}}async createInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=SP(e);return a=me("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const m=AP(h),_=new P2;return Object.assign(_,m),_})}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wP(e);return a=me("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=IP(e);return a=me("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>{const m=CP(h),_=new U2;return Object.assign(_,m),_})}}async registerFilesInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=RP(e);return a=me("files:register",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const m=DP(h),_=new L2;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fd(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function VP(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>$P(a))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function PP(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function UP(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LP(n){const e={},t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const a=d(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);if(f!=null&&p(e,["responseJsonSchema"],f),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function kP(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const a=d(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const h=d(n,["logprobs"]);h!=null&&p(e,["logprobs"],h);const m=d(n,["maxOutputTokens"]);m!=null&&p(e,["maxOutputTokens"],m);const _=d(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const E=d(n,["responseLogprobs"]);E!=null&&p(e,["responseLogprobs"],E);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const V=d(n,["responseModalities"]);V!=null&&p(e,["responseModalities"],V);const U=d(n,["responseSchema"]);U!=null&&p(e,["responseSchema"],U);const P=d(n,["routingConfig"]);P!=null&&p(e,["routingConfig"],P);const z=d(n,["seed"]);z!=null&&p(e,["seed"],z);const j=d(n,["speechConfig"]);j!=null&&p(e,["speechConfig"],j);const $=d(n,["stopSequences"]);$!=null&&p(e,["stopSequences"],$);const se=d(n,["temperature"]);se!=null&&p(e,["temperature"],se);const X=d(n,["thinkingConfig"]);X!=null&&p(e,["thinkingConfig"],X);const le=d(n,["topK"]);le!=null&&p(e,["topK"],le);const x=d(n,["topP"]);if(x!=null&&p(e,["topP"],x),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function OP(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function FP(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function BP(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=d(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const h=d(n,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Cy(T));const E=d(n,["thinkingConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","thinkingConfig"],E);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],VP(ln(V)));const U=d(n,["tools"]);if(e!==void 0&&U!=null){let le=ol(U);Array.isArray(le)&&(le=le.map(x=>WP(il(x)))),p(e,["setup","tools"],le)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],XP(P));const z=d(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&p(e,["setup","inputAudioTranscription"],z);const j=d(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&p(e,["setup","outputAudioTranscription"],j);const $=d(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&p(e,["setup","realtimeInputConfig"],$);const se=d(n,["contextWindowCompression"]);e!==void 0&&se!=null&&p(e,["setup","contextWindowCompression"],se);const X=d(n,["proactivity"]);if(e!==void 0&&X!=null&&p(e,["setup","proactivity"],X),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function GP(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],kP(i));const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=d(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const h=d(n,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Cy(T));const E=d(n,["thinkingConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","thinkingConfig"],E);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],ln(V));const U=d(n,["tools"]);if(e!==void 0&&U!=null){let x=ol(U);Array.isArray(x)&&(x=x.map(N=>ZP(il(N)))),p(e,["setup","tools"],x)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],P);const z=d(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&p(e,["setup","inputAudioTranscription"],z);const j=d(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&p(e,["setup","outputAudioTranscription"],j);const $=d(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&p(e,["setup","realtimeInputConfig"],$);const se=d(n,["contextWindowCompression"]);e!==void 0&&se!=null&&p(e,["setup","contextWindowCompression"],se);const X=d(n,["proactivity"]);e!==void 0&&X!=null&&p(e,["setup","proactivity"],X);const le=d(n,["explicitVadSignal"]);return e!==void 0&&le!=null&&p(e,["setup","explicitVadSignal"],le),t}function qP(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],Qe(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],BP(r,t)),t}function HP(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],Qe(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],GP(r,t)),t}function zP(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function KP(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["weightedPrompts"],i)}return e}function YP(n){const e={},t=d(n,["media"]);if(t!=null){let m=ew(t);Array.isArray(m)&&(m=m.map(_=>fd(_))),p(e,["mediaChunks"],m)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],fd(nw(i)));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const a=d(n,["video"]);a!=null&&p(e,["video"],fd(tw(a)));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const h=d(n,["activityEnd"]);return h!=null&&p(e,["activityEnd"],h),e}function JP(n){const e={},t=d(n,["media"]);if(t!=null){let m=ew(t);Array.isArray(m)&&(m=m.map(_=>_)),p(e,["mediaChunks"],m)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],nw(i));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const a=d(n,["video"]);a!=null&&p(e,["video"],tw(a));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const h=d(n,["activityEnd"]);return h!=null&&p(e,["activityEnd"],h),e}function QP(n){const e={},t=d(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const r=d(n,["toolCall"]);r!=null&&p(e,["toolCall"],r);const a=d(n,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=d(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],jP(u));const f=d(n,["goAway"]);f!=null&&p(e,["goAway"],f);const h=d(n,["sessionResumptionUpdate"]);h!=null&&p(e,["sessionResumptionUpdate"],h);const m=d(n,["voiceActivityDetectionSignal"]);m!=null&&p(e,["voiceActivityDetectionSignal"],m);const _=d(n,["voiceActivity"]);return _!=null&&p(e,["voiceActivity"],e4(_)),e}function $P(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],PP(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],UP(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const h=d(n,["inlineData"]);h!=null&&p(e,["inlineData"],fd(h));const m=d(n,["text"]);m!=null&&p(e,["text"],m);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const E=d(n,["videoMetadata"]);return E!=null&&p(e,["videoMetadata"],E),e}function XP(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function WP(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=d(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}const u=d(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],OP(u));const f=d(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],FP(f));const h=d(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const m=d(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function ZP(n){const e={},t=d(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=d(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(n,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const a=d(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=d(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>LP(E))),p(e,["functionDeclarations"],T)}const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],f);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const m=d(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function jP(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const r=d(n,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const a=d(n,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=d(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&p(e,["totalTokenCount"],f);const h=d(n,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["promptTokensDetails"],w)}const m=d(n,["cacheTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["cacheTokensDetails"],w)}const _=d(n,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["responseTokensDetails"],w)}const T=d(n,["toolUsePromptTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["toolUsePromptTokensDetails"],w)}const E=d(n,["trafficType"]);return E!=null&&p(e,["trafficType"],E),e}function e4(n){const e={},t=d(n,["type"]);return t!=null&&p(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t4(n,e){const t={},i=d(n,["data"]);if(i!=null&&p(t,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function n4(n,e){const t={},i=d(n,["content"]);i!=null&&p(t,["content"],i);const r=d(n,["citationMetadata"]);r!=null&&p(t,["citationMetadata"],i4(r));const a=d(n,["tokenCount"]);a!=null&&p(t,["tokenCount"],a);const u=d(n,["finishReason"]);u!=null&&p(t,["finishReason"],u);const f=d(n,["avgLogprobs"]);f!=null&&p(t,["avgLogprobs"],f);const h=d(n,["groundingMetadata"]);h!=null&&p(t,["groundingMetadata"],h);const m=d(n,["index"]);m!=null&&p(t,["index"],m);const _=d(n,["logprobsResult"]);_!=null&&p(t,["logprobsResult"],_);const T=d(n,["safetyRatings"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(V=>V)),p(t,["safetyRatings"],w)}const E=d(n,["urlContextMetadata"]);return E!=null&&p(t,["urlContextMetadata"],E),t}function i4(n,e){const t={},i=d(n,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),p(t,["citations"],r)}return t}function o4(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["contents"]);if(a!=null){let u=ni(a);Array.isArray(u)&&(u=u.map(f=>f)),p(i,["contents"],u)}return i}function r4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["tokensInfo"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(t,["tokensInfo"],a)}return t}function s4(n,e){const t={},i=d(n,["values"]);i!=null&&p(t,["values"],i);const r=d(n,["statistics"]);return r!=null&&p(t,["statistics"],a4(r)),t}function a4(n,e){const t={},i=d(n,["truncated"]);i!=null&&p(t,["truncated"],i);const r=d(n,["token_count"]);return r!=null&&p(t,["tokenCount"],r),t}function uh(n,e){const t={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>gU(u))),p(t,["parts"],a)}const r=d(n,["role"]);return r!=null&&p(t,["role"],r),t}function l4(n,e){const t={},i=d(n,["controlType"]);i!=null&&p(t,["controlType"],i);const r=d(n,["enableControlImageComputation"]);return r!=null&&p(t,["computeControl"],r),t}function u4(n,e){const t={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function c4(n,e,t){const i={},r=d(n,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],ln(r));const a=d(n,["tools"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>gw(h))),p(e,["tools"],f)}const u=d(n,["generationConfig"]);return e!==void 0&&u!=null&&p(e,["generationConfig"],tU(u)),i}function f4(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["contents"]);if(a!=null){let f=ni(a);Array.isArray(f)&&(f=f.map(h=>uh(h))),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&u4(u),i}function d4(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["contents"]);if(a!=null){let f=ni(a);Array.isArray(f)&&(f=f.map(h=>h)),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&c4(u,i),i}function h4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["totalTokens"]);r!=null&&p(t,["totalTokens"],r);const a=d(n,["cachedContentTokenCount"]);return a!=null&&p(t,["cachedContentTokenCount"],a),t}function m4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["totalTokens"]);return r!=null&&p(t,["totalTokens"],r),t}function p4(n,e,t){const i={},r=d(e,["model"]);return r!=null&&p(i,["_url","name"],Qe(n,r)),i}function g4(n,e,t){const i={},r=d(e,["model"]);return r!=null&&p(i,["_url","name"],Qe(n,r)),i}function y4(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function _4(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function v4(n,e,t){const i={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const a=d(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=d(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const f=d(n,["aspectRatio"]);e!==void 0&&f!=null&&p(e,["parameters","aspectRatio"],f);const h=d(n,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const m=d(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const _=d(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&p(e,["parameters","safetySetting"],_);const T=d(n,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&p(e,["parameters","includeSafetyAttributes"],E);const w=d(n,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const V=d(n,["language"]);e!==void 0&&V!=null&&p(e,["parameters","language"],V);const U=d(n,["outputMimeType"]);e!==void 0&&U!=null&&p(e,["parameters","outputOptions","mimeType"],U);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","compressionQuality"],P);const z=d(n,["addWatermark"]);e!==void 0&&z!=null&&p(e,["parameters","addWatermark"],z);const j=d(n,["labels"]);e!==void 0&&j!=null&&p(e,["labels"],j);const $=d(n,["editMode"]);e!==void 0&&$!=null&&p(e,["parameters","editMode"],$);const se=d(n,["baseSteps"]);return e!==void 0&&se!=null&&p(e,["parameters","editConfig","baseSteps"],se),i}function T4(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=d(e,["referenceImages"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>SU(m))),p(i,["instances[0]","referenceImages"],h)}const f=d(e,["config"]);return f!=null&&v4(f,i),i}function E4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>ch(u))),p(t,["generatedImages"],a)}return t}function S4(n,e,t){const i={},r=d(n,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const a=d(n,["title"]);e!==void 0&&a!=null&&p(e,["requests[]","title"],a);const u=d(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function A4(n,e,t){const i={},r=d(n,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const a=d(n,["title"]);e!==void 0&&a!=null&&p(e,["instances[]","title"],a);const u=d(n,["outputDimensionality"]);e!==void 0&&u!=null&&p(e,["parameters","outputDimensionality"],u);const f=d(n,["mimeType"]);e!==void 0&&f!=null&&p(e,["instances[]","mimeType"],f);const h=d(n,["autoTruncate"]);return e!==void 0&&h!=null&&p(e,["parameters","autoTruncate"],h),i}function I4(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["contents"]);if(a!=null){let h=Sy(n,a);Array.isArray(h)&&(h=h.map(m=>m)),p(i,["requests[]","content"],h)}const u=d(e,["config"]);u!=null&&S4(u,i);const f=d(e,["model"]);return f!==void 0&&p(i,["requests[]","model"],Qe(n,f)),i}function C4(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["contents"]);if(a!=null){let f=Sy(n,a);Array.isArray(f)&&(f=f.map(h=>h)),p(i,["instances[]","content"],f)}const u=d(e,["config"]);return u!=null&&A4(u,i),i}function w4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),p(t,["embeddings"],u)}const a=d(n,["metadata"]);return a!=null&&p(t,["metadata"],a),t}function R4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>s4(f))),p(t,["embeddings"],u)}const a=d(n,["metadata"]);return a!=null&&p(t,["metadata"],a),t}function x4(n,e){const t={},i=d(n,["endpoint"]);i!=null&&p(t,["name"],i);const r=d(n,["deployedModelId"]);return r!=null&&p(t,["deployedModelId"],r),t}function b4(n,e){const t={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&p(t,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function N4(n,e){const t={},i=d(n,["id"]);i!=null&&p(t,["id"],i);const r=d(n,["args"]);r!=null&&p(t,["args"],r);const a=d(n,["name"]);if(a!=null&&p(t,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function D4(n,e){const t={},i=d(n,["allowedFunctionNames"]);i!=null&&p(t,["allowedFunctionNames"],i);const r=d(n,["mode"]);if(r!=null&&p(t,["mode"],r),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function M4(n,e){const t={},i=d(n,["description"]);i!=null&&p(t,["description"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const a=d(n,["parameters"]);a!=null&&p(t,["parameters"],a);const u=d(n,["parametersJsonSchema"]);u!=null&&p(t,["parametersJsonSchema"],u);const f=d(n,["response"]);f!=null&&p(t,["response"],f);const h=d(n,["responseJsonSchema"]);if(h!=null&&p(t,["responseJsonSchema"],h),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function V4(n,e,t,i){const r={},a=d(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],uh(ln(a)));const u=d(e,["temperature"]);u!=null&&p(r,["temperature"],u);const f=d(e,["topP"]);f!=null&&p(r,["topP"],f);const h=d(e,["topK"]);h!=null&&p(r,["topK"],h);const m=d(e,["candidateCount"]);m!=null&&p(r,["candidateCount"],m);const _=d(e,["maxOutputTokens"]);_!=null&&p(r,["maxOutputTokens"],_);const T=d(e,["stopSequences"]);T!=null&&p(r,["stopSequences"],T);const E=d(e,["responseLogprobs"]);E!=null&&p(r,["responseLogprobs"],E);const w=d(e,["logprobs"]);w!=null&&p(r,["logprobs"],w);const V=d(e,["presencePenalty"]);V!=null&&p(r,["presencePenalty"],V);const U=d(e,["frequencyPenalty"]);U!=null&&p(r,["frequencyPenalty"],U);const P=d(e,["seed"]);P!=null&&p(r,["seed"],P);const z=d(e,["responseMimeType"]);z!=null&&p(r,["responseMimeType"],z);const j=d(e,["responseSchema"]);j!=null&&p(r,["responseSchema"],Ay(j));const $=d(e,["responseJsonSchema"]);if($!=null&&p(r,["responseJsonSchema"],$),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const se=d(e,["safetySettings"]);if(t!==void 0&&se!=null){let Ae=se;Array.isArray(Ae)&&(Ae=Ae.map(Ze=>AU(Ze))),p(t,["safetySettings"],Ae)}const X=d(e,["tools"]);if(t!==void 0&&X!=null){let Ae=ol(X);Array.isArray(Ae)&&(Ae=Ae.map(Ze=>NU(il(Ze)))),p(t,["tools"],Ae)}const le=d(e,["toolConfig"]);if(t!==void 0&&le!=null&&p(t,["toolConfig"],bU(le)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=d(e,["cachedContent"]);t!==void 0&&x!=null&&p(t,["cachedContent"],Co(n,x));const N=d(e,["responseModalities"]);N!=null&&p(r,["responseModalities"],N);const D=d(e,["mediaResolution"]);D!=null&&p(r,["mediaResolution"],D);const F=d(e,["speechConfig"]);if(F!=null&&p(r,["speechConfig"],Iy(F)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=d(e,["thinkingConfig"]);k!=null&&p(r,["thinkingConfig"],k);const O=d(e,["imageConfig"]);O!=null&&p(r,["imageConfig"],sU(O));const M=d(e,["enableEnhancedCivicAnswers"]);if(M!=null&&p(r,["enableEnhancedCivicAnswers"],M),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function P4(n,e,t,i){const r={},a=d(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],ln(a));const u=d(e,["temperature"]);u!=null&&p(r,["temperature"],u);const f=d(e,["topP"]);f!=null&&p(r,["topP"],f);const h=d(e,["topK"]);h!=null&&p(r,["topK"],h);const m=d(e,["candidateCount"]);m!=null&&p(r,["candidateCount"],m);const _=d(e,["maxOutputTokens"]);_!=null&&p(r,["maxOutputTokens"],_);const T=d(e,["stopSequences"]);T!=null&&p(r,["stopSequences"],T);const E=d(e,["responseLogprobs"]);E!=null&&p(r,["responseLogprobs"],E);const w=d(e,["logprobs"]);w!=null&&p(r,["logprobs"],w);const V=d(e,["presencePenalty"]);V!=null&&p(r,["presencePenalty"],V);const U=d(e,["frequencyPenalty"]);U!=null&&p(r,["frequencyPenalty"],U);const P=d(e,["seed"]);P!=null&&p(r,["seed"],P);const z=d(e,["responseMimeType"]);z!=null&&p(r,["responseMimeType"],z);const j=d(e,["responseSchema"]);j!=null&&p(r,["responseSchema"],Ay(j));const $=d(e,["responseJsonSchema"]);$!=null&&p(r,["responseJsonSchema"],$);const se=d(e,["routingConfig"]);se!=null&&p(r,["routingConfig"],se);const X=d(e,["modelSelectionConfig"]);X!=null&&p(r,["modelConfig"],X);const le=d(e,["safetySettings"]);if(t!==void 0&&le!=null){let _e=le;Array.isArray(_e)&&(_e=_e.map(Le=>Le)),p(t,["safetySettings"],_e)}const x=d(e,["tools"]);if(t!==void 0&&x!=null){let _e=ol(x);Array.isArray(_e)&&(_e=_e.map(Le=>gw(il(Le)))),p(t,["tools"],_e)}const N=d(e,["toolConfig"]);t!==void 0&&N!=null&&p(t,["toolConfig"],N);const D=d(e,["labels"]);t!==void 0&&D!=null&&p(t,["labels"],D);const F=d(e,["cachedContent"]);t!==void 0&&F!=null&&p(t,["cachedContent"],Co(n,F));const k=d(e,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const O=d(e,["mediaResolution"]);O!=null&&p(r,["mediaResolution"],O);const M=d(e,["speechConfig"]);M!=null&&p(r,["speechConfig"],Iy(M));const Ae=d(e,["audioTimestamp"]);Ae!=null&&p(r,["audioTimestamp"],Ae);const Ze=d(e,["thinkingConfig"]);Ze!=null&&p(r,["thinkingConfig"],Ze);const ee=d(e,["imageConfig"]);if(ee!=null&&p(r,["imageConfig"],aU(ee)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const fe=d(e,["modelArmorConfig"]);return t!==void 0&&fe!=null&&p(t,["modelArmorConfig"],fe),r}function nA(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["contents"]);if(a!=null){let f=ni(a);Array.isArray(f)&&(f=f.map(h=>uh(h))),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&p(i,["generationConfig"],V4(n,u,i)),i}function iA(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["contents"]);if(a!=null){let f=ni(a);Array.isArray(f)&&(f=f.map(h=>h)),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&p(i,["generationConfig"],P4(n,u,i)),i}function oA(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(_=>n4(_))),p(t,["candidates"],m)}const a=d(n,["modelVersion"]);a!=null&&p(t,["modelVersion"],a);const u=d(n,["promptFeedback"]);u!=null&&p(t,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&p(t,["responseId"],f);const h=d(n,["usageMetadata"]);return h!=null&&p(t,["usageMetadata"],h),t}function rA(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["candidates"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(T=>T)),p(t,["candidates"],_)}const a=d(n,["createTime"]);a!=null&&p(t,["createTime"],a);const u=d(n,["modelVersion"]);u!=null&&p(t,["modelVersion"],u);const f=d(n,["promptFeedback"]);f!=null&&p(t,["promptFeedback"],f);const h=d(n,["responseId"]);h!=null&&p(t,["responseId"],h);const m=d(n,["usageMetadata"]);return m!=null&&p(t,["usageMetadata"],m),t}function U4(n,e,t){const i={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(n,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const a=d(n,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=d(n,["guidanceScale"]);if(e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const h=d(n,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const m=d(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const _=d(n,["includeRaiReason"]);e!==void 0&&_!=null&&p(e,["parameters","includeRaiReason"],_);const T=d(n,["language"]);e!==void 0&&T!=null&&p(e,["parameters","language"],T);const E=d(n,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const w=d(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&p(e,["parameters","outputOptions","compressionQuality"],w),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=d(n,["imageSize"]);if(e!==void 0&&V!=null&&p(e,["parameters","sampleImageSize"],V),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function L4(n,e,t){const i={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const a=d(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=d(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const f=d(n,["aspectRatio"]);e!==void 0&&f!=null&&p(e,["parameters","aspectRatio"],f);const h=d(n,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const m=d(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const _=d(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&p(e,["parameters","safetySetting"],_);const T=d(n,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&p(e,["parameters","includeSafetyAttributes"],E);const w=d(n,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const V=d(n,["language"]);e!==void 0&&V!=null&&p(e,["parameters","language"],V);const U=d(n,["outputMimeType"]);e!==void 0&&U!=null&&p(e,["parameters","outputOptions","mimeType"],U);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","compressionQuality"],P);const z=d(n,["addWatermark"]);e!==void 0&&z!=null&&p(e,["parameters","addWatermark"],z);const j=d(n,["labels"]);e!==void 0&&j!=null&&p(e,["labels"],j);const $=d(n,["imageSize"]);e!==void 0&&$!=null&&p(e,["parameters","sampleImageSize"],$);const se=d(n,["enhancePrompt"]);return e!==void 0&&se!=null&&p(e,["parameters","enhancePrompt"],se),i}function k4(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=d(e,["config"]);return u!=null&&U4(u,i),i}function O4(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=d(e,["config"]);return u!=null&&L4(u,i),i}function F4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>W4(f))),p(t,["generatedImages"],u)}const a=d(n,["positivePromptSafetyAttributes"]);return a!=null&&p(t,["positivePromptSafetyAttributes"],mw(a)),t}function B4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>ch(f))),p(t,["generatedImages"],u)}const a=d(n,["positivePromptSafetyAttributes"]);return a!=null&&p(t,["positivePromptSafetyAttributes"],pw(a)),t}function G4(n,e,t){const i={},r=d(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(n,["durationSeconds"]);if(e!==void 0&&a!=null&&p(e,["parameters","durationSeconds"],a),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["resolution"]);e!==void 0&&f!=null&&p(e,["parameters","resolution"],f);const h=d(n,["personGeneration"]);if(e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=d(n,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const _=d(n,["enhancePrompt"]);if(e!==void 0&&_!=null&&p(e,["parameters","enhancePrompt"],_),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=d(n,["lastFrame"]);e!==void 0&&T!=null&&p(e,["instances[0]","lastFrame"],fh(T));const E=d(n,["referenceImages"]);if(e!==void 0&&E!=null){let w=E;Array.isArray(w)&&(w=w.map(V=>HU(V))),p(e,["instances[0]","referenceImages"],w)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function q4(n,e,t){const i={},r=d(n,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=d(n,["fps"]);e!==void 0&&u!=null&&p(e,["parameters","fps"],u);const f=d(n,["durationSeconds"]);e!==void 0&&f!=null&&p(e,["parameters","durationSeconds"],f);const h=d(n,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const m=d(n,["aspectRatio"]);e!==void 0&&m!=null&&p(e,["parameters","aspectRatio"],m);const _=d(n,["resolution"]);e!==void 0&&_!=null&&p(e,["parameters","resolution"],_);const T=d(n,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const E=d(n,["pubsubTopic"]);e!==void 0&&E!=null&&p(e,["parameters","pubsubTopic"],E);const w=d(n,["negativePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","negativePrompt"],w);const V=d(n,["enhancePrompt"]);e!==void 0&&V!=null&&p(e,["parameters","enhancePrompt"],V);const U=d(n,["generateAudio"]);e!==void 0&&U!=null&&p(e,["parameters","generateAudio"],U);const P=d(n,["lastFrame"]);e!==void 0&&P!=null&&p(e,["instances[0]","lastFrame"],Ti(P));const z=d(n,["referenceImages"]);if(e!==void 0&&z!=null){let se=z;Array.isArray(se)&&(se=se.map(X=>zU(X))),p(e,["instances[0]","referenceImages"],se)}const j=d(n,["mask"]);e!==void 0&&j!=null&&p(e,["instances[0]","mask"],qU(j));const $=d(n,["compressionQuality"]);return e!==void 0&&$!=null&&p(e,["parameters","compressionQuality"],$),i}function H4(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["name"],i);const r=d(n,["metadata"]);r!=null&&p(t,["metadata"],r);const a=d(n,["done"]);a!=null&&p(t,["done"],a);const u=d(n,["error"]);u!=null&&p(t,["error"],u);const f=d(n,["response","generateVideoResponse"]);return f!=null&&p(t,["response"],J4(f)),t}function z4(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["name"],i);const r=d(n,["metadata"]);r!=null&&p(t,["metadata"],r);const a=d(n,["done"]);a!=null&&p(t,["done"],a);const u=d(n,["error"]);u!=null&&p(t,["error"],u);const f=d(n,["response"]);return f!=null&&p(t,["response"],Q4(f)),t}function K4(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=d(e,["image"]);u!=null&&p(i,["instances[0]","image"],fh(u));const f=d(e,["video"]);f!=null&&p(i,["instances[0]","video"],yw(f));const h=d(e,["source"]);h!=null&&$4(h,i);const m=d(e,["config"]);return m!=null&&G4(m,i),i}function Y4(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=d(e,["image"]);u!=null&&p(i,["instances[0]","image"],Ti(u));const f=d(e,["video"]);f!=null&&p(i,["instances[0]","video"],_w(f));const h=d(e,["source"]);h!=null&&X4(h,i);const m=d(e,["config"]);return m!=null&&q4(m,i),i}function J4(n,e){const t={},i=d(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>j4(f))),p(t,["generatedVideos"],u)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&p(t,["raiMediaFilteredCount"],r);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&p(t,["raiMediaFilteredReasons"],a),t}function Q4(n,e){const t={},i=d(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>eU(f))),p(t,["generatedVideos"],u)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&p(t,["raiMediaFilteredCount"],r);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&p(t,["raiMediaFilteredReasons"],a),t}function $4(n,e,t){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const a=d(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],fh(a));const u=d(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],yw(u)),i}function X4(n,e,t){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const a=d(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],Ti(a));const u=d(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],_w(u)),i}function W4(n,e){const t={},i=d(n,["_self"]);i!=null&&p(t,["image"],lU(i));const r=d(n,["raiFilteredReason"]);r!=null&&p(t,["raiFilteredReason"],r);const a=d(n,["_self"]);return a!=null&&p(t,["safetyAttributes"],mw(a)),t}function ch(n,e){const t={},i=d(n,["_self"]);i!=null&&p(t,["image"],hw(i));const r=d(n,["raiFilteredReason"]);r!=null&&p(t,["raiFilteredReason"],r);const a=d(n,["_self"]);a!=null&&p(t,["safetyAttributes"],pw(a));const u=d(n,["prompt"]);return u!=null&&p(t,["enhancedPrompt"],u),t}function Z4(n,e){const t={},i=d(n,["_self"]);i!=null&&p(t,["mask"],hw(i));const r=d(n,["labels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(t,["labels"],a)}return t}function j4(n,e){const t={},i=d(n,["video"]);return i!=null&&p(t,["video"],BU(i)),t}function eU(n,e){const t={},i=d(n,["_self"]);return i!=null&&p(t,["video"],GU(i)),t}function tU(n,e){const t={},i=d(n,["modelSelectionConfig"]);i!=null&&p(t,["modelConfig"],i);const r=d(n,["responseJsonSchema"]);r!=null&&p(t,["responseJsonSchema"],r);const a=d(n,["audioTimestamp"]);a!=null&&p(t,["audioTimestamp"],a);const u=d(n,["candidateCount"]);u!=null&&p(t,["candidateCount"],u);const f=d(n,["enableAffectiveDialog"]);f!=null&&p(t,["enableAffectiveDialog"],f);const h=d(n,["frequencyPenalty"]);h!=null&&p(t,["frequencyPenalty"],h);const m=d(n,["logprobs"]);m!=null&&p(t,["logprobs"],m);const _=d(n,["maxOutputTokens"]);_!=null&&p(t,["maxOutputTokens"],_);const T=d(n,["mediaResolution"]);T!=null&&p(t,["mediaResolution"],T);const E=d(n,["presencePenalty"]);E!=null&&p(t,["presencePenalty"],E);const w=d(n,["responseLogprobs"]);w!=null&&p(t,["responseLogprobs"],w);const V=d(n,["responseMimeType"]);V!=null&&p(t,["responseMimeType"],V);const U=d(n,["responseModalities"]);U!=null&&p(t,["responseModalities"],U);const P=d(n,["responseSchema"]);P!=null&&p(t,["responseSchema"],P);const z=d(n,["routingConfig"]);z!=null&&p(t,["routingConfig"],z);const j=d(n,["seed"]);j!=null&&p(t,["seed"],j);const $=d(n,["speechConfig"]);$!=null&&p(t,["speechConfig"],$);const se=d(n,["stopSequences"]);se!=null&&p(t,["stopSequences"],se);const X=d(n,["temperature"]);X!=null&&p(t,["temperature"],X);const le=d(n,["thinkingConfig"]);le!=null&&p(t,["thinkingConfig"],le);const x=d(n,["topK"]);x!=null&&p(t,["topK"],x);const N=d(n,["topP"]);if(N!=null&&p(t,["topP"],N),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function nU(n,e,t){const i={},r=d(e,["model"]);return r!=null&&p(i,["_url","name"],Qe(n,r)),i}function iU(n,e,t){const i={},r=d(e,["model"]);return r!=null&&p(i,["_url","name"],Qe(n,r)),i}function oU(n,e){const t={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&p(t,["enableWidget"],i),t}function rU(n,e){const t={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&p(t,["timeRangeFilter"],i),t}function sU(n,e){const t={},i=d(n,["aspectRatio"]);i!=null&&p(t,["aspectRatio"],i);const r=d(n,["imageSize"]);if(r!=null&&p(t,["imageSize"],r),d(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function aU(n,e){const t={},i=d(n,["aspectRatio"]);i!=null&&p(t,["aspectRatio"],i);const r=d(n,["imageSize"]);r!=null&&p(t,["imageSize"],r);const a=d(n,["personGeneration"]);a!=null&&p(t,["personGeneration"],a);const u=d(n,["outputMimeType"]);u!=null&&p(t,["imageOutputOptions","mimeType"],u);const f=d(n,["outputCompressionQuality"]);return f!=null&&p(t,["imageOutputOptions","compressionQuality"],f),t}function lU(n,e){const t={},i=d(n,["bytesBase64Encoded"]);i!=null&&p(t,["imageBytes"],Ar(i));const r=d(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function hw(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["gcsUri"],i);const r=d(n,["bytesBase64Encoded"]);r!=null&&p(t,["imageBytes"],Ar(r));const a=d(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function fh(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(n,["imageBytes"]);i!=null&&p(t,["bytesBase64Encoded"],Ar(i));const r=d(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function Ti(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["gcsUri"],i);const r=d(n,["imageBytes"]);r!=null&&p(t,["bytesBase64Encoded"],Ar(r));const a=d(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function uU(n,e,t,i){const r={},a=d(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const u=d(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const f=d(e,["filter"]);t!==void 0&&f!=null&&p(t,["_query","filter"],f);const h=d(e,["queryBase"]);return t!==void 0&&h!=null&&p(t,["_url","models_url"],sw(n,h)),r}function cU(n,e,t,i){const r={},a=d(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const u=d(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const f=d(e,["filter"]);t!==void 0&&f!=null&&p(t,["_query","filter"],f);const h=d(e,["queryBase"]);return t!==void 0&&h!=null&&p(t,["_url","models_url"],sw(n,h)),r}function fU(n,e,t){const i={},r=d(e,["config"]);return r!=null&&uU(n,r,i),i}function dU(n,e,t){const i={},r=d(e,["config"]);return r!=null&&cU(n,r,i),i}function hU(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const a=d(n,["_self"]);if(a!=null){let u=aw(a);Array.isArray(u)&&(u=u.map(f=>yg(f))),p(t,["models"],u)}return t}function mU(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const a=d(n,["_self"]);if(a!=null){let u=aw(a);Array.isArray(u)&&(u=u.map(f=>_g(f))),p(t,["models"],u)}return t}function pU(n,e){const t={},i=d(n,["maskMode"]);i!=null&&p(t,["maskMode"],i);const r=d(n,["segmentationClasses"]);r!=null&&p(t,["maskClasses"],r);const a=d(n,["maskDilation"]);return a!=null&&p(t,["dilation"],a),t}function yg(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["name"],i);const r=d(n,["displayName"]);r!=null&&p(t,["displayName"],r);const a=d(n,["description"]);a!=null&&p(t,["description"],a);const u=d(n,["version"]);u!=null&&p(t,["version"],u);const f=d(n,["_self"]);f!=null&&p(t,["tunedModelInfo"],DU(f));const h=d(n,["inputTokenLimit"]);h!=null&&p(t,["inputTokenLimit"],h);const m=d(n,["outputTokenLimit"]);m!=null&&p(t,["outputTokenLimit"],m);const _=d(n,["supportedGenerationMethods"]);_!=null&&p(t,["supportedActions"],_);const T=d(n,["temperature"]);T!=null&&p(t,["temperature"],T);const E=d(n,["maxTemperature"]);E!=null&&p(t,["maxTemperature"],E);const w=d(n,["topP"]);w!=null&&p(t,["topP"],w);const V=d(n,["topK"]);V!=null&&p(t,["topK"],V);const U=d(n,["thinking"]);return U!=null&&p(t,["thinking"],U),t}function _g(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["name"],i);const r=d(n,["displayName"]);r!=null&&p(t,["displayName"],r);const a=d(n,["description"]);a!=null&&p(t,["description"],a);const u=d(n,["versionId"]);u!=null&&p(t,["version"],u);const f=d(n,["deployedModels"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(w=>x4(w))),p(t,["endpoints"],E)}const h=d(n,["labels"]);h!=null&&p(t,["labels"],h);const m=d(n,["_self"]);m!=null&&p(t,["tunedModelInfo"],MU(m));const _=d(n,["defaultCheckpointId"]);_!=null&&p(t,["defaultCheckpointId"],_);const T=d(n,["checkpoints"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(w=>w)),p(t,["checkpoints"],E)}return t}function gU(n,e){const t={},i=d(n,["mediaResolution"]);i!=null&&p(t,["mediaResolution"],i);const r=d(n,["codeExecutionResult"]);r!=null&&p(t,["codeExecutionResult"],r);const a=d(n,["executableCode"]);a!=null&&p(t,["executableCode"],a);const u=d(n,["fileData"]);u!=null&&p(t,["fileData"],b4(u));const f=d(n,["functionCall"]);f!=null&&p(t,["functionCall"],N4(f));const h=d(n,["functionResponse"]);h!=null&&p(t,["functionResponse"],h);const m=d(n,["inlineData"]);m!=null&&p(t,["inlineData"],t4(m));const _=d(n,["text"]);_!=null&&p(t,["text"],_);const T=d(n,["thought"]);T!=null&&p(t,["thought"],T);const E=d(n,["thoughtSignature"]);E!=null&&p(t,["thoughtSignature"],E);const w=d(n,["videoMetadata"]);return w!=null&&p(t,["videoMetadata"],w),t}function yU(n,e){const t={},i=d(n,["productImage"]);return i!=null&&p(t,["image"],Ti(i)),t}function _U(n,e,t){const i={},r=d(n,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const a=d(n,["baseSteps"]);e!==void 0&&a!=null&&p(e,["parameters","baseSteps"],a);const u=d(n,["outputGcsUri"]);e!==void 0&&u!=null&&p(e,["parameters","storageUri"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const m=d(n,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const _=d(n,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const E=d(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","compressionQuality"],E);const w=d(n,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const V=d(n,["labels"]);return e!==void 0&&V!=null&&p(e,["labels"],V),i}function vU(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["source"]);a!=null&&EU(a,i);const u=d(e,["config"]);return u!=null&&_U(u,i),i}function TU(n,e){const t={},i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>ch(a))),p(t,["generatedImages"],r)}return t}function EU(n,e,t){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const a=d(n,["personImage"]);e!==void 0&&a!=null&&p(e,["instances[0]","personImage","image"],Ti(a));const u=d(n,["productImages"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(h=>yU(h))),p(e,["instances[0]","productImages"],f)}return i}function SU(n,e){const t={},i=d(n,["referenceImage"]);i!=null&&p(t,["referenceImage"],Ti(i));const r=d(n,["referenceId"]);r!=null&&p(t,["referenceId"],r);const a=d(n,["referenceType"]);a!=null&&p(t,["referenceType"],a);const u=d(n,["maskImageConfig"]);u!=null&&p(t,["maskImageConfig"],pU(u));const f=d(n,["controlImageConfig"]);f!=null&&p(t,["controlImageConfig"],l4(f));const h=d(n,["styleImageConfig"]);h!=null&&p(t,["styleImageConfig"],h);const m=d(n,["subjectImageConfig"]);return m!=null&&p(t,["subjectImageConfig"],m),t}function mw(n,e){const t={},i=d(n,["safetyAttributes","categories"]);i!=null&&p(t,["categories"],i);const r=d(n,["safetyAttributes","scores"]);r!=null&&p(t,["scores"],r);const a=d(n,["contentType"]);return a!=null&&p(t,["contentType"],a),t}function pw(n,e){const t={},i=d(n,["safetyAttributes","categories"]);i!=null&&p(t,["categories"],i);const r=d(n,["safetyAttributes","scores"]);r!=null&&p(t,["scores"],r);const a=d(n,["contentType"]);return a!=null&&p(t,["contentType"],a),t}function AU(n,e){const t={},i=d(n,["category"]);if(i!=null&&p(t,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(n,["threshold"]);return r!=null&&p(t,["threshold"],r),t}function IU(n,e){const t={},i=d(n,["image"]);return i!=null&&p(t,["image"],Ti(i)),t}function CU(n,e,t){const i={},r=d(n,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const a=d(n,["maxPredictions"]);e!==void 0&&a!=null&&p(e,["parameters","maxPredictions"],a);const u=d(n,["confidenceThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","confidenceThreshold"],u);const f=d(n,["maskDilation"]);e!==void 0&&f!=null&&p(e,["parameters","maskDilation"],f);const h=d(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&p(e,["parameters","binaryColorThreshold"],h);const m=d(n,["labels"]);return e!==void 0&&m!=null&&p(e,["labels"],m),i}function wU(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["source"]);a!=null&&xU(a,i);const u=d(e,["config"]);return u!=null&&CU(u,i),i}function RU(n,e){const t={},i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Z4(a))),p(t,["generatedMasks"],r)}return t}function xU(n,e,t){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const a=d(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],Ti(a));const u=d(n,["scribbleImage"]);return e!==void 0&&u!=null&&p(e,["instances[0]","scribble"],IU(u)),i}function bU(n,e){const t={},i=d(n,["retrievalConfig"]);i!=null&&p(t,["retrievalConfig"],i);const r=d(n,["functionCallingConfig"]);return r!=null&&p(t,["functionCallingConfig"],D4(r)),t}function NU(n,e){const t={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["computerUse"]);i!=null&&p(t,["computerUse"],i);const r=d(n,["fileSearch"]);r!=null&&p(t,["fileSearch"],r);const a=d(n,["codeExecution"]);if(a!=null&&p(t,["codeExecution"],a),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=d(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>E)),p(t,["functionDeclarations"],T)}const f=d(n,["googleMaps"]);f!=null&&p(t,["googleMaps"],oU(f));const h=d(n,["googleSearch"]);h!=null&&p(t,["googleSearch"],rU(h));const m=d(n,["googleSearchRetrieval"]);m!=null&&p(t,["googleSearchRetrieval"],m);const _=d(n,["urlContext"]);return _!=null&&p(t,["urlContext"],_),t}function gw(n,e){const t={},i=d(n,["retrieval"]);i!=null&&p(t,["retrieval"],i);const r=d(n,["computerUse"]);if(r!=null&&p(t,["computerUse"],r),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=d(n,["codeExecution"]);a!=null&&p(t,["codeExecution"],a);const u=d(n,["enterpriseWebSearch"]);u!=null&&p(t,["enterpriseWebSearch"],u);const f=d(n,["functionDeclarations"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(w=>M4(w))),p(t,["functionDeclarations"],E)}const h=d(n,["googleMaps"]);h!=null&&p(t,["googleMaps"],h);const m=d(n,["googleSearch"]);m!=null&&p(t,["googleSearch"],m);const _=d(n,["googleSearchRetrieval"]);_!=null&&p(t,["googleSearchRetrieval"],_);const T=d(n,["urlContext"]);return T!=null&&p(t,["urlContext"],T),t}function DU(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["createTime"]);r!=null&&p(t,["createTime"],r);const a=d(n,["updateTime"]);return a!=null&&p(t,["updateTime"],a),t}function MU(n,e){const t={},i=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["createTime"]);r!=null&&p(t,["createTime"],r);const a=d(n,["updateTime"]);return a!=null&&p(t,["updateTime"],a),t}function VU(n,e,t){const i={},r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const a=d(n,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=d(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function PU(n,e,t){const i={},r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const a=d(n,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=d(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function UU(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","name"],Qe(n,r));const a=d(e,["config"]);return a!=null&&VU(a,i),i}function LU(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["config"]);return a!=null&&PU(a,i),i}function kU(n,e,t){const i={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const a=d(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const u=d(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const f=d(n,["includeRaiReason"]);e!==void 0&&f!=null&&p(e,["parameters","includeRaiReason"],f);const h=d(n,["outputMimeType"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","mimeType"],h);const m=d(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const _=d(n,["enhanceInputImage"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],_);const T=d(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const E=d(n,["labels"]);e!==void 0&&E!=null&&p(e,["labels"],E);const w=d(n,["numberOfImages"]);e!==void 0&&w!=null&&p(e,["parameters","sampleCount"],w);const V=d(n,["mode"]);return e!==void 0&&V!=null&&p(e,["parameters","mode"],V),i}function OU(n,e,t){const i={},r=d(e,["model"]);r!=null&&p(i,["_url","model"],Qe(n,r));const a=d(e,["image"]);a!=null&&p(i,["instances[0]","image"],Ti(a));const u=d(e,["upscaleFactor"]);u!=null&&p(i,["parameters","upscaleConfig","upscaleFactor"],u);const f=d(e,["config"]);return f!=null&&kU(f,i),i}function FU(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>ch(u))),p(t,["generatedImages"],a)}return t}function BU(n,e){const t={},i=d(n,["uri"]);i!=null&&p(t,["uri"],i);const r=d(n,["encodedVideo"]);r!=null&&p(t,["videoBytes"],Ar(r));const a=d(n,["encoding"]);return a!=null&&p(t,["mimeType"],a),t}function GU(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["uri"],i);const r=d(n,["bytesBase64Encoded"]);r!=null&&p(t,["videoBytes"],Ar(r));const a=d(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function qU(n,e){const t={},i=d(n,["image"]);i!=null&&p(t,["_self"],Ti(i));const r=d(n,["maskMode"]);return r!=null&&p(t,["maskMode"],r),t}function HU(n,e){const t={},i=d(n,["image"]);i!=null&&p(t,["image"],fh(i));const r=d(n,["referenceType"]);return r!=null&&p(t,["referenceType"],r),t}function zU(n,e){const t={},i=d(n,["image"]);i!=null&&p(t,["image"],Ti(i));const r=d(n,["referenceType"]);return r!=null&&p(t,["referenceType"],r),t}function yw(n,e){const t={},i=d(n,["uri"]);i!=null&&p(t,["uri"],i);const r=d(n,["videoBytes"]);r!=null&&p(t,["encodedVideo"],Ar(r));const a=d(n,["mimeType"]);return a!=null&&p(t,["encoding"],a),t}function _w(n,e){const t={},i=d(n,["uri"]);i!=null&&p(t,["gcsUri"],i);const r=d(n,["videoBytes"]);r!=null&&p(t,["bytesBase64Encoded"],Ar(r));const a=d(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KU(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function YU(n){const e={},t=d(n,["config"]);return t!=null&&KU(t,e),e}function JU(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function QU(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&JU(i,e),e}function $U(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function XU(n,e){const t={},i=d(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const r=d(n,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),t}function WU(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],jU(u)),e}function ZU(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["fileName"]);i!=null&&p(e,["fileName"],i);const r=d(n,["config"]);return r!=null&&XU(r,e),e}function jU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function eL(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function tL(n){const e={},t=d(n,["config"]);return t!=null&&eL(t,e),e}function nL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function vw(n,e){const t={},i=d(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const a=d(n,["customMetadata"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>h)),p(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function iL(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["config"]);return i!=null&&vw(i,e),e}function oL(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rL="Content-Type",sL="X-Server-Timeout",aL="User-Agent",vg="x-goog-api-client",lL="1.40.0",uL=`google-genai-sdk/${lL}`,cL="v1beta1",fL="v1beta";class dL{constructor(e){var t,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const f=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!f?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:cL}else{if(!this.clientOptions.apiKey)throw new Wu({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:fL,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===hg.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))r.searchParams.append(u,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(t))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>a.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&hL(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await sA(r),new mg(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await sA(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return _i(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const f="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:_}=yield we(r.read());if(m){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(_,{stream:!0});try{const V=JSON.parse(T);if("error"in V){const U=JSON.parse(JSON.stringify(V.error)),P=U.status,z=U.code,j=`got status: ${P}. ${JSON.stringify(V)}`;if(z>=400&&z<600)throw new Wu({message:j,status:z})}}catch(V){if(V.name==="ApiError")throw V}u+=T;let E=-1,w=0;for(;;){E=-1,w=0;for(const P of h){const z=u.indexOf(P);z!==-1&&(E===-1||z<E)&&(E=z,w=P.length)}if(E===-1)break;const V=u.substring(0,E);u=u.substring(E+w);const U=V.trim();if(U.startsWith(f)){const P=U.substring(f.length).trim();try{const z=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield we(new mg(z))}catch(z){throw new Error(`exception parsing stream chunk ${P}. ${z}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=uL+" "+this.clientOptions.userAgentExtra;return e[aL]=t,e[vg]=t,e[rL]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(sL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const h={file:r},m=this.getFileName(e),_=me("upload/v1beta/files",h._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,m,h,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var r;const a=this.clientOptions.uploader,u=await a.stat(t),f=String(u.size),h=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};i!=null&&vw(i,T);const E=await this.fetchUploadUrl(m,f,h,_,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,a,u){var f;let h={};u?h=u:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=m==null?void 0:m.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function sA(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new Wu({message:r,status:t}):new Error(r)}}function hL(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const f=Object.assign({},a);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const m=u[h],_=f[h];m&&typeof m=="object"&&!Array.isArray(m)&&_&&typeof _=="object"&&!Array.isArray(_)?f[h]=i(_,m):(_&&m&&typeof _!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof _}, New type: ${typeof m}. Overwriting.`),f[h]=m)}return f}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mL="mcp_used/unknown";let pL=!1;function Tw(n){for(const e of n)if(gL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return pL}function Ew(n){var e;const t=(e=n[vg])!==null&&e!==void 0?e:"";n[vg]=(t+` ${mL}`).trimStart()}function gL(n){return n!==null&&typeof n=="object"&&n instanceof wy}function yL(n){return _i(this,arguments,function*(t,i=100){let r,a=0;for(;a<i;){const u=yield we(t.listTools({cursor:r}));for(const f of u.tools)yield yield we(f),a++;if(!u.nextCursor)break;r=u.nextCursor}})}class wy{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new wy(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,h=(t=void 0,vi(yL(_))),m;m=await h.next(),e=m.done,!e;f=!0){r=m.value,f=!1;const T=r;u.push(T);const E=T.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=_}}catch(T){t={error:T}}finally{try{!f&&!e&&(i=h.return)&&await i.call(h)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Y2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function _L(n,e,t){const i=new O2;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class vL{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=SL(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),h=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let m=()=>{};const _=new Promise($=>{m=$}),T=e.callbacks,E=function(){m({})},w=this.apiClient,V={onopen:E,onmessage:$=>{_L(w,T.onmessage,$)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function($){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function($){}},U=this.webSocketFactory.create(h,EL(u),V);U.connect(),await _;const j={setup:{model:Qe(this.apiClient,e.model)}};return U.send(JSON.stringify(j)),new TL(U,this.apiClient)}}class TL{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=KP(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=zP(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Na.PLAY)}pause(){this.sendPlaybackControl(Na.PAUSE)}stop(){this.sendPlaybackControl(Na.STOP)}resetContext(){this.sendPlaybackControl(Na.RESET_CONTEXT)}close(){this.conn.close()}}function EL(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function SL(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function IL(n,e,t){const i=new k2;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const a=JSON.parse(r);if(n.isVertexAI()){const u=QP(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class CL{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new vL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,a,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&Tw(e.config.tools)&&Ew(T);const E=bL(T);if(this.apiClient.isVertexAI()){const D=this.apiClient.getProject(),F=this.apiClient.getLocation(),k=this.apiClient.getApiKey(),O=!!D&&!!F||!!k;this.apiClient.getCustomBaseUrl()&&!O?_=h:(_=`${h}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,_))}else{const D=this.apiClient.getApiKey();let F="BidiGenerateContent",k="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",k="access_token"),_=`${h}/ws/google.ai.generativelanguage.${m}.GenerativeService.${F}?${k}=${D}`}let w=()=>{};const V=new Promise(D=>{w=D}),U=e.callbacks,P=function(){var D;(D=U==null?void 0:U.onopen)===null||D===void 0||D.call(U),w({})},z=this.apiClient,j={onopen:P,onmessage:D=>{IL(z,U.onmessage,D)},onerror:(t=U==null?void 0:U.onerror)!==null&&t!==void 0?t:function(D){},onclose:(i=U==null?void 0:U.onclose)!==null&&i!==void 0?i:function(D){}},$=this.webSocketFactory.create(_,xL(E),j);$.connect(),await V;let se=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const D=this.apiClient.getProject(),F=this.apiClient.getLocation();D&&F&&(se=`projects/${D}/locations/${F}/`+se)}let X={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ud.AUDIO]}:e.config.responseModalities=[Ud.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],x=[];for(const D of le)if(this.isCallableTool(D)){const F=D;x.push(await F.tool())}else x.push(D);x.length>0&&(e.config.tools=x);const N={model:se,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=HP(this.apiClient,N):X=qP(this.apiClient,N),delete X.config,$.send(JSON.stringify(X)),new RL($,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const wL={turnComplete:!0};class RL{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=ni(t.turns),e.isVertexAI()||(i=i.map(r=>uh(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(AL)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},wL),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:JP(e)}:t={realtimeInput:YP(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function xL(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function bL(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aA=10;function lA(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ka(u)){r=!0;break}if(!r)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ka(n){return"callTool"in n&&typeof n.callTool=="function"}function NL(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>ka(r)))!==null&&i!==void 0?i:!1}function uA(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(ka(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(r)}),t}function cA(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DL extends Io{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,a,u,f;const h=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!NL(t)||lA(t.config))return await this.generateContentInternal(h);const m=uA(t);if(m.length>0){const U=m.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${U}.`)}let _,T;const E=ni(h.contents),w=(a=(r=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:aA;let V=0;for(;V<w&&(_=await this.generateContentInternal(h),!(!_.functionCalls||_.functionCalls.length===0));){const U=_.candidates[0].content,P=[];for(const z of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(ka(z)){const $=await z.callTool(_.functionCalls);P.push(...$)}V++,T={role:"user",parts:P},h.contents=ni(h.contents),h.contents.push(U),h.contents.push(T),cA(h.config)&&(E.push(U),E.push(T))}return cA(h.config)&&(_.automaticFunctionCallingHistory=E),_},this.generateContentStream=async t=>{var i,r,a,u,f;if(this.maybeMoveToResponseJsonSchem(t),lA(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const h=uA(t);if(h.length>0){const T=h.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(a=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(m&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let a;const u=[];if(i!=null&&i.generatedImages)for(const h of i.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((r=h==null?void 0:h.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:u.push(h);let f;return a?f={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new ws(Eo.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,a,u,f,h;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((h=(f=t.source)===null||f===void 0?void 0:f.video)===null||h===void 0)&&h.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async h=>ka(h)?await h.tool():h)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&Tw(e.config.tools)){const h=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},h);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Ew(m),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return f}async initAfcToolsMap(e){var t,i,r;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(ka(u)){const f=u,h=await f.tool();for(const m of(r=h.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,f)}}return a}async processAfcStream(e){var t,i,r;const a=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:aA;let u=!1,f=0;const h=await this.initAfcToolsMap(e);return(function(m,_,T){return _i(this,arguments,function*(){for(var E,w,V,U,P,z;f<a;){u&&(f++,u=!1);const X=yield we(m.processParamsMaybeAddMcpUsage(T)),le=yield we(m.generateContentStreamInternal(X)),x=[],N=[];try{for(var j=!0,$=(w=void 0,vi(le)),se;se=yield we($.next()),E=se.done,!E;j=!0){U=se.value,j=!1;const D=U;if(yield yield we(D),D.candidates&&(!((P=D.candidates[0])===null||P===void 0)&&P.content)){N.push(D.candidates[0].content);for(const F of(z=D.candidates[0].content.parts)!==null&&z!==void 0?z:[])if(f<a&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(F.functionCall.name)){const k=yield we(_.get(F.functionCall.name).callTool([F.functionCall]));x.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(D){w={error:D}}finally{try{!j&&!E&&(V=$.return)&&(yield we(V.call($)))}finally{if(w)throw w.error}}if(x.length>0){u=!0;const D=new _u;D.candidates=[{content:{role:"user",parts:x}}],yield yield we(D);const F=[];F.push(...N),F.push({role:"user",parts:x});const k=ni(T.contents).concat(F);T.contents=k}else break}})})(this,h,e)}async generateContentInternal(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=iA(this.apiClient,e);return f=me("{model}:generateContent",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=rA(_),E=new _u;return Object.assign(E,T),E})}else{const m=nA(this.apiClient,e);return f=me("{model}:generateContent",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=oA(_),E=new _u;return Object.assign(E,T),E})}}async generateContentStreamInternal(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=iA(this.apiClient,e);return f=me("{model}:streamGenerateContent?alt=sse",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return _i(this,arguments,function*(){var E,w,V,U;try{for(var P=!0,z=vi(T),j;j=yield we(z.next()),E=j.done,!E;P=!0){U=j.value,P=!1;const $=U,se=rA(yield we($.json()),e);se.sdkHttpResponse={headers:$.headers};const X=new _u;Object.assign(X,se),yield yield we(X)}}catch($){w={error:$}}finally{try{!P&&!E&&(V=z.return)&&(yield we(V.call(z)))}finally{if(w)throw w.error}}})})}else{const m=nA(this.apiClient,e);return f=me("{model}:streamGenerateContent?alt=sse",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return _i(this,arguments,function*(){var E,w,V,U;try{for(var P=!0,z=vi(T),j;j=yield we(z.next()),E=j.done,!E;P=!0){U=j.value,P=!1;const $=U,se=oA(yield we($.json()),e);se.sdkHttpResponse={headers:$.headers};const X=new _u;Object.assign(X,se),yield yield we(X)}}catch($){w={error:$}}finally{try{!P&&!E&&(V=z.return)&&(yield we(V.call(z)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=C4(this.apiClient,e);return f=me("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=R4(_),E=new FS;return Object.assign(E,T),E})}else{const m=I4(this.apiClient,e);return f=me("{model}:batchEmbedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=w4(_),E=new FS;return Object.assign(E,T),E})}}async generateImagesInternal(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=O4(this.apiClient,e);return f=me("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=B4(_),E=new BS;return Object.assign(E,T),E})}else{const m=k4(this.apiClient,e);return f=me("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=F4(_),E=new BS;return Object.assign(E,T),E})}}async editImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=T4(this.apiClient,e);return a=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>{const m=E4(h),_=new C2;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=OU(this.apiClient,e);return a=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>{const m=FU(h),_=new w2;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=vU(this.apiClient,e);return a=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const m=TU(h),_=new R2;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=wU(this.apiClient,e);return a=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const m=RU(h),_=new x2;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=iU(this.apiClient,e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_g(_))}else{const m=nU(this.apiClient,e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>yg(_))}}async listInternal(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=dU(this.apiClient,e);return f=me("{models_url}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=mU(_),E=new GS;return Object.assign(E,T),E})}else{const m=fU(this.apiClient,e);return f=me("{models_url}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=hU(_),E=new GS;return Object.assign(E,T),E})}}async update(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=LU(this.apiClient,e);return f=me("{model}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_g(_))}else{const m=UU(this.apiClient,e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>yg(_))}}async delete(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=g4(this.apiClient,e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=_4(_),E=new qS;return Object.assign(E,T),E})}else{const m=p4(this.apiClient,e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=y4(_),E=new qS;return Object.assign(E,T),E})}}async countTokens(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=d4(this.apiClient,e);return f=me("{model}:countTokens",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=m4(_),E=new HS;return Object.assign(E,T),E})}else{const m=f4(this.apiClient,e);return f=me("{model}:countTokens",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=h4(_),E=new HS;return Object.assign(E,T),E})}}async computeTokens(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=o4(this.apiClient,e);return a=me("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>{const m=r4(h),_=new b2;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=Y4(this.apiClient,e);return f=me("{model}:predictLongRunning",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=z4(_),E=new Ld;return Object.assign(E,T),E})}else{const m=K4(this.apiClient,e);return f=me("{model}:predictLongRunning",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const T=H4(_),E=new Ld;return Object.assign(E,T),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ML extends Io{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=v2(e);return f=me("{operationName}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const m=_2(e);return f=me("{operationName}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=f2(e);return a=me("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VL(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function PL(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>HL(a))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function UL(n,e,t){const i={},r=d(e,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const a=d(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&p(t,["newSessionExpireTime"],a);const u=d(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&p(t,["bidiGenerateContentSetup"],qL(n,f));const h=d(e,["lockAdditionalFields"]);return t!==void 0&&h!=null&&p(t,["fieldMask"],h),i}function LL(n,e){const t={},i=d(e,["config"]);return i!=null&&p(t,["config"],UL(n,i,t)),t}function kL(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function OL(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FL(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function BL(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function GL(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=d(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const h=d(n,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Cy(T));const E=d(n,["thinkingConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","thinkingConfig"],E);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],PL(ln(V)));const U=d(n,["tools"]);if(e!==void 0&&U!=null){let le=ol(U);Array.isArray(le)&&(le=le.map(x=>KL(il(x)))),p(e,["setup","tools"],le)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],zL(P));const z=d(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&p(e,["setup","inputAudioTranscription"],z);const j=d(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&p(e,["setup","outputAudioTranscription"],j);const $=d(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&p(e,["setup","realtimeInputConfig"],$);const se=d(n,["contextWindowCompression"]);e!==void 0&&se!=null&&p(e,["setup","contextWindowCompression"],se);const X=d(n,["proactivity"]);if(e!==void 0&&X!=null&&p(e,["setup","proactivity"],X),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function qL(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],Qe(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],GL(r,t)),t}function HL(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],kL(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],OL(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const h=d(n,["inlineData"]);h!=null&&p(e,["inlineData"],VL(h));const m=d(n,["text"]);m!=null&&p(e,["text"],m);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const E=d(n,["videoMetadata"]);return E!=null&&p(e,["videoMetadata"],E),e}function zL(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function KL(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const r=d(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}const u=d(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],FL(u));const f=d(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],BL(f));const h=d(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const m=d(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YL(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${t}.${a}`);e.push(...r)}else e.push(t)}return e.join(",")}function JL(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const a=YL(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(m=>u.includes(m)?`generationConfig.${m}`:m));const h=[];a&&h.push(a),f.length>0&&h.push(...f),h.length>0?n.fieldMask=h.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class QL extends Io{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=LL(this.apiClient,e);a=me("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const h=JL(f,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $L(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function XL(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&$L(i,e),e}function WL(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function ZL(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function jL(n){const e={},t=d(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=d(n,["config"]);return i!=null&&ZL(i,e),e}function ek(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tk extends Io{constructor(e){super(),this.apiClient=e,this.list=async t=>new ws(Eo.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=WL(e);return a=me("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=XL(e);r=me("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=jL(e);return a=me("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const m=ek(h),_=new N2;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nk extends Io{constructor(e,t=new tk(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new ws(Eo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=YU(e);return a=me("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$U(e);return a=me("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=QU(e);r=me("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=tL(e);return a=me("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const m=nL(h),_=new D2;return Object.assign(_,m),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=iL(e);return a=me("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const m=oL(h),_=new M2;return Object.assign(_,m),_})}}async importFile(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ZU(e);return a=me("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const m=WU(h),_=new Ty;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Sw=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return Sw=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const ik=()=>Sw();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tg(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Eg=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ii extends Error{}class yn extends ii{constructor(e,t,i,r){super(`${yn.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new dh({message:i,cause:Eg(t)});const a=t;return e===400?new Iw(e,a,i,r):e===401?new Cw(e,a,i,r):e===403?new ww(e,a,i,r):e===404?new Rw(e,a,i,r):e===409?new xw(e,a,i,r):e===422?new bw(e,a,i,r):e===429?new Nw(e,a,i,r):e>=500?new Dw(e,a,i,r):new yn(e,a,i,r)}}class Sg extends yn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class dh extends yn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Aw extends dh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Iw extends yn{}class Cw extends yn{}class ww extends yn{}class Rw extends yn{}class xw extends yn{}class bw extends yn{}class Nw extends yn{}class Dw extends yn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ok=/^[a-z][a-z0-9+.-]*:/i,rk=n=>ok.test(n);let Ag=n=>(Ag=Array.isArray,Ag(n));const sk=Ag;let ak=sk;const fA=ak;function lk(n){if(!n)return!0;for(const e in n)return!1;return!0}function uk(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const ck=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ii(`${n} must be an integer`);if(e<0)throw new ii(`${n} must be a positive integer`);return e},fk=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dk=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ba="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hk(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const mk=()=>{var n,e,t,i,r;const a=hk();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ba,"X-Stainless-OS":hA(Deno.build.os),"X-Stainless-Arch":dA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ba,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ba,"X-Stainless-OS":hA((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":dA((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=pk();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ba,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ba,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function pk(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const dA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",hA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Jf;const gk=()=>Jf??(Jf=mk());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yk(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Mw(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function _k(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Mw({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function Vw(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function vk(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tk=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pw=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Mp(n,e,t){return Pw(),new File(n,e??"unknown_file",t)}function Ek(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const Sk=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uw=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Ak=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Uw(n),Ik=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function Ck(n,e,t){if(Pw(),n=await n,Ak(n))return n instanceof File?n:Mp([await n.arrayBuffer()],n.name);if(Ik(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Mp(await Ig(r),e,t)}const i=await Ig(n);if(e||(e=Ek(n)),!(t!=null&&t.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Mp(i,e,t)}async function Ig(n){var e,t,i,r,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(Uw(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(Sk(n))try{for(var f=!0,h=vi(n),m;m=await h.next(),e=m.done,!e;f=!0){r=m.value,f=!1;const _=r;u.push(...await Ig(_))}}catch(_){t={error:_}}finally{try{!f&&!e&&(i=h.return)&&await i.call(h)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${wk(n)}`)}return u}function wk(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lw{constructor(e){this._client=e}}Lw._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kw(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const mA=Object.freeze(Object.create(null)),Rk=(n=kw)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const a=[],u=t.reduce((_,T,E)=>{var w,V,U;/[?#]/.test(T)&&(r=!0);const P=i[E];let z=(r?encodeURIComponent:n)(""+P);return E!==i.length&&(P==null||typeof P=="object"&&P.toString===((U=Object.getPrototypeOf((V=Object.getPrototypeOf((w=P.hasOwnProperty)!==null&&w!==void 0?w:mA))!==null&&V!==void 0?V:mA))===null||U===void 0?void 0:U.toString))&&(z=P+"",a.push({start:_.length+T.length,length:z.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),_+T+(E===i.length?"":z)},""),f=u.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=h.exec(f))!==null;)a.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(a.sort((_,T)=>_.start-T.start),a.length>0){let _=0;const T=a.reduce((E,w)=>{const V=" ".repeat(w.start-_),U="^".repeat(w.length);return _=w.start+w.length,E+V+U},"");throw new ii(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${u}
${T}`)}return u}),Qf=Rk(kw);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ow extends Lw{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,a=Od(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new ii("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ii("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Qf`/${r}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(Qf`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(Qf`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const a=t??{},{api_version:u=this._client.apiVersion}=a,f=Od(a,["api_version"]);return this._client.get(Qf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}Ow._key=Object.freeze(["interactions"]);class Fw extends Ow{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xk(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let $f;function Ry(n){let e;return($f??(e=new globalThis.TextEncoder,$f=e.encode.bind(e)))(n)}let Xf;function pA(n){let e;return(Xf??(e=new globalThis.TextDecoder,Xf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ry(e):e;this.buffer=xk([this.buffer,t]);const i=[];let r;for(;(r=bk(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(pA(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=pA(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}hh.NEWLINE_CHARS=new Set([`
`,"\r"]);hh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function bk(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Nk(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fd={off:0,error:200,warn:300,info:400,debug:500},gA=(n,e,t)=>{if(n){if(uk(Fd,n))return n;hn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Fd))}`)}};function wu(){}function Wf(n,e,t){return!e||Fd[n]>Fd[t]?wu:e[n].bind(e)}const Dk={error:wu,warn:wu,info:wu,debug:wu};let yA=new WeakMap;function hn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return Dk;const r=yA.get(t);if(r&&r[0]===i)return r[1];const a={error:Wf("error",t,i),warn:Wf("warn",t,i),info:Wf("info",t,i),debug:Wf("debug",t,i)};return yA.set(t,[i,a]),a}const ss=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Da{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const a=i?hn(i):console;function u(){return _i(this,arguments,function*(){var h,m,_,T;if(r)throw new ii("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var w=!0,V=vi(Mk(e,t)),U;U=yield we(V.next()),h=U.done,!h;w=!0){T=U.value,w=!1;const P=T;if(!E)if(P.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield we(JSON.parse(P.data))}catch(z){throw a.error("Could not parse message into JSON:",P.data),a.error("From chunk:",P.raw),z}}}catch(P){m={error:P}}finally{try{!w&&!h&&(_=V.return)&&(yield we(_.call(V)))}finally{if(m)throw m.error}}E=!0}catch(P){if(Tg(P))return yield we(void 0);throw P}finally{E||t.abort()}})}return new Da(u,t,i)}static fromReadableStream(e,t,i){let r=!1;function a(){return _i(this,arguments,function*(){var h,m,_,T;const E=new hh,w=Vw(e);try{for(var V=!0,U=vi(w),P;P=yield we(U.next()),h=P.done,!h;V=!0){T=P.value,V=!1;const z=T;for(const j of E.decode(z))yield yield we(j)}}catch(z){m={error:z}}finally{try{!V&&!h&&(_=U.return)&&(yield we(_.call(U)))}finally{if(m)throw m.error}}for(const z of E.flush())yield yield we(z)})}function u(){return _i(this,arguments,function*(){var h,m,_,T;if(r)throw new ii("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var w=!0,V=vi(a()),U;U=yield we(V.next()),h=U.done,!h;w=!0){T=U.value,w=!1;const P=T;E||P&&(yield yield we(JSON.parse(P)))}}catch(P){m={error:P}}finally{try{!w&&!h&&(_=V.return)&&(yield we(_.call(V)))}finally{if(m)throw m.error}}E=!0}catch(P){if(Tg(P))return yield we(void 0);throw P}finally{E||t.abort()}})}return new Da(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Da(()=>r(e),this.controller,this.client),new Da(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return Mw({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const u=Ry(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function Mk(n,e){return _i(this,arguments,function*(){var i,r,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ii("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ii("Attempted to iterate over a response with no body");const f=new Pk,h=new hh,m=Vw(n.body);try{for(var _=!0,T=vi(Vk(m)),E;E=yield we(T.next()),i=E.done,!i;_=!0){u=E.value,_=!1;const w=u;for(const V of h.decode(w)){const U=f.decode(V);U&&(yield yield we(U))}}}catch(w){r={error:w}}finally{try{!_&&!i&&(a=T.return)&&(yield we(a.call(T)))}finally{if(r)throw r.error}}for(const w of h.flush()){const V=f.decode(w);V&&(yield yield we(V))}})}function Vk(n){return _i(this,arguments,function*(){var t,i,r,a;let u=new Uint8Array;try{for(var f=!0,h=vi(n),m;m=yield we(h.next()),t=m.done,!t;f=!0){a=m.value,f=!1;const _=a;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?Ry(_):_;let E=new Uint8Array(u.length+T.length);E.set(u),E.set(T,u.length),u=E;let w;for(;(w=Nk(u))!==-1;)yield yield we(u.slice(0,w)),u=u.slice(w)}}catch(_){i={error:_}}finally{try{!f&&!t&&(r=h.return)&&(yield we(r.call(h)))}finally{if(i)throw i.error}}u.length>0&&(yield yield we(u))})}class Pk{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=Uk(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function Uk(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Lk(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var f;if(e.options.stream)return hn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Da.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const h=t.headers.get("content-type"),m=(f=h==null?void 0:h.split(";")[0])===null||f===void 0?void 0:f.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return hn(n).debug(`[${i}] response parsed`,ss({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xy extends Promise{constructor(e,t,i=Lk){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new xy(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bw=Symbol("brand.privateNullableHeaders");function*kk(n){if(!n)return;if(Bw in n){const{values:i,nulls:r}=n;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():fA(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=fA(i[1])?i[1]:[i[1]];let u=!1;for(const f of a)f!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,f])}}const vu=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[a,u]of kk(i)){const f=a.toLowerCase();r.has(f)||(e.delete(a),r.add(f)),u===null?(e.delete(a),t.add(f)):(e.append(a,u),t.delete(f))}}return{[Bw]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vp=n=>{var e,t,i,r,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=r2)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gw;class mh{constructor(e){var t,i,r,a,u,f,h,{baseURL:m=Vp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Vp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,E=Od(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:_,apiVersion:T},E),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:mh.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;const V="warn";this.logLevel=V,this.logLevel=(u=(a=gA(w.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:gA(Vp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:V,this.fetchOptions=w.fetchOptions,this.maxRetries=(f=w.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(h=w.fetch)!==null&&h!==void 0?h:yk(),this.encoder=Tk,this._options=w,this.apiKey=_,this.apiVersion=T,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=vu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return vu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return vu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new ii(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ba}`}defaultIdempotencyKey(){return`stainless-node-retry-${ik()}`}makeStatusError(e,t,i,r){return yn.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=rk(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return lk(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new xy(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,a,u;const f=await e,h=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=h),await this.prepareOptions(f);const{req:m,url:_,timeout:T}=await this.buildRequest(f,{retryCount:h-t});await this.prepareRequest(m,{url:_,options:f});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,V=Date.now();if(hn(this).debug(`[${E}] sending request`,ss({retryOfRequestLogID:i,method:f.method,url:_,options:f,headers:m.headers})),!((a=f.signal)===null||a===void 0)&&a.aborted)throw new Sg;const U=new AbortController,P=await this.fetchWithTimeout(_,m,T,U).catch(Eg),z=Date.now();if(P instanceof globalThis.Error){const $=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new Sg;const se=Tg(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return hn(this).info(`[${E}] connection ${se?"timed out":"failed"} - ${$}`),hn(this).debug(`[${E}] connection ${se?"timed out":"failed"} (${$})`,ss({retryOfRequestLogID:i,url:_,durationMs:z-V,message:P.message})),this.retryRequest(f,t,i??E);throw hn(this).info(`[${E}] connection ${se?"timed out":"failed"} - error; no more retries left`),hn(this).debug(`[${E}] connection ${se?"timed out":"failed"} (error; no more retries left)`,ss({retryOfRequestLogID:i,url:_,durationMs:z-V,message:P.message})),se?new Aw:new dh({cause:P})}const j=`[${E}${w}] ${m.method} ${_} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${z-V}ms`;if(!P.ok){const $=await this.shouldRetry(P);if(t&&$){const D=`retrying, ${t} attempts remaining`;return await vk(P.body),hn(this).info(`${j} - ${D}`),hn(this).debug(`[${E}] response error (${D})`,ss({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:z-V})),this.retryRequest(f,t,i??E,P.headers)}const se=$?"error; no more retries left":"error; not retryable";hn(this).info(`${j} - ${se}`);const X=await P.text().catch(D=>Eg(D).message),le=fk(X),x=le?void 0:X;throw hn(this).debug(`[${E}] response error (${se})`,ss({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:x,durationMs:Date.now()-V})),this.makeStatusError(P.status,le,x,P.headers)}return hn(this).info(j),hn(this).debug(`[${E}] response start`,ss({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:z-V})),{response:P,options:f,controller:U,requestLogID:E,retryOfRequestLogID:i,startTime:V}}async fetchWithTimeout(e,t,i,r){const a=t||{},{signal:u,method:f}=a,h=Od(a,["signal","method"]),m=r.abort.bind(r);u&&u.addEventListener("abort",m,{once:!0});const _=setTimeout(m,i),T=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},T?{duplex:"half"}:{}),{method:"GET"}),h);f&&(E.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(_)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var a;let u;const f=r==null?void 0:r.get("retry-after-ms");if(f){const m=parseFloat(f);Number.isNaN(m)||(u=m)}const h=r==null?void 0:r.get("retry-after");if(h&&!u){const m=parseFloat(h);Number.isNaN(m)?u=Date.parse(h)-Date.now():u=m*1e3}if(!(u&&0<=u&&u<60*1e3)){const m=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,m)}return await dk(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,a;const u=Object.assign({},e),{method:f,path:h,query:m,defaultBaseURL:_}=u,T=this.buildURL(h,m,_);"timeout"in u&&ck("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:E,body:w}=this.buildBody({options:u}),V=await this.buildHeaders({options:e,method:f,bodyHeaders:E,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:V},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=vu([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),gk()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=vu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:_k(e)}:this.encoder({body:e,headers:i})}}mh.DEFAULT_TIMEOUT=6e4;class Qt extends mh{constructor(){super(...arguments),this.interactions=new Fw(this)}}Gw=Qt;Qt.GeminiNextGenAPIClient=Gw;Qt.GeminiNextGenAPIClientError=ii;Qt.APIError=yn;Qt.APIConnectionError=dh;Qt.APIConnectionTimeoutError=Aw;Qt.APIUserAbortError=Sg;Qt.NotFoundError=Rw;Qt.ConflictError=xw;Qt.RateLimitError=Nw;Qt.BadRequestError=Iw;Qt.AuthenticationError=Cw;Qt.InternalServerError=Dw;Qt.PermissionDeniedError=ww;Qt.UnprocessableEntityError=bw;Qt.toFile=Ck;Qt.Interactions=Fw;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ok(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function Fk(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function Bk(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function Gk(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function qk(n,e,t){const i={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(n,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=d(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(d(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(d(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","batchSize"],f);const h=d(n,["learningRate"]);if(e!==void 0&&h!=null&&p(e,["tuningTask","hyperparameters","learningRate"],h),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(d(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(d(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(d(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(d(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return i}function Hk(n,e,t){const i={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const X=d(n,["validationDataset"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec"],Pp(X))}else if(r==="PREFERENCE_TUNING"){const X=d(n,["validationDataset"]);e!==void 0&&X!=null&&p(e,["preferenceOptimizationSpec"],Pp(X))}else if(r==="DISTILLATION"){const X=d(n,["validationDataset"]);e!==void 0&&X!=null&&p(e,["distillationSpec"],Pp(X))}const a=d(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=d(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const X=d(n,["epochCount"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],X)}else if(f==="PREFERENCE_TUNING"){const X=d(n,["epochCount"]);e!==void 0&&X!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],X)}else if(f==="DISTILLATION"){const X=d(n,["epochCount"]);e!==void 0&&X!=null&&p(e,["distillationSpec","hyperParameters","epochCount"],X)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const X=d(n,["learningRateMultiplier"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],X)}else if(h==="PREFERENCE_TUNING"){const X=d(n,["learningRateMultiplier"]);e!==void 0&&X!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],X)}else if(h==="DISTILLATION"){const X=d(n,["learningRateMultiplier"]);e!==void 0&&X!=null&&p(e,["distillationSpec","hyperParameters","learningRateMultiplier"],X)}let m=d(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const X=d(n,["exportLastCheckpointOnly"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],X)}else if(m==="PREFERENCE_TUNING"){const X=d(n,["exportLastCheckpointOnly"]);e!==void 0&&X!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],X)}else if(m==="DISTILLATION"){const X=d(n,["exportLastCheckpointOnly"]);e!==void 0&&X!=null&&p(e,["distillationSpec","exportLastCheckpointOnly"],X)}let _=d(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const X=d(n,["adapterSize"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],X)}else if(_==="PREFERENCE_TUNING"){const X=d(n,["adapterSize"]);e!==void 0&&X!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],X)}else if(_==="DISTILLATION"){const X=d(n,["adapterSize"]);e!==void 0&&X!=null&&p(e,["distillationSpec","hyperParameters","adapterSize"],X)}let T=d(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const X=d(n,["tuningMode"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","tuningMode"],X)}const E=d(n,["customBaseModel"]);e!==void 0&&E!=null&&p(e,["customBaseModel"],E);let w=d(t,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const X=d(n,["batchSize"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","hyperParameters","batchSize"],X)}let V=d(t,["config","method"]);if(V===void 0&&(V="SUPERVISED_FINE_TUNING"),V==="SUPERVISED_FINE_TUNING"){const X=d(n,["learningRate"]);e!==void 0&&X!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRate"],X)}const U=d(n,["labels"]);e!==void 0&&U!=null&&p(e,["labels"],U);const P=d(n,["beta"]);e!==void 0&&P!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],P);const z=d(n,["baseTeacherModel"]);e!==void 0&&z!=null&&p(e,["distillationSpec","baseTeacherModel"],z);const j=d(n,["tunedTeacherModelSource"]);e!==void 0&&j!=null&&p(e,["distillationSpec","tunedTeacherModelSource"],j);const $=d(n,["sftLossWeightMultiplier"]);e!==void 0&&$!=null&&p(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],$);const se=d(n,["outputUri"]);return e!==void 0&&se!=null&&p(e,["outputUri"],se),i}function zk(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const a=d(n,["trainingDataset"]);a!=null&&t5(a);const u=d(n,["config"]);return u!=null&&qk(u,t),t}function Kk(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const a=d(n,["trainingDataset"]);a!=null&&n5(a,t,e);const u=d(n,["config"]);return u!=null&&Hk(u,t,e),t}function Yk(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function Jk(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function Qk(n,e,t){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function $k(n,e,t){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function Xk(n,e){const t={},i=d(n,["config"]);return i!=null&&Qk(i,t),t}function Wk(n,e){const t={},i=d(n,["config"]);return i!=null&&$k(i,t),t}function Zk(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const a=d(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>qw(f))),p(t,["tuningJobs"],u)}return t}function jk(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const a=d(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>Cg(f))),p(t,["tuningJobs"],u)}return t}function e5(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["model"],i);const r=d(n,["name"]);return r!=null&&p(t,["endpoint"],r),t}function t5(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),p(t,["examples","examples"],r)}return t}function n5(n,e,t){const i={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}let a=d(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function qw(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const a=d(n,["state"]);a!=null&&p(t,["state"],ow(a));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&p(t,["startTime"],f);const h=d(n,["tuningTask","completeTime"]);h!=null&&p(t,["endTime"],h);const m=d(n,["updateTime"]);m!=null&&p(t,["updateTime"],m);const _=d(n,["description"]);_!=null&&p(t,["description"],_);const T=d(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const E=d(n,["_self"]);return E!=null&&p(t,["tunedModel"],e5(E)),t}function Cg(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const a=d(n,["state"]);a!=null&&p(t,["state"],ow(a));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(t,["startTime"],f);const h=d(n,["endTime"]);h!=null&&p(t,["endTime"],h);const m=d(n,["updateTime"]);m!=null&&p(t,["updateTime"],m);const _=d(n,["error"]);_!=null&&p(t,["error"],_);const T=d(n,["description"]);T!=null&&p(t,["description"],T);const E=d(n,["baseModel"]);E!=null&&p(t,["baseModel"],E);const w=d(n,["tunedModel"]);w!=null&&p(t,["tunedModel"],w);const V=d(n,["preTunedModel"]);V!=null&&p(t,["preTunedModel"],V);const U=d(n,["supervisedTuningSpec"]);U!=null&&p(t,["supervisedTuningSpec"],U);const P=d(n,["preferenceOptimizationSpec"]);P!=null&&p(t,["preferenceOptimizationSpec"],P);const z=d(n,["distillationSpec"]);z!=null&&p(t,["distillationSpec"],z);const j=d(n,["tuningDataStats"]);j!=null&&p(t,["tuningDataStats"],j);const $=d(n,["encryptionSpec"]);$!=null&&p(t,["encryptionSpec"],$);const se=d(n,["partnerModelTuningSpec"]);se!=null&&p(t,["partnerModelTuningSpec"],se);const X=d(n,["customBaseModel"]);X!=null&&p(t,["customBaseModel"],X);const le=d(n,["experiment"]);le!=null&&p(t,["experiment"],le);const x=d(n,["labels"]);x!=null&&p(t,["labels"],x);const N=d(n,["outputUri"]);N!=null&&p(t,["outputUri"],N);const D=d(n,["pipelineJob"]);D!=null&&p(t,["pipelineJob"],D);const F=d(n,["serviceAccount"]);F!=null&&p(t,["serviceAccount"],F);const k=d(n,["tunedModelDisplayName"]);k!=null&&p(t,["tunedModelDisplayName"],k);const O=d(n,["veoTuningSpec"]);return O!=null&&p(t,["veoTuningSpec"],O),t}function i5(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const a=d(n,["metadata"]);a!=null&&p(t,["metadata"],a);const u=d(n,["done"]);u!=null&&p(t,["done"],u);const f=d(n,["error"]);return f!=null&&p(t,["error"],f),t}function Pp(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const r=d(n,["vertexDatasetResource"]);return r!=null&&p(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o5 extends Io{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ws(Eo.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:dg.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=Jk(e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>Cg(_))}else{const m=Yk(e);return f=me("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>qw(_))}}async listInternal(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=Wk(e);return f=me("tuningJobs",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=jk(_),E=new zS;return Object.assign(E,T),E})}else{const m=Xk(e);return f=me("tunedModels",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=Zk(_),E=new zS;return Object.assign(E,T),E})}}async cancel(e){var t,i,r,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const m=Fk(e);return f=me("{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=Gk(_),E=new KS;return Object.assign(E,T),E})}else{const m=Ok(e);return f=me("{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=Bk(_),E=new KS;return Object.assign(E,T),E})}}async tuneInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const f=Kk(e,e);return a=me("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>Cg(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=zk(e);return a=me("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>i5(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r5{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const s5=1024*1024*8,a5=3,l5=1e3,u5=2,Bd="x-goog-upload-status";async function c5(n,e,t){var i;const r=await Hw(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Bd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function f5(n,e,t){var i;const r=await Hw(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Bd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=ZC(a),f=new Ey;return Object.assign(f,u),f}async function Hw(n,e,t){var i,r;let a=0,u=0,f=new mg(new Response),h="upload";for(a=n.size;u<a;){const m=Math.min(s5,a-u),_=n.slice(u,u+m);u+m>=a&&(h+=", finalize");let T=0,E=l5;for(;T<a5&&(f=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[Bd]));)T++,await h5(E),E=E*u5;if(u+=m,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[Bd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function d5(n){return{size:n.size,type:n.type}}function h5(n){return new Promise(e=>setTimeout(e,n))}class m5{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await c5(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await f5(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await d5(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p5{create(e,t,i){return new g5(e,t,i)}}class g5{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _A="x-goog-api-key";class y5{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(_A)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(_A,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _5="gl-node/";class v5{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Qt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=u2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new y5(this.apiKey);this.apiClient=new dL({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:_5+"web",uploader:new m5,downloader:new r5}),this.models=new DL(this.apiClient),this.live=new CL(this.apiClient,r,new p5),this.batches=new FV(this.apiClient),this.chats=new TP(this.models,this.apiClient),this.caches=new yP(this.apiClient),this.files=new MP(this.apiClient),this.operations=new ML(this.apiClient),this.authTokens=new QL(this.apiClient),this.tunings=new o5(this.apiClient),this.fileSearchStores=new nk(this.apiClient)}}const T5=new v5({apiKey:"PLACEHOLDER_API_KEY"});async function E5(n,e){try{return(await T5.models.generateContent({model:"gemini-3-flash-preview",contents:`Gere um resumo curto e instigante em portugus para o livro "${n}" do autor "${e}".`})).text||"Resumo no disponvel no momento."}catch(t){return console.error("Gemini Error:",t),"Erro ao gerar resumo automtico."}}const S5=({book:n,onClose:e,isFavorite:t,isCached:i,onToggleFavorite:r,userId:a,onRead:u,onDownloadComplete:f})=>{const[h,m]=Ue.useState(null),[_,T]=Ue.useState(!1),[E,w]=Ue.useState(null),V=async()=>{T(!0);const z=await E5(n.title,n.author);m(z),T(!1)},U=async()=>{await wt.addToHistory(a,n.id),u(n)},P=async()=>{if(i){confirm("Este livro j est guardado. Deseja remover do dispositivo para liberar espao?")&&(await wt.removeFileLocally(n.id),f());return}w(0);const z=`CONTEDO OFICIAL DA BIBLIOTECA JIMUI
Ttulo: ${n.title}
Autor: ${n.author}

CAPTULO 1

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia odio vitae vestibulum vestibulum. Este contedo est agora persistido no seu dispositivo local. Mesmo que voc feche o navegador ou fique sem internet, os dados esto gravados na memria reservada para este aplicativo.

CAPTULO 2

`+n.summary,j=setInterval(()=>{w($=>$===null?0:$>=100?(clearInterval(j),100):$+Math.floor(Math.random()*30))},400);setTimeout(async()=>{clearInterval(j),w(100),await wt.saveFileLocally(n.id,z),setTimeout(()=>{w(null),f()},500)},2e3)};return C.jsx("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:C.jsxs("div",{className:"bg-white w-full max-w-4xl h-[95vh] md:h-auto overflow-y-auto rounded-t-[3rem] md:rounded-[3rem] shadow-2xl relative animate-in slide-in-from-bottom duration-300 no-scrollbar",children:[C.jsx("button",{onClick:e,className:"absolute top-6 right-6 p-2.5 bg-gray-100/80 backdrop-blur-md rounded-2xl hover:bg-gray-200 transition-all z-10",children:C.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-8 p-8 md:p-12",children:[C.jsxs("div",{className:"w-full md:w-2/5 flex-shrink-0",children:[C.jsxs("div",{className:"relative group",children:[C.jsx("img",{src:n.coverUrl,alt:n.title,className:"w-full aspect-[3/4.5] object-cover rounded-[2.5rem] shadow-2xl shadow-gray-200"}),i&&C.jsxs("div",{className:"absolute top-4 left-4 bg-[#0F9D58] text-white px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest shadow-xl flex items-center gap-1 animate-in zoom-in duration-300",children:[C.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"NO DISPOSITIVO"]})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-8",children:[C.jsxs("button",{onClick:U,className:"col-span-2 py-4.5 bg-[#0F9D58] text-white rounded-2xl font-black text-lg shadow-xl shadow-green-100 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2",children:[C.jsx(jn.BookOpen,{}),"LER AGORA"]}),C.jsx("button",{onClick:P,disabled:E!==null,className:`py-3 rounded-2xl font-black text-[10px] flex flex-col items-center justify-center gap-1 transition-all border relative overflow-hidden ${i?"bg-orange-50 text-orange-600 border-orange-100 hover:bg-orange-100":"bg-gray-50 text-gray-700 border-gray-100 hover:bg-gray-100"}`,children:E!==null?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"absolute inset-0 bg-green-100/50",style:{width:`${E}%`,transition:"width 0.3s ease"}}),C.jsxs("span",{className:"relative z-10",children:[E,"% GUARDANDO..."]})]}):C.jsx(C.Fragment,{children:C.jsxs("div",{className:"flex items-center gap-2",children:[i?C.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):C.jsx(jn.Download,{}),i?"REMOVER DO APP":"GUARDAR NO APP"]})})}),C.jsxs("button",{onClick:r,className:`py-3 rounded-2xl font-black text-[10px] flex items-center justify-center gap-2 transition-all border ${t?"bg-orange-50 text-orange-600 border-orange-100":"bg-white text-gray-400 border-gray-100 hover:bg-gray-50"}`,children:[C.jsx(jn.Heart,{filled:t}),t?"FAVORITO":"FAVORITAR"]})]})]}),C.jsxs("div",{className:"flex-1 space-y-8",children:[C.jsxs("div",{children:[C.jsx("span",{className:"px-4 py-1.5 bg-orange-100 text-orange-700 rounded-full text-[10px] font-black uppercase tracking-widest",children:n.category}),C.jsx("h2",{className:"text-4xl font-black text-gray-900 mt-4 leading-tight tracking-tight",children:n.title}),C.jsxs("p",{className:"text-xl text-[#0F9D58] font-bold mt-2",children:["Por ",n.author]})]}),C.jsxs("div",{className:"space-y-4",children:[C.jsx("h4",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Sinopse da Obra"}),C.jsx("p",{className:"text-gray-600 leading-relaxed text-lg font-medium",children:n.summary})]}),C.jsxs("div",{className:"p-8 bg-green-50/40 rounded-[2.5rem] border border-green-100 relative overflow-hidden group",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-10",children:[C.jsx("h4",{className:"text-[10px] font-black text-[#0F9D58] uppercase tracking-widest flex items-center gap-2",children:"AI INSIGHTS (Gemini)"}),!h&&!_&&C.jsx("button",{onClick:V,className:"text-[10px] font-black text-orange-500 hover:text-orange-600 transition-colors underline",children:"GERAR RESUMO"})]}),_?C.jsxs("div",{className:"space-y-3 animate-pulse relative z-10",children:[C.jsx("div",{className:"h-4 bg-green-200/20 rounded-full w-full"}),C.jsx("div",{className:"h-4 bg-green-200/20 rounded-full w-5/6"})]}):h?C.jsxs("p",{className:"italic text-gray-700 leading-relaxed relative z-10",children:['"',h,'"']}):C.jsx("p",{className:"text-sm text-gray-400 relative z-10",children:"Use inteligncia artificial para resumir esta obra."})]}),C.jsxs("div",{className:"bg-gray-50 p-6 rounded-3xl border border-gray-100 flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Disponibilidade"}),C.jsx("p",{className:`text-sm font-black ${i?"text-[#0F9D58]":"text-orange-500"}`,children:i?"DISPONVEL TOTALMENTE OFFLINE":"DISPONVEL APENAS ONLINE"})]}),C.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:i?C.jsx(jn.Wifi,{online:!0}):C.jsx(jn.Wifi,{online:!1})})]})]})]})]})})},A5=({books:n,categories:e,onUpdate:t})=>{var le;const[i,r]=Ue.useState("books"),[a,u]=Ue.useState(!1),[f,h]=Ue.useState(!1),[m,_]=Ue.useState(!1),[T,E]=Ue.useState(null),[w,V]=Ue.useState(""),[U,P]=Ue.useState({title:"",author:"",category:((le=e[0])==null?void 0:le.name)||"",summary:"",coverUrl:`https://picsum.photos/seed/${Math.random()}/400/600`,pdfUrl:""}),z=async x=>{var N;if(x.preventDefault(),!(!U.title||!U.author)){_(!0);try{const D={id:"",title:U.title,author:U.author,category:U.category||"Geral",summary:U.summary||"",coverUrl:U.coverUrl||"",pdfUrl:U.pdfUrl||"",createdAt:Date.now()};await wt.saveBook(D),u(!1),P({title:"",author:"",category:((N=e[0])==null?void 0:N.name)||"",summary:"",coverUrl:`https://picsum.photos/seed/${Math.random()}/400/600`,pdfUrl:""}),t()}catch(D){console.error("Erro ao salvar livro:",D),alert("Erro ao salvar livro. Verifica a consola (F12).")}finally{_(!1)}}},j=async x=>{if(x.preventDefault(),!!T){_(!0);try{await wt.saveBook(T),E(null),t()}catch(N){console.error("Erro ao editar livro:",N),alert("Erro ao editar livro. Verifica a consola (F12).")}finally{_(!1)}}},$=async x=>{x.preventDefault(),w&&(await wt.saveCategory(w),V(""),h(!1),t())},se=async x=>{if(console.log("Apagar livro  ID:",x.id,"| Ttulo:",x.title),!x.id){alert("Este livro no tem ID vlido  no pode ser apagado. Verifica a consola (F12).");return}if(confirm(`Deseja realmente remover "${x.title}"?`))try{await wt.deleteBook(x.id),t()}catch(N){console.error("Erro ao apagar livro:",N),alert("Erro ao apagar. Verifica a consola (F12).")}},X=async x=>{confirm("Deseja remover esta categoria?")&&(await wt.deleteCategory(x),t())};return C.jsxs("div",{className:"animate-in fade-in slide-in-from-top duration-500",children:[C.jsxs("div",{className:"flex items-center justify-between mb-8",children:[C.jsxs("div",{children:[C.jsx("h2",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Gesto Cultura"}),C.jsx("p",{className:"text-gray-400 font-medium",children:"Controle total da Biblioteca JIMUI"})]}),C.jsxs("button",{onClick:()=>i==="books"?u(!0):h(!0),className:"bg-[#0F9D58] text-white px-6 py-3 rounded-2xl font-black flex items-center gap-2 shadow-xl shadow-green-100 hover:scale-[1.02] active:scale-95 transition-all text-sm",children:[C.jsx(jn.Plus,{}),i==="books"?"NOVO LIVRO":"NOVA CATEGORIA"]})]}),C.jsxs("div",{className:"flex gap-6 mb-8 border-b border-gray-100",children:[C.jsxs("button",{onClick:()=>r("books"),className:`pb-4 px-2 font-black transition-all text-xs tracking-widest ${i==="books"?"text-[#0F9D58] border-b-2 border-[#0F9D58]":"text-gray-300 hover:text-gray-400"}`,children:["LIVROS (",n.length,")"]}),C.jsxs("button",{onClick:()=>r("categories"),className:`pb-4 px-2 font-black transition-all text-xs tracking-widest ${i==="categories"?"text-[#0F9D58] border-b-2 border-[#0F9D58]":"text-gray-300 hover:text-gray-400"}`,children:["CATEGORIAS (",e.length,")"]})]}),i==="books"?C.jsx("div",{className:"bg-white rounded-[2rem] shadow-sm overflow-hidden border border-gray-100",children:C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full text-left",children:[C.jsx("thead",{className:"bg-gray-50 text-gray-400 text-[10px] font-black uppercase tracking-widest",children:C.jsxs("tr",{children:[C.jsx("th",{className:"px-6 py-4",children:"Informaes"}),C.jsx("th",{className:"px-6 py-4",children:"Categoria"}),C.jsx("th",{className:"px-6 py-4 text-right",children:"Aes"})]})}),C.jsxs("tbody",{className:"divide-y divide-gray-50",children:[n.map(x=>C.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[C.jsx("td",{className:"px-6 py-4",children:C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("img",{src:x.coverUrl,className:"w-10 h-14 object-cover rounded-xl shadow-sm",alt:""}),C.jsxs("div",{children:[C.jsx("p",{className:"font-black text-gray-800 line-clamp-1",children:x.title}),C.jsx("p",{className:"text-xs text-gray-400 font-bold",children:x.author}),!1]})]})}),C.jsx("td",{className:"px-6 py-4",children:C.jsx("span",{className:"px-3 py-1 bg-orange-50 text-orange-600 rounded-full text-[10px] font-black uppercase",children:x.category})}),C.jsx("td",{className:"px-6 py-4 text-right",children:C.jsxs("div",{className:"flex items-center justify-end gap-2",children:[C.jsx("button",{onClick:()=>E(x),className:"p-2.5 text-blue-300 hover:text-blue-500 hover:bg-blue-50 rounded-xl transition-all",title:"Editar",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),C.jsx("button",{onClick:()=>se(x),className:"p-2.5 text-red-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all",title:"Apagar",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},x.id)),n.length===0&&C.jsx("tr",{children:C.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-gray-300 font-bold",children:"Nenhum livro cadastrado ainda."})})]})]})})}):C.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map(x=>C.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 flex items-center justify-between group hover:shadow-md transition-all",children:[C.jsxs("div",{children:[C.jsx("span",{className:"font-black text-gray-800 text-lg",children:x.name}),C.jsxs("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest",children:[n.filter(N=>N.category===x.name).length," Livros"]})]}),C.jsx("button",{onClick:()=>X(x.id),className:"p-2 text-gray-200 hover:text-red-500 transition-all",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},x.id))}),a&&C.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:C.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[3rem] p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[C.jsx("h3",{className:"text-2xl font-black mb-8 text-gray-900 tracking-tight",children:"Cadastrar Novo Livro"}),C.jsxs("form",{onSubmit:z,className:"space-y-5",children:[C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxs("div",{className:"col-span-2",children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Ttulo do Livro"}),C.jsx("input",{required:!0,className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none",value:U.title,onChange:x=>P({...U,title:x.target.value})})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Autor"}),C.jsx("input",{required:!0,className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none",value:U.author,onChange:x=>P({...U,author:x.target.value})})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Categoria"}),C.jsx("select",{className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none font-bold text-sm",value:U.category,onChange:x=>P({...U,category:x.target.value}),children:e.map(x=>C.jsx("option",{value:x.name,children:x.name},x.id))})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"URL do PDF"}),C.jsx("input",{className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none",value:U.pdfUrl,onChange:x=>P({...U,pdfUrl:x.target.value})})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Breve Resumo"}),C.jsx("textarea",{rows:3,className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none resize-none",value:U.summary,onChange:x=>P({...U,summary:x.target.value})})]}),C.jsxs("div",{className:"flex gap-4 pt-4",children:[C.jsx("button",{type:"button",onClick:()=>u(!1),className:"flex-1 py-4 font-black text-gray-400 hover:text-gray-600 transition-colors",children:"CANCELAR"}),C.jsx("button",{type:"submit",disabled:m,className:"flex-1 bg-[#0F9D58] text-white py-4 rounded-2xl font-black shadow-xl shadow-green-100 hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:m?"SALVANDO...":"SALVAR LIVRO"})]})]})]})}),T&&C.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:C.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[3rem] p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[C.jsx("h3",{className:"text-2xl font-black mb-8 text-gray-900 tracking-tight",children:"Editar Livro"}),C.jsxs("form",{onSubmit:j,className:"space-y-5",children:[C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxs("div",{className:"col-span-2",children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Ttulo do Livro"}),C.jsx("input",{required:!0,className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none",value:T.title,onChange:x=>E({...T,title:x.target.value})})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Autor"}),C.jsx("input",{required:!0,className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none",value:T.author,onChange:x=>E({...T,author:x.target.value})})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Categoria"}),C.jsx("select",{className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none font-bold text-sm",value:T.category,onChange:x=>E({...T,category:x.target.value}),children:e.map(x=>C.jsx("option",{value:x.name,children:x.name},x.id))})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"URL do PDF"}),C.jsx("input",{className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none",value:T.pdfUrl||"",onChange:x=>E({...T,pdfUrl:x.target.value})})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Breve Resumo"}),C.jsx("textarea",{rows:3,className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none resize-none",value:T.summary,onChange:x=>E({...T,summary:x.target.value})})]}),C.jsxs("div",{className:"flex gap-4 pt-4",children:[C.jsx("button",{type:"button",onClick:()=>E(null),className:"flex-1 py-4 font-black text-gray-400 hover:text-gray-600 transition-colors",children:"CANCELAR"}),C.jsx("button",{type:"submit",disabled:m,className:"flex-1 bg-[#0F9D58] text-white py-4 rounded-2xl font-black shadow-xl shadow-green-100 hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:m?"SALVANDO...":"GUARDAR ALTERAES"})]})]})]})}),f&&C.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:C.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[3rem] p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[C.jsx("h3",{className:"text-2xl font-black mb-6 text-gray-900 tracking-tight",children:"Nova Categoria"}),C.jsxs("form",{onSubmit:$,className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Nome da Categoria"}),C.jsx("input",{autoFocus:!0,required:!0,className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none",value:w,onChange:x=>V(x.target.value)})]}),C.jsxs("div",{className:"flex gap-4 pt-4",children:[C.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 py-4 font-black text-gray-400 hover:text-gray-600 transition-colors",children:"CANCELAR"}),C.jsx("button",{type:"submit",className:"flex-1 bg-[#0F9D58] text-white py-4 rounded-2xl font-black shadow-xl shadow-green-100 hover:scale-[1.02] active:scale-95 transition-all",children:"CRIAR"})]})]})]})})]})},I5=()=>C.jsx("div",{className:"max-w-4xl mx-auto py-8 animate-in fade-in slide-in-from-bottom duration-500",children:C.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl overflow-hidden border border-gray-100",children:[C.jsxs("div",{className:"bg-[#0F9D58] p-10 text-white text-center relative overflow-hidden",children:[C.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -mr-20 -mt-20 blur-3xl"}),C.jsxs("div",{className:"relative z-10",children:[C.jsx("div",{className:"w-20 h-20 bg-white rounded-3xl mx-auto flex items-center justify-center shadow-2xl mb-6 overflow-hidden",children:C.jsx("img",{src:"/biblioteca-jimui/logo.jpeg",alt:"Logo JIMUA",className:"w-full h-full object-cover"})}),C.jsx("h2",{className:"text-4xl font-black mb-2",children:Yf.name}),C.jsxs("p",{className:"text-green-100 font-medium opacity-90",children:["Verso ",Yf.version]})]})]}),C.jsxs("div",{className:"p-10 space-y-10",children:[C.jsxs("section",{children:[C.jsxs("h3",{className:"text-xl font-black text-gray-900 mb-4 flex items-center gap-3",children:[C.jsx("span",{className:"w-8 h-8 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center text-sm",children:"01"}),"Nossa Misso"]}),C.jsx("p",{className:"text-gray-600 leading-relaxed text-lg",children:Yf.purpose})]}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[C.jsxs("section",{className:"bg-gray-50 p-6 rounded-3xl border border-gray-100",children:[C.jsxs("h3",{className:"text-lg font-black text-gray-900 mb-4 flex items-center gap-3",children:[C.jsx("span",{className:"w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-sm",children:"02"}),"Como Funciona?"]}),C.jsxs("ul",{className:"space-y-3 text-gray-600",children:[C.jsxs("li",{className:"flex gap-2",children:[C.jsx("span",{className:"text-[#0F9D58] font-bold",children:""}),C.jsxs("span",{children:[C.jsx("strong",{children:"Busca:"})," Encontre livros por ttulo ou categoria."]})]}),C.jsxs("li",{className:"flex gap-2",children:[C.jsx("span",{className:"text-[#0F9D58] font-bold",children:""}),C.jsxs("span",{children:[C.jsx("strong",{children:"Offline:"})," Baixe livros para ler sem internet."]})]}),C.jsxs("li",{className:"flex gap-2",children:[C.jsx("span",{className:"text-[#0F9D58] font-bold",children:""}),C.jsxs("span",{children:[C.jsx("strong",{children:"Favoritos:"})," Guarde o que mais gosta."]})]}),C.jsxs("li",{className:"flex gap-2",children:[C.jsx("span",{className:"text-[#0F9D58] font-bold",children:""}),C.jsxs("span",{children:[C.jsx("strong",{children:"IA:"})," Resumos automticos feitos por IA."]})]})]})]}),C.jsxs("section",{className:"bg-orange-50/30 p-6 rounded-3xl border border-orange-100",children:[C.jsxs("h3",{className:"text-lg font-black text-gray-900 mb-4 flex items-center gap-3",children:[C.jsx("span",{className:"w-8 h-8 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center text-sm",children:"03"}),"Crditos"]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("p",{className:"text-gray-700 font-bold",children:"Criado por:"}),C.jsx("p",{className:"text-[#FF9800] font-black text-xl",children:Yf.creator}),C.jsx("p",{className:"text-gray-500 text-sm mt-4",children:"Desenvolvido com carinho para fortalecer a cultura e educao da nossa comunidade."})]})]})]}),C.jsx("div",{className:"pt-6 border-t border-gray-100 text-center",children:C.jsx("p",{className:"text-gray-400 text-sm italic",children:'"A leitura  para o intelecto o que o exerccio  para o corpo."'})})]})]})}),C5=({onAuthSuccess:n})=>{const[e,t]=Ue.useState("login"),[i,r]=Ue.useState(""),[a,u]=Ue.useState(""),[f,h]=Ue.useState(""),[m,_]=Ue.useState(""),[T,E]=Ue.useState(""),[w,V]=Ue.useState(!1),U=async z=>{z.preventDefault(),E(""),V(!0);try{if(e==="login"){const j=await wt.login(i,a);j?n(j):E("Email ou senha invlidos.")}else if(!m||!i||!a||!f)E("Por favor, preencha todos os campos.");else if(a!==f)E("As senhas no coincidem.");else if(a.length<4)E("A senha deve ter pelo menos 4 caracteres.");else{const j=await wt.register(m,i,a);n(j)}}catch{E("Ocorreu um erro ao processar sua solicitao.")}finally{V(!1)}},P=()=>{t(e==="login"?"register":"login"),E(""),u(""),h("")};return C.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:C.jsxs("div",{className:"max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl shadow-green-100 overflow-hidden border border-gray-100 p-8 md:p-12 animate-in zoom-in-95 duration-500",children:[C.jsxs("div",{className:"text-center mb-10",children:[C.jsx("div",{className:"w-20 h-20 bg-white rounded-3xl mx-auto flex items-center justify-center shadow-2xl mb-6 overflow-hidden",children:C.jsx("img",{src:"/biblioteca-jimui/logo.jpeg",alt:"Logo JIMUA",className:"w-full h-full object-cover"})}),C.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Biblioteca JIMUI"}),C.jsx("p",{className:"text-gray-400 font-medium mt-2",children:e==="login"?"Bem-vindo de volta, leitor!":"Crie sua conta na comunidade."})]}),T&&C.jsx("div",{className:"mb-6 p-4 bg-red-50 text-red-600 text-sm font-bold rounded-2xl border border-red-100 text-center animate-in shake duration-300",children:T}),C.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e==="register"&&C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Nome Completo"}),C.jsx("input",{type:"text",required:!0,className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none transition-all font-medium",placeholder:"Ex: Joo Silva",value:m,onChange:z=>_(z.target.value)})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Email"}),C.jsx("input",{type:"email",required:!0,className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none transition-all font-medium",placeholder:"leitor@jimui.org",value:i,onChange:z=>r(z.target.value)})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Senha"}),C.jsx("input",{type:"password",required:!0,className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-[#0F9D58] outline-none transition-all font-medium",placeholder:"",value:a,onChange:z=>u(z.target.value)})]}),e==="register"&&C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1.5 ml-2",children:"Confirmar Senha"}),C.jsx("input",{type:"password",required:!0,className:`w-full px-5 py-4 bg-gray-50 border-none rounded-2xl focus:ring-2 outline-none transition-all font-medium ${f&&a!==f?"ring-2 ring-red-400 focus:ring-red-400":"focus:ring-[#0F9D58]"}`,placeholder:"",value:f,onChange:z=>h(z.target.value)}),f&&a!==f&&C.jsx("p",{className:"text-red-400 text-[10px] font-bold mt-1 ml-2",children:"As senhas no coincidem"})]}),C.jsx("button",{type:"submit",disabled:w,className:"w-full bg-[#0F9D58] text-white py-4 rounded-2xl font-black text-lg shadow-xl shadow-green-100 hover:scale-[1.02] active:scale-95 transition-all mt-4 disabled:opacity-50",children:w?"PROCESSANDO...":e==="login"?"ENTRAR":"CRIAR CONTA"})]}),C.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-50 text-center",children:[C.jsx("p",{className:"text-gray-400 text-sm",children:e==="login"?"Ainda no tem conta?":"J possui cadastro?"}),C.jsx("button",{onClick:P,className:"text-[#0F9D58] font-black mt-1 hover:underline underline-offset-4",children:e==="login"?"REGISTRE-SE AGORA":"FAA LOGIN"})]}),C.jsx("div",{className:"mt-6 text-[10px] text-gray-300 text-center italic",children:"Dica: use admin@jimui.org / admin para entrar como Administrador."})]})})},w5=({history:n,books:e,onBookClick:t})=>{const i=n.map(r=>{const a=e.find(u=>u.id===r.bookId);return{...r,book:a}}).filter(r=>r.book!==void 0);return C.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom duration-500",children:[C.jsxs("div",{className:"mb-8",children:[C.jsx("h2",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Histrico de Leitura"}),C.jsx("p",{className:"text-gray-400 font-medium",children:"Revisite os livros que voc j explorou."})]}),i.length===0?C.jsxs("div",{className:"py-20 text-center text-gray-400 bg-white rounded-[2.5rem] border border-gray-100",children:[C.jsx("div",{className:"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-6",children:C.jsx("svg",{className:"w-10 h-10 text-gray-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),C.jsx("p",{className:"text-xl font-bold",children:"Nenhum livro lido ainda"}),C.jsx("p",{className:"mt-1",children:"Comece sua jornada literria explorando a biblioteca!"})]}):C.jsx("div",{className:"space-y-4",children:i.map((r,a)=>{var u,f,h;return C.jsxs("div",{onClick:()=>r.book&&t(r.book),className:"bg-white p-4 rounded-3xl shadow-sm border border-gray-100 flex items-center gap-4 hover:shadow-md transition-all cursor-pointer group active:scale-[0.98]",children:[C.jsx("img",{src:(u=r.book)==null?void 0:u.coverUrl,className:"w-16 h-20 object-cover rounded-xl shadow-sm group-hover:scale-105 transition-transform",alt:""}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h3",{className:"font-black text-gray-800 line-clamp-1",children:(f=r.book)==null?void 0:f.title}),C.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider",children:(h=r.book)==null?void 0:h.category}),C.jsxs("p",{className:"text-[10px] text-[#0F9D58] font-bold mt-1",children:["Lido em ",new Date(r.readAt).toLocaleDateString()]})]}),C.jsx("div",{className:"p-3 text-[#0F9D58] opacity-0 group-hover:opacity-100 transition-opacity",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]},`${r.bookId}-${a}`)})})]})},R5=({book:n,onBack:e})=>{const[t,i]=Ue.useState(0),[r,a]=Ue.useState(null),[u,f]=Ue.useState(!0),[h,m]=Ue.useState(navigator.onLine);return Ue.useEffect(()=>{const _=()=>m(navigator.onLine);return window.addEventListener("online",_),window.addEventListener("offline",_),(async()=>{const E=await wt.getLocalFile(n.id);a(E),f(!1)})(),()=>{window.removeEventListener("online",_),window.removeEventListener("offline",_)}},[n.id]),Ue.useEffect(()=>{const _=setInterval(()=>{i(T=>T<100?T+1:100)},3e3);return()=>clearInterval(_)},[]),u?C.jsx("div",{className:"fixed inset-0 z-[100] bg-white flex items-center justify-center",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"w-16 h-16 border-4 border-[#0F9D58] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),C.jsx("p",{className:"font-black text-gray-400 uppercase tracking-widest text-xs",children:"Acessando arquivo..."})]})}):!h&&!r?C.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col items-center justify-center p-8 text-center",children:[C.jsx("div",{className:"w-24 h-24 bg-red-50 rounded-[2.5rem] flex items-center justify-center text-red-500 mb-6",children:C.jsx("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),C.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-2",children:"Sem Conexo"}),C.jsx("p",{className:"text-gray-500 max-w-sm mb-8",children:"Voc est offline e este livro no foi guardado no dispositivo. Conecte-se  internet para ler ou guarde-o para acesso offline posterior."}),C.jsx("button",{onClick:e,className:"bg-gray-900 text-white px-8 py-4 rounded-2xl font-black text-sm transition-all hover:scale-105 active:scale-95",children:"VOLTAR  BIBLIOTECA"})]}):C.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col animate-in slide-in-from-right duration-300",children:[C.jsxs("div",{className:"px-4 py-4 bg-white border-b border-gray-100 flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("button",{onClick:e,className:"p-2.5 bg-gray-50 text-gray-600 rounded-2xl hover:bg-gray-100 transition-all",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),C.jsxs("div",{children:[C.jsx("h2",{className:"font-black text-gray-900 text-sm line-clamp-1",children:n.title}),C.jsxs("div",{className:"flex items-center gap-1.5",children:[C.jsx("span",{className:`w-2 h-2 rounded-full ${r?"bg-[#0F9D58] animate-pulse":"bg-orange-400"}`}),C.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest",children:r?"Arquivo Local Persistido":"Lendo da Nuvem"})]})]})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("div",{className:"text-right hidden sm:block",children:[C.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"Progresso"}),C.jsxs("p",{className:"text-sm font-black text-gray-800",children:[t,"%"]})]}),C.jsx("div",{className:"w-10 h-10 bg-gray-50 rounded-full flex items-center justify-center text-gray-400",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})})]})]}),C.jsx("div",{className:"w-full h-1 bg-gray-50 overflow-hidden",children:C.jsx("div",{className:"h-full bg-[#0F9D58] transition-all duration-1000 ease-linear",style:{width:`${t}%`}})}),C.jsxs("div",{className:"flex-1 bg-[#FDFBF7] overflow-y-auto p-6 md:p-20 relative no-scrollbar",children:[C.jsxs("div",{className:"max-w-2xl mx-auto bg-white shadow-xl shadow-gray-200/50 p-10 md:p-16 rounded-[2.5rem] border border-gray-100 min-h-full",children:[C.jsxs("div",{className:"mb-12 border-b border-gray-50 pb-8 text-center",children:[C.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:n.title}),C.jsxs("p",{className:"text-orange-500 font-bold uppercase tracking-widest text-[10px]",children:["Pgina atual: ",Math.floor(t*3.2)+1]})]}),C.jsxs("div",{className:"prose prose-lg text-gray-700 leading-relaxed space-y-8 font-medium",children:[r?C.jsx("div",{className:"whitespace-pre-wrap",children:r}):C.jsxs(C.Fragment,{children:[C.jsx("p",{className:"first-letter:text-5xl first-letter:font-black first-letter:text-[#0F9D58] first-letter:mr-3 first-letter:float-left",children:"Esta obra est sendo carregada via conexo ativa."}),C.jsx("p",{children:'Para garantir que este contedo esteja sempre acessvel, mesmo sem internet, utilize a funo "GUARDAR NO APP" nos detalhes do livro.'}),C.jsxs("div",{className:"bg-orange-50 p-6 rounded-3xl border border-orange-100 mt-10",children:[C.jsx("p",{className:"text-orange-800 text-sm font-bold",children:"Aviso de Modo Nuvem:"}),C.jsx("p",{className:"text-orange-700 text-xs mt-1",children:"Voc est lendo a verso online. O progresso de leitura  sincronizado, mas o acesso depende da sua estabilidade de rede."})]})]}),C.jsx("p",{children:"A cultura  o que nos define como seres humanos. Atravs de obras como esta, a Comisso de Cultura da JIMUI busca elevar o esprito de cada membro da nossa comunidade."}),C.jsx("p",{children:"A jornada do conhecimento no tem fim, e cada pgina virada  um passo em direo a um futuro mais brilhante."})]}),C.jsx("div",{className:"mt-20 pt-10 border-t border-gray-50 text-center text-gray-300 text-[10px] font-black uppercase tracking-[0.2em]",children:"Fim da Visualizao de Amostra  Biblioteca JIMUI"})]}),C.jsxs("div",{className:"fixed bottom-10 left-1/2 -translate-x-1/2 flex items-center gap-1 bg-gray-900 text-white p-1.5 rounded-2xl shadow-2xl z-50",children:[C.jsx("button",{className:"p-3 hover:bg-white/10 rounded-xl transition-all",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),C.jsxs("div",{className:"px-4 border-l border-white/10 flex flex-col items-center",children:[C.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase",children:"Captulo 01"}),C.jsxs("span",{className:"text-xs font-black",children:["Pg. ",Math.floor(t*3.2)+1]})]}),C.jsx("button",{className:"p-3 hover:bg-white/10 rounded-xl transition-all border-l border-white/10",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H7m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]})]})},Tu="biblioteca_jimui_user",x5=()=>{const[n,e]=Ue.useState([]),[t,i]=Ue.useState([]),[r,a]=Ue.useState(()=>{try{const O=localStorage.getItem(Tu);return O?JSON.parse(O):null}catch{return null}}),[u,f]=Ue.useState(navigator.onLine),[h,m]=Ue.useState(""),[_,T]=Ue.useState("All"),[E,w]=Ue.useState(null),[V,U]=Ue.useState(null),[P,z]=Ue.useState("home"),[j,$]=Ue.useState(!1),[se,X]=Ue.useState(!1);Ue.useEffect(()=>{(async()=>{await wt.init();const Ze=await wt.getBooks(),ee=await wt.getCategories();e(Ze),i(ee),X(!0)})();const M=()=>{f(!0),x()},Ae=()=>f(!1);return window.addEventListener("online",M),window.addEventListener("offline",Ae),()=>{window.removeEventListener("online",M),window.removeEventListener("offline",Ae)}},[]),Ue.useEffect(()=>{r?localStorage.setItem(Tu,JSON.stringify(r)):localStorage.removeItem(Tu)},[r]);const le=O=>{a(O),localStorage.setItem(Tu,JSON.stringify(O))},x=async()=>{$(!0),setTimeout(async()=>{e(await wt.getBooks()),i(await wt.getCategories()),$(!1)},1e3)},N=async()=>{await wt.logout(),a(null),localStorage.removeItem(Tu),z("home")},D=Ue.useMemo(()=>{let O=n;if(P==="favorites"&&r&&(O=O.filter(M=>r.favorites.includes(M.id))),_!=="All"&&P==="home"&&(O=O.filter(M=>M.category===_)),h){const M=h.toLowerCase();O=O.filter(Ae=>Ae.title.toLowerCase().includes(M)||Ae.author.toLowerCase().includes(M)||Ae.category.toLowerCase().includes(M))}return O},[n,h,_,P,r]),F=async O=>{if(!r)return;const M=r.favorites.includes(O),Ae={...r,favorites:M?r.favorites.filter(Ze=>Ze!==O):[...r.favorites,O]};a(Ae),await wt.updateUser(Ae)},k=async()=>{if(!r)return;const O=await wt.getUser(r.id);O&&a(O)};return se?r?V?C.jsx(R5,{book:V,onBack:()=>U(null)}):C.jsxs("div",{className:"min-h-screen flex flex-col pb-20 md:pb-0 bg-gray-50",children:[C.jsxs("header",{className:"sticky top-0 z-40 bg-white border-b border-gray-100 shadow-sm px-4 py-3 flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>z("home"),children:[C.jsx("div",{className:"w-10 h-10 rounded-xl overflow-hidden shadow-lg shadow-green-100",children:C.jsx("img",{src:"/biblioteca-jimui/logo.jpeg",alt:"Logo JIMUA",className:"w-full h-full object-cover"})}),C.jsxs("h1",{className:"text-xl font-black text-gray-800 tracking-tight",children:["Biblioteca ",C.jsx("span",{className:"text-[#FF9800]",children:"JIMUI"})]})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-1 bg-gray-50 rounded-full text-[10px] font-bold text-gray-400",children:[C.jsx(jn.Wifi,{online:u}),u?j?"SINCRONIZANDO...":"ONLINE":"OFFLINE"]}),C.jsx("button",{onClick:()=>z("about"),className:`p-2 rounded-xl transition-all ${P==="about"?"bg-green-50 text-[#0F9D58]":"text-gray-400 hover:bg-gray-50"}`,children:C.jsx(jn.Info,{})}),C.jsx("button",{onClick:N,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all",title:"Sair",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]}),C.jsx("main",{className:"flex-1 container mx-auto px-4 py-6 max-w-6xl",children:P==="admin"&&(r==null?void 0:r.role)===dd.ADMIN?C.jsx(A5,{books:n,categories:t,onUpdate:async()=>{e(await wt.getBooks()),i(await wt.getCategories())}}):P==="about"?C.jsx(I5,{}):P==="history"?C.jsx(w5,{history:r.readingHistory,books:n,onBookClick:w}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"mb-8 space-y-4",children:[C.jsxs("div",{className:"relative group",children:[C.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none text-gray-400 group-focus-within:text-[#0F9D58] transition-colors",children:C.jsx(jn.Search,{})}),C.jsx("input",{type:"text",placeholder:"Busque por ttulo, autor ou categoria...",className:"w-full pl-12 pr-4 py-4 bg-white border-none shadow-md rounded-2xl focus:ring-2 focus:ring-[#0F9D58] transition-all outline-none text-lg",value:h,onChange:O=>m(O.target.value)})]}),P==="home"&&C.jsxs("div",{className:"flex overflow-x-auto pb-2 gap-2 scrollbar-hide no-scrollbar",children:[C.jsx("button",{onClick:()=>T("All"),className:`px-5 py-2 rounded-full text-sm font-bold whitespace-nowrap transition-all ${_==="All"?"bg-[#0F9D58] text-white shadow-lg shadow-green-100":"bg-white text-gray-500 hover:bg-gray-100"}`,children:"Todos"}),t.map(O=>C.jsx("button",{onClick:()=>T(O.name),className:`px-5 py-2 rounded-full text-sm font-bold whitespace-nowrap transition-all ${_===O.name?"bg-[#0F9D58] text-white shadow-lg shadow-green-100":"bg-white text-gray-500 hover:bg-gray-100"}`,children:O.name},O.id))]})]}),C.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:D.map(O=>C.jsx(o2,{book:O,isFavorite:(r==null?void 0:r.favorites.includes(O.id))||!1,isCached:(r==null?void 0:r.cachedBookIds.includes(O.id))||!1,onToggleFavorite:()=>F(O.id),onClick:()=>w(O)},O.id))})]})}),C.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 px-6 py-3 flex justify-between items-center z-50",children:[C.jsxs("button",{onClick:()=>z("home"),className:`flex flex-col items-center gap-1 flex-1 ${P==="home"?"text-[#0F9D58]":"text-gray-400"}`,children:[C.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),C.jsx("span",{className:"text-[9px] font-black tracking-widest uppercase",children:"Explorar"})]}),C.jsxs("button",{onClick:()=>z("favorites"),className:`flex flex-col items-center gap-1 flex-1 ${P==="favorites"?"text-[#0F9D58]":"text-gray-400"}`,children:[C.jsx(jn.Heart,{filled:P==="favorites"}),C.jsx("span",{className:"text-[9px] font-black tracking-widest uppercase",children:"Favoritos"})]}),C.jsxs("button",{onClick:()=>z("history"),className:`flex flex-col items-center gap-1 flex-1 ${P==="history"?"text-[#0F9D58]":"text-gray-400"}`,children:[C.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),C.jsx("span",{className:"text-[9px] font-black tracking-widest uppercase",children:"Lidos"})]}),(r==null?void 0:r.role)===dd.ADMIN&&C.jsxs("button",{onClick:()=>z("admin"),className:`flex flex-col items-center gap-1 flex-1 ${P==="admin"?"text-[#0F9D58]":"text-gray-400"}`,children:[C.jsx(jn.Admin,{}),C.jsx("span",{className:"text-[9px] font-black tracking-widest uppercase",children:"Painel"})]})]}),E&&C.jsx(S5,{book:E,onClose:()=>w(null),isFavorite:(r==null?void 0:r.favorites.includes(E.id))||!1,isCached:(r==null?void 0:r.cachedBookIds.includes(E.id))||!1,onToggleFavorite:()=>F(E.id),userId:r.id,onRead:O=>{U(O),w(null),k()},onDownloadComplete:k})]}):C.jsx(C5,{onAuthSuccess:le}):null},zw=document.getElementById("root");if(!zw)throw new Error("Could not find root element to mount to");const b5=Mx.createRoot(zw);b5.render(C.jsx(Ix.StrictMode,{children:C.jsx(x5,{})}));
